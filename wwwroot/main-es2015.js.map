{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/about/about.component.html","./src/app/app.component.html","./src/app/chatbox/chatbox.component.html","./src/app/code-editor/code-editor.component.html","./src/app/contact/contact.component.html","./src/app/feedback/feedback.component.html","./src/app/footer/footer.component.html","./src/app/header/header.component.html","./src/app/home/home.component.html","./src/app/message-bubble/message-bubble.component.html","./node_modules/tslib/tslib.es6.js","./src/app/about/about.component.css","./src/app/about/about.component.ts","./src/app/app-routing.module.ts","./src/app/app.component.css","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/chatbox/chatbox.component.css","./src/app/chatbox/chatbox.component.ts","./src/app/code-editor/code-editor.component.css","./src/app/code-editor/code-editor.component.ts","./src/app/contact/contact.component.css","./src/app/contact/contact.component.ts","./src/app/feedback/feedback.component.css","./src/app/feedback/feedback.component.ts","./src/app/footer/footer.component.css","./src/app/footer/footer.component.ts","./src/app/header/header.component.css","./src/app/header/header.component.ts","./src/app/home/home.component.css","./src/app/home/home.component.ts","./src/app/message-bubble/message-bubble.component.css","./src/app/message-bubble/message-bubble.component.ts","./src/app/services/broadcast.service.ts","./src/app/services/cursor.service.ts","./src/app/services/editor.service.ts","./src/app/services/name.service.ts","./src/app/services/peer.service.ts","./src/app/services/room.service.ts","./src/app/services/turnServerService.ts","./src/app/services/utils.service.ts","./src/app/shared/AlertType.ts","./src/app/shared/BalancedBST.ts","./src/app/shared/CRDT.ts","./src/app/shared/CursorChangeInfo.ts","./src/app/shared/CustomNumber.ts","./src/app/shared/Languages.ts","./src/app/shared/Message.ts","./src/app/shared/NameColor.ts","./src/app/shared/SelectionChangeInfo.ts","./src/app/shared/Utils.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"<div class=\\\"jumbotron\\\" style=\\\"background-color: #fff; height: calc(95vh);\\\">\\r\\n  <p>about works!</p>\\r\\n</div>\\r\\n\"","export default \"<app-header></app-header>\\r\\n<router-outlet></router-outlet>\\r\\n<app-footer></app-footer>\\r\\n\\r\\n\\r\\n\"","export default \"<div class=\\\"dropdown mb-3 d-flex\\\">\\r\\n  <button class=\\\"btn btn-block btn-primary btn-dropdown dropdown-toggle font-weight-bold\\\"\\r\\n          type=\\\"button\\\"\\r\\n          id=\\\"dropdownMenuButton\\\"\\r\\n          data-toggle=\\\"dropdown\\\"\\r\\n          aria-haspopup=\\\"true\\\"\\r\\n          aria-expanded=\\\"false\\\">\\r\\n    People\\r\\n  </button>\\r\\n  <!-- Change Name button -->\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-light\\\" data-toggle=\\\"modal\\\" data-target=\\\"#changeNameModal\\\">\\r\\n    <span type=\\\"button\\\" data-toggle=\\\"tooltip\\\" data-placement=\\\"top\\\" title=\\\"Change your name\\\">\\r\\n      <i class=\\\"fa fa-pencil fa-fw\\\" style=\\\"margin-right: 0px\\\"></i>\\r\\n    </span>\\r\\n  </button>\\r\\n\\r\\n  <!-- Drop down list of ppl-->\\r\\n  <div class=\\\"dropdown-menu\\\">\\r\\n    <a *ngFor=\\\"let nameColor of namesColors\\\" class=\\\"dropdown-item\\\">\\r\\n      <i class=\\\"fa fa-circle fa-fw\\\" [ngClass]=\\\"'color-' + nameColor.color\\\"></i>\\r\\n      {{ nameColor.name }}\\r\\n    </a>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"chatBox card shadow-sm p-3 mb-5 bg-white rounded\\\">\\r\\n  <div class=\\\"mt-2\\\">\\r\\n    <div *ngFor=\\\"let mess of messages\\\">\\r\\n      <app-message-bubble [senderName]=\\\"mess.fromPeerId\\\"\\r\\n                          [content]=\\\"mess.content\\\">\\r\\n      </app-message-bubble>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div>&nbsp;</div>\\r\\n\\r\\n  <!-- Emoji Picker-->\\r\\n  <div class=\\\"emoji-wrapper\\\">\\r\\n    <emoji-mart *ngIf=\\\"showEmojiPicker\\\"\\r\\n    set=\\\"messenger\\\"\\r\\n    [showPreview]=\\\"false\\\"\\r\\n    [emojiSize]=\\\"18\\\"\\r\\n    [perLine]=\\\"7\\\"\\r\\n    [totalFrequentLines]=\\\"1\\\"\\r\\n    height =\\\"150px\\\"\\r\\n    (emojiClick)=\\\"addEmoji($event)\\\"></emoji-mart>\\r\\n  </div>\\r\\n\\r\\n  <form class=\\\"ml-2 mr-1 mt-auto\\\"\\r\\n        [formGroup]=\\\"messageForm\\\"\\r\\n        (ngSubmit)=\\\"sendMessage(messageForm.value)\\\">\\r\\n    <div class=\\\"form-group d-flex\\\">\\r\\n      <!-- Input Box-->\\r\\n      <input type=\\\"text\\\"\\r\\n             formControlName=\\\"messageToSend\\\"\\r\\n             class=\\\"form-control\\\"\\r\\n             placeholder=\\\"Aa\\\"\\r\\n             autofocus />\\r\\n      <a class=\\\"btn btn-light\\\" (click)=\\\"toggleEmojiPicker()\\\">\\r\\n        <i class=\\\"fa fa-smile-o fa-lg\\\"></i>\\r\\n      </a>\\r\\n      <button *ngIf=\\\"messageToSend.value != ''\\\"\\r\\n              class=\\\"invisibleBtn\\\"\\r\\n              type=\\\"submit\\\">\\r\\n        <img class=\\\"ml-1\\\" src=\\\"../../assets/send-mail.svg\\\" />\\r\\n      </button>\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n<!-- Modal -->\\r\\n<div class=\\\"modal fade\\\" id=\\\"changeNameModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-hidden=\\\"true\\\">\\r\\n  <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <h5 class=\\\"modal-title\\\">New Name</h5>\\r\\n        <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\r\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n        </button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n        <input [(ngModel)]=\\\"myUsername\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"New name\\\" aria-label=\\\"New Username\\\">\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer\\\">\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" data-dismiss=\\\"modal\\\">Close</button>\\r\\n        <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" (click)=\\\"editName()\\\" data-dismiss=\\\"modal\\\">Save changes</button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<!-- Loading screen -->\\r\\n<div\\r\\n  *ngIf=\\\"!ready\\\"\\r\\n  class=\\\"d-flex mr-2 justify-content-around align-items-center loading\\\"\\r\\n  id=\\\"waiting-screen\\\"\\r\\n>\\r\\n  <div id=\\\"spinner-container\\\" class=\\\"text-center\\\">\\r\\n    <div class=\\\"spinner-grow text-primary mb-3\\\" role=\\\"status\\\"></div>\\r\\n    <br />\\r\\n    <h2>Loading...</h2>\\r\\n    <p>We're preparing an advanced coding environment for you.</p>\\r\\n  </div>\\r\\n  <img id=\\\"loading-img\\\" src=\\\"../../assets/loading.svg\\\" alt=\\\"loading\\\" />\\r\\n</div>\\r\\n\\r\\n<!-- Warning banner -->\\r\\n<div\\r\\n  *ngIf=\\\"ready\\\"\\r\\n  class=\\\"alert alert-warning alert-dismissible fade show text-center\\\"\\r\\n  role=\\\"alert\\\"\\r\\n>\\r\\n  <strong>Welcome to Code Spot! </strong>We are grateful to see you! Remember to\\r\\n  <strong> save your data before leaving. </strong>\\r\\n  After everyone leaves the room, the data will be erased forever.\\r\\n  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n\\r\\n<!-- Error banner -->\\r\\n<div\\r\\n  *ngIf=\\\"showErrorBanner\\\"\\r\\n  class=\\\"alert alert-danger alert-dismissible fade show text-center\\\"\\r\\n  role=\\\"alert\\\"\\r\\n>\\r\\n  <strong\\r\\n    >Your session has been disconnected! Anything you type will no longer sync. </strong\\r\\n  >Please create a new room!\\r\\n</div>\\r\\n\\r\\n<div #mainContainer class=\\\"d-flex ml-3 mr-2 flex-md-row flex-column mt-4\\\">\\r\\n  <form class=\\\"form-horizontal col-md-9 col-xs-12\\\" [formGroup]=\\\"editorForm\\\">\\r\\n    <div *ngIf=\\\"ready\\\" class=\\\"d-flex form-row\\\">\\r\\n      <!--Select Language-->\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <div class=\\\"col-sm-2 pl-0\\\">\\r\\n          <select\\r\\n            class=\\\"custom-select form-control\\\"\\r\\n            formControlName=\\\"language\\\"\\r\\n            (change)=\\\"onLanguageChange($event.target.value)\\\"\\r\\n          >\\r\\n            <option\\r\\n              *ngFor=\\\"let language of languages\\\"\\r\\n              [ngValue]=\\\"language.value\\\"\\r\\n            >\\r\\n              {{ language.name }}\\r\\n            </option>\\r\\n          </select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!--Select Theme-->\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <div class=\\\"col-sm-2 pl-0\\\">\\r\\n          <select\\r\\n            class=\\\"custom-select form-control\\\"\\r\\n            formControlName=\\\"theme\\\"\\r\\n            (change)=\\\"onThemeChange($event.target.value)\\\"\\r\\n          >\\r\\n            <option *ngFor=\\\"let theme of themes\\\" [ngValue]=\\\"theme.value\\\">\\r\\n              {{ theme.name }}\\r\\n            </option>\\r\\n          </select>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!--Toggle Name Tag-->\\r\\n      <div\\r\\n        class=\\\"custom-control custom-switch form-group d-flex align-items-center\\\"\\r\\n      >\\r\\n        <input\\r\\n          type=\\\"checkbox\\\"\\r\\n          class=\\\"custom-control-input\\\"\\r\\n          id=\\\"tagNameSwitch\\\"\\r\\n          [(ngModel)]=\\\"showNameTags\\\"\\r\\n          (change)=\\\"toggleNameTag()\\\"\\r\\n          [ngModelOptions]=\\\"{ standalone: true }\\\"\\r\\n        />\\r\\n        <label class=\\\"custom-control-label\\\" for=\\\"tagNameSwitch\\\"\\r\\n          >Show name tags</label\\r\\n        >\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- Main Editor-->\\r\\n    <div>\\r\\n      <ngx-monaco-editor\\r\\n        [style.visibility]=\\\"ready ? 'visible' : 'hidden'\\\"\\r\\n        class=\\\"solution-code-editor\\\"\\r\\n        [options]=\\\"editorOptions\\\"\\r\\n        (onInit)=\\\"onInitEditorHandler($event)\\\"\\r\\n      ></ngx-monaco-editor>\\r\\n      <div class=\\\"btn-container d-flex\\\"\\r\\n           [style.visibility]=\\\"ready ? 'visible' : 'hidden'\\\">\\r\\n        <button class=\\\"btn btn-md btn-primary mt-2 mb-4 font-weight-bold\\\"\\r\\n                (click)=\\\"copyLink()\\\">\\r\\n          Get shareable link!\\r\\n        </button>\\r\\n        <button class=\\\"btn btn-md btn-primary mt-2 ml-2 mb-4 font-weight-bold\\\"\\r\\n                (click)=\\\"downloadFile()\\\">\\r\\n          Download file!\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- Aux Editor-->\\r\\n    <ngx-monaco-editor\\r\\n      id=\\\"aux-editor\\\"\\r\\n      class=\\\"solution-code-editor\\\"\\r\\n      [options]=\\\"editorOptions\\\"\\r\\n      (onInit)=\\\"onInitAuxEditorHandler($event)\\\"\\r\\n    >\\r\\n    </ngx-monaco-editor>\\r\\n  </form>\\r\\n\\r\\n  <!--Chat Box -->\\r\\n  <app-chatbox\\r\\n    [style.visibility]=\\\"ready ? 'visible' : 'hidden'\\\"\\r\\n    class=\\\"mt-5 ml-1\\\"\\r\\n  ></app-chatbox>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"container\\\">\\r\\n  <div class=\\\"card-deck justify-content-center mt-auto\\\">\\r\\n    <div class=\\\"card contact-card shadow-sm\\\">\\r\\n      <img class=\\\"card-img-top img-circle\\\" src=\\\"../../assets/Heidi.JPG\\\" />\\r\\n      <div class=\\\"card-body m-3\\\">\\r\\n        <h3>Heidi Tran</h3>\\r\\n        <h6 class=\\\"font-weight-light font-italic\\\">Software Engineer</h6>\\r\\n        <p class=\\\"card-text my-4 text-justify\\\">\\r\\n          Hi! I'm a rising third-year student at Drexel University. I'm\\r\\n          passionate about building software products and creating data\\r\\n          solutions. In my free time, I love trying out new recipes.\\r\\n        </p>\\r\\n        <div class=\\\"d-flex socials\\\">\\r\\n          <a\\r\\n            class=\\\"fa fa-lg fa-envelope icon\\\"\\r\\n            target=\\\"_blank\\\"\\r\\n            href=\\\"mailto:gtt27@drexel.edu\\\"\\r\\n          ></a>\\r\\n          <a\\r\\n            class=\\\"fa fa-lg fa-github-alt mx-2 icon\\\"\\r\\n            target=\\\"_blank\\\"\\r\\n            href=\\\"https://github.com/HeidiTran\\\"\\r\\n          ></a>\\r\\n          <a\\r\\n            class=\\\"fa fa-lg fa-linkedin icon\\\"\\r\\n            target=\\\"_blank\\\"\\r\\n            href=\\\"https://www.linkedin.com/in/heidi-tran/\\\"\\r\\n          ></a>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"card contact-card shadow-sm\\\">\\r\\n      <img class=\\\"card-img-top img-circle\\\" src=\\\"../../assets/AnhMinh.jpg\\\" />\\r\\n      <div class=\\\"card-body m-3 d-flex flex-column\\\">\\r\\n        <h3>Anh Minh Tran</h3>\\r\\n        <h6 class=\\\"font-weight-light font-italic\\\">Software Engineer</h6>\\r\\n        <p class=\\\"card-text my-4 text-justify\\\">\\r\\n          Hey guys, I'm a sophomore at Langara College. I have an immense\\r\\n          passion and enthusiasm for tackling difficult coding challenges. I\\r\\n          love CodeSpot because it is hard algorithmically.\\r\\n        </p>\\r\\n        <div class=\\\"d-flex socials\\\">\\r\\n          <a\\r\\n            class=\\\"fa fa-lg fa-envelope icon\\\"\\r\\n            target=\\\"_blank\\\"\\r\\n            href=\\\"mailto:atran33@mylangara.ca\\\"\\r\\n          ></a>\\r\\n          <a\\r\\n            class=\\\"fa fa-lg fa-github-alt mx-2 icon\\\"\\r\\n            target=\\\"_blank\\\"\\r\\n            href=\\\"https://github.com/anhminhtran235\\\"\\r\\n          ></a>\\r\\n          <a\\r\\n            class=\\\"fa fa-lg fa-linkedin icon\\\"\\r\\n            target=\\\"_blank\\\"\\r\\n            href=\\\"https://www.linkedin.com/in/anhminhtran/\\\"\\r\\n          ></a>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- Feedback Form -->\\r\\n    <div class=\\\"card feedback-card shadow\\\">\\r\\n      <form\\r\\n        class=\\\"mt-auto mb-auto mx-5\\\"\\r\\n        [formGroup]=\\\"contactForm\\\"\\r\\n        (ngSubmit)=\\\"onSubmit(contactForm.value)\\\"\\r\\n      >\\r\\n        <h1 class=\\\"my-3\\\">{{ headerMessage }}</h1>\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <input\\r\\n            type=\\\"text\\\"\\r\\n            formControlName=\\\"name\\\"\\r\\n            class=\\\"form-control\\\"\\r\\n            placeholder=\\\"Your Name\\\"\\r\\n          />\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <input\\r\\n            type=\\\"text\\\"\\r\\n            formControlName=\\\"email\\\"\\r\\n            class=\\\"form-control\\\"\\r\\n            placeholder=\\\"Your Email\\\"\\r\\n          />\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <input\\r\\n            type=\\\"text\\\"\\r\\n            formControlName=\\\"subject\\\"\\r\\n            class=\\\"form-control\\\"\\r\\n            placeholder=\\\"Subject\\\"\\r\\n          />\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <textarea\\r\\n            class=\\\"form-control\\\"\\r\\n            formControlName=\\\"message\\\"\\r\\n            rows=\\\"8\\\"\\r\\n            placeholder=\\\"Message\\\"\\r\\n          ></textarea>\\r\\n        </div>\\r\\n        <button type=\\\"submit\\\" class=\\\"btn btn-lg btn-primary mb-4\\\">\\r\\n          Send message\\r\\n        </button>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-dialog modal-lg modal-dialog-scrollable\\\" role=\\\"document\\\">\\r\\n  <div class=\\\"modal-content\\\">\\r\\n    <div class=\\\"modal-header\\\">\\r\\n      <h5 class=\\\"modal-title\\\">Feedback</h5>\\r\\n      <button\\r\\n        type=\\\"button\\\"\\r\\n        class=\\\"close\\\"\\r\\n        data-dismiss=\\\"modal\\\"\\r\\n        aria-label=\\\"Close\\\"\\r\\n      >\\r\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\">\\r\\n      <form\\r\\n        [formGroup]=\\\"feedbackForm\\\"\\r\\n        (ngSubmit)=\\\"onSubmit(feedbackForm.value)\\\"\\r\\n      >\\r\\n        <!-- Overal satisfaction -->\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <label class=\\\"col-form-label\\\"\\r\\n            >Your overall satisfaction of the app</label\\r\\n          >\\r\\n          <br />\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"100%\\\"\\r\\n              formControlName=\\\"satisfactionLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"satisfactionLevel\\\"\\r\\n              name=\\\"satisfactionLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"satisfactionLevel\\\"\\r\\n              >Extremely well</label\\r\\n            >\\r\\n          </div>\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"80%\\\"\\r\\n              formControlName=\\\"satisfactionLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"satisfactionLevel2\\\"\\r\\n              name=\\\"satisfactionLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"satisfactionLevel2\\\"\\r\\n              >Very well</label\\r\\n            >\\r\\n          </div>\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"60%\\\"\\r\\n              formControlName=\\\"satisfactionLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"satisfactionLevel3\\\"\\r\\n              name=\\\"satisfactionLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"satisfactionLevel3\\\"\\r\\n              >Somewhat well</label\\r\\n            >\\r\\n          </div>\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"40%\\\"\\r\\n              formControlName=\\\"satisfactionLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"satisfactionLevel4\\\"\\r\\n              name=\\\"satisfactionLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"satisfactionLevel4\\\"\\r\\n              >Not so well</label\\r\\n            >\\r\\n          </div>\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"20%\\\"\\r\\n              formControlName=\\\"satisfactionLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"satisfactionLevel5\\\"\\r\\n              name=\\\"satisfactionLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"satisfactionLevel5\\\"\\r\\n              >Not at all well</label\\r\\n            >\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Collaborate -->\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <label class=\\\"col-form-label\\\"\\r\\n            >How satisfied are you with the ability to collaborate with others\\r\\n            using this app?</label\\r\\n          >\\r\\n          <br />\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"100%\\\"\\r\\n              formControlName=\\\"collabLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"collabLevel\\\"\\r\\n              name=\\\"collabLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"collabLevel\\\"\\r\\n              >Extremely well</label\\r\\n            >\\r\\n          </div>\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"80%\\\"\\r\\n              formControlName=\\\"collabLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"collabLevel2\\\"\\r\\n              name=\\\"collabLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"collabLevel2\\\"\\r\\n              >Very well</label\\r\\n            >\\r\\n          </div>\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"60%\\\"\\r\\n              formControlName=\\\"collabLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"collabLevel3\\\"\\r\\n              name=\\\"collabLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"collabLevel3\\\"\\r\\n              >Somewhat well</label\\r\\n            >\\r\\n          </div>\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"40%\\\"\\r\\n              formControlName=\\\"collabLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"collabLevel4\\\"\\r\\n              name=\\\"collabLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"collabLevel4\\\"\\r\\n              >Not so well</label\\r\\n            >\\r\\n          </div>\\r\\n          <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n            <input\\r\\n              value=\\\"20%\\\"\\r\\n              formControlName=\\\"collabLevel\\\"\\r\\n              type=\\\"radio\\\"\\r\\n              id=\\\"collabLevel5\\\"\\r\\n              name=\\\"collabLevel\\\"\\r\\n              class=\\\"custom-control-input\\\"\\r\\n            />\\r\\n            <label class=\\\"custom-control-label\\\" for=\\\"collabLevel5\\\"\\r\\n              >Not at all well</label\\r\\n            >\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"d-flex flex-md-row flex-column\\\">\\r\\n          <!-- Did well -->\\r\\n          <div class=\\\"form-group col-sm-12 col-md-5 pl-0 mb-md-0\\\">\\r\\n            <label class=\\\"col-form-label\\\"\\r\\n              >What do you like most about the app?</label\\r\\n            >\\r\\n            <br />\\r\\n            <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n              <input\\r\\n                value=\\\"0\\\"\\r\\n                formControlName=\\\"didWell\\\"\\r\\n                type=\\\"radio\\\"\\r\\n                id=\\\"didWell\\\"\\r\\n                name=\\\"didWell\\\"\\r\\n                class=\\\"custom-control-input\\\"\\r\\n              />\\r\\n              <label class=\\\"custom-control-label\\\" for=\\\"didWell\\\"\\r\\n                >Look and feel</label\\r\\n              >\\r\\n            </div>\\r\\n            <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n              <input\\r\\n                value=\\\"1\\\"\\r\\n                formControlName=\\\"didWell\\\"\\r\\n                type=\\\"radio\\\"\\r\\n                id=\\\"didWell2\\\"\\r\\n                name=\\\"didWell\\\"\\r\\n                class=\\\"custom-control-input\\\"\\r\\n              />\\r\\n              <label class=\\\"custom-control-label\\\" for=\\\"didWell2\\\"\\r\\n                >Functionality</label\\r\\n              >\\r\\n            </div>\\r\\n            <div class=\\\"custom-control custom-radio custom-control-inline\\\">\\r\\n              <input\\r\\n                value=\\\"2\\\"\\r\\n                formControlName=\\\"didWell\\\"\\r\\n                type=\\\"radio\\\"\\r\\n                id=\\\"didWell3\\\"\\r\\n                name=\\\"didWell\\\"\\r\\n                class=\\\"custom-control-input\\\"\\r\\n              />\\r\\n              <label class=\\\"custom-control-label\\\" for=\\\"didWell3\\\"\\r\\n                >Convenience</label\\r\\n              >\\r\\n            </div>\\r\\n          </div>\\r\\n          <!-- Issue -->\\r\\n          <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-form-label\\\">\\r\\n              What was your biggest problem during your experience?\\r\\n            </label>\\r\\n            <br />\\r\\n            <select class=\\\"custom-select\\\" formControlName=\\\"issue\\\">\\r\\n              <option value=\\\"0\\\">Nothing</option>\\r\\n              <option value=\\\"1\\\">The app was confusing to use</option>\\r\\n              <option value=\\\"2\\\">The app was missing features I needed</option>\\r\\n              <option value=\\\"3\\\">I experienced bugs</option>\\r\\n              <option value=\\\"4\\\">The app suddenly crashed</option>\\r\\n              <option value=\\\"5\\\">Other</option>\\r\\n            </select>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- Issue in details -->\\r\\n        <div *ngIf=\\\"feedbackForm.value['issue'] !== 0\\\" class=\\\"form-group\\\">\\r\\n          <label class=\\\"col-form-label\\\"\\r\\n            >Please describe the problem you encountered in more detail</label\\r\\n          >\\r\\n          <textarea\\r\\n            class=\\\"form-control\\\"\\r\\n            formControlName=\\\"issueDetails\\\"\\r\\n            rows=\\\"1\\\"\\r\\n            placeholder=\\\"When I ...\\\"\\r\\n          ></textarea>\\r\\n        </div>\\r\\n        <!-- Suggestions -->\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <label class=\\\"col-form-label\\\"\\r\\n            >Do you have any suggestions for improvement? (e.g. features you\\r\\n            want to see in the future)</label\\r\\n          >\\r\\n          <input\\r\\n            formControlName=\\\"improvement\\\"\\r\\n            placeholder=\\\"I want ...\\\"\\r\\n            type=\\\"text\\\"\\r\\n            class=\\\"form-control\\\"\\r\\n          />\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" data-dismiss=\\\"modal\\\">\\r\\n        Cancel\\r\\n      </button>\\r\\n      <button\\r\\n        type=\\\"submit\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n        (click)=\\\"onSubmit(feedbackForm.value)\\\"\\r\\n        data-dismiss=\\\"modal\\\"\\r\\n      >\\r\\n        Submit\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<footer class=\\\"footer\\\">\\r\\n  <div class=\\\"container\\\">\\r\\n    <p class=\\\"text-center my-0 p-3\\\">\\r\\n      An open source project by Dinamo Team.\\r\\n      <a\\r\\n        class=\\\"fa fa-lg fa-github mx-2 icon\\\"\\r\\n        target=\\\"_blank\\\"\\r\\n        href=\\\"https://github.com/DinamoTeam\\\"\\r\\n      ></a>\\r\\n    </p>\\r\\n  </div>\\r\\n</footer>\\r\\n\"","export default \"<header>\\r\\n  <nav\\r\\n    class=\\\"navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom shadow-sm\\\"\\r\\n  >\\r\\n    <div class=\\\"container-fluid mx-5\\\">\\r\\n      <strong class=\\\"d-flex align-items-center\\\">\\r\\n        <img id=\\\"brandLogo\\\" src=\\\"../../assets/CodeSpotLogo.svg\\\" class=\\\"mr-2\\\" />\\r\\n        <a class=\\\"navbar-brand clickable\\\" (click)=\\\"goHome()\\\">Code Spot</a>\\r\\n      </strong>\\r\\n      <button\\r\\n        class=\\\"navbar-toggler\\\"\\r\\n        type=\\\"button\\\"\\r\\n        data-toggle=\\\"collapse\\\"\\r\\n        data-target=\\\".navbar-collapse\\\"\\r\\n        aria-label=\\\"Toggle navigation\\\"\\r\\n        [attr.aria-expanded]=\\\"isExpanded\\\"\\r\\n      >\\r\\n        <span class=\\\"navbar-toggler-icon\\\"></span>\\r\\n      </button>\\r\\n      <div\\r\\n        class=\\\"navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse\\\"\\r\\n        [ngClass]=\\\"{ show: isExpanded }\\\"\\r\\n      >\\r\\n        <ul class=\\\"navbar-nav flex-grow align-items-center\\\">\\r\\n          <!-- Home -->\\r\\n          <li\\r\\n            class=\\\"nav-item\\\"\\r\\n            [routerLinkActive]=\\\"['link-active']\\\"\\r\\n            [routerLinkActiveOptions]=\\\"{ exact: true }\\\"\\r\\n          >\\r\\n            <a class=\\\"nav-link text-secondary\\\" role=\\\"button\\\" (click)=\\\"goHome()\\\"\\r\\n              >Home</a\\r\\n            >\\r\\n          </li>\\r\\n          <!-- Feedback -->\\r\\n          <li\\r\\n            class=\\\"nav-item\\\"\\r\\n            [routerLinkActive]=\\\"['link-active']\\\"\\r\\n            [routerLinkActiveOptions]=\\\"{ exact: true }\\\"\\r\\n          >\\r\\n            <a\\r\\n              class=\\\"nav-link text-secondary\\\"\\r\\n              role=\\\"button\\\"\\r\\n              data-toggle=\\\"modal\\\"\\r\\n              data-target=\\\"#feedbackModal\\\"\\r\\n              (click)=\\\"onBtnFeedbackClick()\\\"\\r\\n              >Feedback</a\\r\\n            >\\r\\n          </li>\\r\\n          <!-- Contact -->\\r\\n          <li\\r\\n            class=\\\"nav-item\\\"\\r\\n            [routerLinkActive]=\\\"['link-active']\\\"\\r\\n            [routerLinkActiveOptions]=\\\"{ exact: true }\\\"\\r\\n          >\\r\\n            <a\\r\\n              class=\\\"nav-link text-secondary\\\"\\r\\n              role=\\\"button\\\"\\r\\n              (click)=\\\"onBtnContactClick()\\\"\\r\\n              >Contact</a\\r\\n            >\\r\\n          </li>\\r\\n          <!-- Create Room-->\\r\\n          <li *ngIf=\\\"showCreateNewRoomBtn\\\" class=\\\"nav-item\\\">\\r\\n            <button\\r\\n              class=\\\"btn btn-lg btn-primary\\\"\\r\\n              role=\\\"button\\\"\\r\\n              (click)=\\\"onBtnCreateNewRoomClick()\\\"\\r\\n            >\\r\\n              Create New Room &raquo;\\r\\n            </button>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n    </div>\\r\\n  </nav>\\r\\n</header>\\r\\n\\r\\n<!-- Feedback form -->\\r\\n<div\\r\\n  class=\\\"modal fade\\\"\\r\\n  id=\\\"feedbackModal\\\"\\r\\n  tabindex=\\\"-1\\\"\\r\\n  role=\\\"dialog\\\"\\r\\n  aria-hidden=\\\"true\\\"\\r\\n>\\r\\n  <app-feedback></app-feedback>\\r\\n</div>\\r\\n\"","export default \"<div role=\\\"main\\\" class=\\\"cover d-flex\\\">\\r\\n  <img src=\\\"../../assets/inSync.svg\\\" alt=\\\"laptop\\\" class=\\\"home-img order-md-2 order-sm-1\\\" />\\r\\n  <div class=\\\"container text-center order-md-1 order-sm-2\\\">\\r\\n    <h1 class=\\\"font-weight-bold\\\">Get started with Code Spot</h1>\\r\\n    <h3 class=\\\"font-weight-light\\\">\\r\\n      We help companies conduct technical interviews\\r\\n    </h3>\\r\\n    <div class=\\\"d-flex flex-column flex-md-row justify-content-center mt-5\\\">\\r\\n      <button class=\\\"btn btn-lg mr-md-3 btn-primary\\\"\\r\\n         role=\\\"button\\\"\\r\\n         routerlink=\\\"/editor\\\"\\r\\n         (click)=\\\"goToEditor()\\\">Create New Room &raquo;</button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"features\\\">\\r\\n  <div class=\\\"d-flex feature flex-md-row flex-column\\\">\\r\\n    <img class=\\\"feature-img\\\" src=\\\"../../assets/googleDocs_.svg\\\" />\\r\\n    <div class=\\\"feature-text-left mt-5\\\">\\r\\n      <h1 class=\\\"feature-name mb-4\\\">Real-time Collaboration</h1>\\r\\n      <p class=\\\"feature-text\\\">\\r\\n        Conduct live interviews with the power of Visual Studio Code, the most popular code editor on the planet. Code Spot supports 60+ programming languages including C, C++, Java, Python, JavaScript, and many more. Plus, Code Spot supports an unlimited number of collaborators and 100% privacy! No account creation is needed.\\r\\n      </p>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"d-flex feature flex-md-row flex-column\\\">\\r\\n    <div class=\\\"feature-text-right mt-5\\\">\\r\\n      <h1 class=\\\"feature-name mb-4\\\">Simple Messaging</h1>\\r\\n      <p class=\\\"feature-text\\\">\\r\\n        Code Spot boosts your interview experience with built-in messaging functionalities. Express more with hundreds of emoji included!\\r\\n      </p>\\r\\n    </div>\\r\\n    <img\\r\\n      class=\\\"feature-img\\\"\\r\\n      style=\\\"margin-left: auto;\\\"\\r\\n      src=\\\"../../assets/groupChat.svg\\\"\\r\\n    />\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<div [ngClass]=\\\"{ 'justify-content-end': senderName == myPeerId }\\\"\\r\\n     class=\\\"d-flex\\\">\\r\\n  <div [ngClass]=\\\"{ 'align-items-end': senderName == myPeerId }\\\"\\r\\n       class=\\\"d-flex flex-column\\\">\\r\\n    <p class=\\\"name\\\">{{ this.nameService.getPeerName(this.senderName) }}</p>\\r\\n    <div [ngClass]=\\\"{\\r\\n        otherPplMessage: senderName != myPeerId,\\r\\n        myMessage: senderName == myPeerId\\r\\n      }\\\"\\r\\n         class=\\\"card mb-1\\\">\\r\\n      <div class=\\\"card-body\\\">\\r\\n        <p class=\\\"card-text\\\">{{ content }}</p>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Fib3V0L2Fib3V0LmNvbXBvbmVudC5jc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-about',\r\n  templateUrl: './about.component.html',\r\n  styleUrls: ['./about.component.css']\r\n})\r\nexport class AboutComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { AboutComponent } from './about/about.component';\r\nimport { CodeEditorComponent } from './code-editor/code-editor.component';\r\nimport { ContactComponent } from './contact/contact.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: HomeComponent },\r\n  { path: 'editor', redirectTo: 'editor/new', pathMatch: 'full' },\r\n  { path: 'editor/:roomName', component: CodeEditorComponent},\r\n  { path: 'About', component: AboutComponent },\r\n  { path: 'Contact', component: ContactComponent},\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIn0= */\"","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'code-spot-client';\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { RouterModule } from '@angular/router';\r\nimport { AppComponent } from './app.component';\r\nimport { MonacoEditorModule, NgxMonacoEditorConfig } from 'ngx-monaco-editor';\r\nimport { PickerModule } from '@ctrl/ngx-emoji-mart';\r\n\r\nimport { HomeComponent } from './home/home.component';\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { FooterComponent } from './footer/footer.component';\r\nimport { AboutComponent } from './about/about.component';\r\nimport { CodeEditorComponent } from './code-editor/code-editor.component';\r\nimport { ChatboxComponent } from './chatbox/chatbox.component';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { ContactComponent } from './contact/contact.component';\r\nimport { MessageBubbleComponent } from './message-bubble/message-bubble.component';\r\nimport { FeedbackComponent } from './feedback/feedback.component';\r\n\r\nconst monacoConfig: NgxMonacoEditorConfig = {\r\n  defaultOptions: {\r\n    wordWrap: 'on',\r\n    showUnused: true,\r\n    tabCompletion: 'onlySnippets',\r\n\r\n    // // Trying to disable deleting white spaces\r\n    // autoClosingOvertype: 'never',\r\n    // autoClosingBrackets: 'never',\r\n    // autoClosingQuotes: 'never',\r\n    // autoIndent: 'none',\r\n    // autoSurround: 'never',\r\n    // folding: false,\r\n    // renderIndentGuides: false,\r\n    // wrappingIndent: 'none',\r\n    // disableMonospaceOptimizations: true,\r\n  },\r\n  onMonacoLoad,\r\n};\r\n\r\nexport function onMonacoLoad() {\r\n  /* Change Config here */\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    HomeComponent,\r\n    HeaderComponent,\r\n    FooterComponent,\r\n    AboutComponent,\r\n    CodeEditorComponent,\r\n    ChatboxComponent,\r\n    ContactComponent,\r\n    MessageBubbleComponent,\r\n    FeedbackComponent,\r\n  ],\r\n  imports: [\r\n    HttpClientModule,\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    RouterModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MonacoEditorModule.forRoot(monacoConfig),\r\n    PickerModule,\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","export default \"img {\\r\\n  height: 25px;\\r\\n  width: 25px;\\r\\n  margin-top: 4px;\\r\\n  color: #ff0000;\\r\\n}\\r\\n\\r\\n.invisibleBtn {\\r\\n  border: initial;\\r\\n  background-color: initial;\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.chatBox {\\r\\n  width: 90vw;\\r\\n  height: 50vh;\\r\\n  overflow-y: auto;\\r\\n  position: relative !important;\\r\\n}\\r\\n\\r\\n.dropdown-menu {\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.dropdown-item {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.btn-dropdown {\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.fa-fw {\\r\\n  font-size: 15px;\\r\\n  margin-right: 0.5rem;\\r\\n}\\r\\n\\r\\n.emoji-wrapper {\\r\\n  height: 100%;\\r\\n  width: 100%;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.emoji-wrapper emoji-mart {\\r\\n  position: absolute;\\r\\n  right: 38px;\\r\\n  bottom: 0px;\\r\\n}\\r\\n\\r\\n@media (min-width: 768px) {\\r\\n  .chatBox {\\r\\n    width: 23vw;\\r\\n    height: 67vh;\\r\\n    overflow-y: auto;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* width */\\r\\n\\r\\n::-webkit-scrollbar {\\r\\n  width: 5px;\\r\\n}\\r\\n\\r\\n/* Track */\\r\\n\\r\\n::-webkit-scrollbar-track {\\r\\n  background: #f1f1f1;\\r\\n}\\r\\n\\r\\n/* Handle */\\r\\n\\r\\n::-webkit-scrollbar-thumb {\\r\\n  background: #999;\\r\\n}\\r\\n\\r\\n/* Handle on hover */\\r\\n\\r\\n::-webkit-scrollbar-thumb:hover {\\r\\n  background: #777;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hhdGJveC9jaGF0Ym94LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFZO0VBQ1osV0FBVztFQUNYLGVBQWU7RUFDZixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLHlCQUF5QjtFQUN6QixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQiw2QkFBNkI7QUFDL0I7O0FBRUE7RUFDRSxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0UsZUFBZTtFQUNmLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxXQUFXO0FBQ2I7O0FBRUE7RUFDRTtJQUNFLFdBQVc7SUFDWCxZQUFZO0lBQ1osZ0JBQWdCO0VBQ2xCO0FBQ0Y7O0FBRUEsVUFBVTs7QUFDVjtFQUNFLFVBQVU7QUFDWjs7QUFFQSxVQUFVOztBQUNWO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBLFdBQVc7O0FBQ1g7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUEsb0JBQW9COztBQUNwQjtFQUNFLGdCQUFnQjtBQUNsQiIsImZpbGUiOiJzcmMvYXBwL2NoYXRib3gvY2hhdGJveC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW1nIHtcclxuICBoZWlnaHQ6IDI1cHg7XHJcbiAgd2lkdGg6IDI1cHg7XHJcbiAgbWFyZ2luLXRvcDogNHB4O1xyXG4gIGNvbG9yOiAjZmYwMDAwO1xyXG59XHJcblxyXG4uaW52aXNpYmxlQnRuIHtcclxuICBib3JkZXI6IGluaXRpYWw7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogaW5pdGlhbDtcclxuICBvdXRsaW5lOiBub25lO1xyXG59XHJcblxyXG4uY2hhdEJveCB7XHJcbiAgd2lkdGg6IDkwdnc7XHJcbiAgaGVpZ2h0OiA1MHZoO1xyXG4gIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5kcm9wZG93bi1tZW51IHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmRyb3Bkb3duLWl0ZW0ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuLmJ0bi1kcm9wZG93biB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5mYS1mdyB7XHJcbiAgZm9udC1zaXplOiAxNXB4O1xyXG4gIG1hcmdpbi1yaWdodDogMC41cmVtO1xyXG59XHJcblxyXG4uZW1vamktd3JhcHBlciB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLmVtb2ppLXdyYXBwZXIgZW1vamktbWFydCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHJpZ2h0OiAzOHB4O1xyXG4gIGJvdHRvbTogMHB4O1xyXG59XHJcblxyXG5AbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHtcclxuICAuY2hhdEJveCB7XHJcbiAgICB3aWR0aDogMjN2dztcclxuICAgIGhlaWdodDogNjd2aDtcclxuICAgIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgfVxyXG59XHJcblxyXG4vKiB3aWR0aCAqL1xyXG46Oi13ZWJraXQtc2Nyb2xsYmFyIHtcclxuICB3aWR0aDogNXB4O1xyXG59XHJcblxyXG4vKiBUcmFjayAqL1xyXG46Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcclxuICBiYWNrZ3JvdW5kOiAjZjFmMWYxO1xyXG59XHJcblxyXG4vKiBIYW5kbGUgKi9cclxuOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XHJcbiAgYmFja2dyb3VuZDogIzk5OTtcclxufVxyXG5cclxuLyogSGFuZGxlIG9uIGhvdmVyICovXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6ICM3Nzc7XHJcbn1cclxuIl19 */\"","import {\r\n  Component,\r\n  OnInit,\r\n  NgZone,\r\n  ViewChild,\r\n  ElementRef,\r\n} from '@angular/core';\r\nimport { PeerService } from '../services/peer.service';\r\nimport { FormBuilder, FormControl, FormGroup, NgForm } from '@angular/forms';\r\nimport { AnnounceType } from '../shared/AnnounceType';\r\nimport { PeerUtils, Utils } from '../shared/Utils';\r\nimport { NameColor } from '../shared/NameColor';\r\nimport { Message } from '../shared/Message';\r\nimport { AlertType } from '../shared/AlertType';\r\n\r\n@Component({\r\n  selector: 'app-chatbox',\r\n  templateUrl: './chatbox.component.html',\r\n  styleUrls: ['./chatbox.component.css'],\r\n})\r\nexport class ChatboxComponent implements OnInit {\r\n  messageForm: FormGroup;\r\n  messageToSend: FormControl;\r\n  messages: Message[] = [];\r\n  namesColors: NameColor[] = [];\r\n  showEmojiPicker: boolean = false;\r\n  myUsername: string = '';\r\n  private readonly MAX_USERNAME_LEN = 20;\r\n  @ViewChild('messagebox', { static: false }) messagebox?: ElementRef<\r\n    HTMLElement\r\n  >;\r\n\r\n  constructor(\r\n    private peerService: PeerService,\r\n    private ngZone: NgZone,\r\n    private formBuilder: FormBuilder\r\n  ) {  }\r\n\r\n  ngOnInit() {\r\n    this.subscribeToPeerServerEvents();\r\n    this.messageToSend = new FormControl('');\r\n    this.messageForm = this.formBuilder.group({\r\n      messageToSend: this.messageToSend,\r\n    });\r\n  }\r\n\r\n  toggleEmojiPicker() {\r\n    this.showEmojiPicker = !this.showEmojiPicker;\r\n  }\r\n\r\n  addEmoji(event: any) {\r\n    this.messageToSend.patchValue(\r\n      this.messageToSend.value + event.emoji.native\r\n    );\r\n  }\r\n\r\n  editName() {\r\n    if (this.myUsername === '') {\r\n      Utils.alert('Blank name is not allowed!', AlertType.Error);\r\n      return;\r\n    }\r\n    else if (this.myUsername.length > this.MAX_USERNAME_LEN) {\r\n      Utils.alert('Username\\'s length must be smaller than ' + this.MAX_USERNAME_LEN + '!', AlertType.Error);\r\n      return;\r\n    }\r\n\r\n\r\n    const newName = this.myUsername;\r\n    this.peerService.changeMyName(newName);\r\n    this.namesColors = this.peerService.getNameColorList();\r\n    this.peerService.broadcastChangeName(newName);\r\n    Utils.alert('Your name has been changed to ' + newName, AlertType.Success);\r\n  }\r\n\r\n  subscribeToPeerServerEvents() {\r\n    PeerUtils.announce.subscribe((message: AnnounceType) => {\r\n      this.ngZone.run(() => {\r\n        switch (message) {\r\n          case AnnounceType.UpdateChatMessages:\r\n            this.messages = this.peerService.getAllMessages();\r\n            break;\r\n          case AnnounceType.NewPeerJoining:\r\n            this.myUsername = this.peerService.getMyName();\r\n          case AnnounceType.ChangePeerName:\r\n          case AnnounceType.PeerLeft:\r\n            this.namesColors = this.peerService.getNameColorList();\r\n            break;\r\n          default:\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  sendMessage(form: NgForm) {\r\n    this.peerService.sendMessage(this.messageToSend.value);\r\n    this.messages = this.peerService.getAllMessages();\r\n    this.messageForm.setValue({ messageToSend: '' });\r\n    this.showEmojiPicker = false;\r\n  }\r\n}\r\n","export default \".form-control {\\r\\n  width: initial;\\r\\n}\\r\\n\\r\\n.solution-code-editor {\\r\\n  height: 75vh;\\r\\n}\\r\\n\\r\\n#spinner-container {\\r\\n  margin-left: 50px;\\r\\n}\\r\\n\\r\\n@media (max-width: 768px) {\\r\\n  .form-row {\\r\\n    justify-content: center;\\r\\n  }\\r\\n\\r\\n  .btn-container {\\r\\n    justify-content: center;\\r\\n  }\\r\\n\\r\\n  #loading-img {\\r\\n      display: none;\\r\\n  }\\r\\n\\r\\n  #spinner-container {\\r\\n      margin-left: 0px;\\r\\n  }\\r\\n\\r\\n  .alert {\\r\\n      font-size: 13px;\\r\\n  }\\r\\n}\\r\\n\\r\\n.spinner-grow {\\r\\n  width: 4rem;\\r\\n  height: 4rem;\\r\\n}\\r\\n\\r\\n#mainContainer {\\r\\n  z-index: 0;\\r\\n}\\r\\n\\r\\n#aux-editor {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#loading-img {\\r\\n  z-index: 2;\\r\\n  height: 90%;\\r\\n}\\r\\n\\r\\n#waiting-screen {\\r\\n  z-index: 1;\\r\\n  position: absolute;\\r\\n  width: 100%;\\r\\n  height: 90%;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29kZS1lZGl0b3IvY29kZS1lZGl0b3IuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRTtJQUNFLHVCQUF1QjtFQUN6Qjs7RUFFQTtJQUNFLHVCQUF1QjtFQUN6Qjs7RUFFQTtNQUNJLGFBQWE7RUFDakI7O0VBRUE7TUFDSSxnQkFBZ0I7RUFDcEI7O0VBRUE7TUFDSSxlQUFlO0VBQ25CO0FBQ0Y7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFVBQVU7RUFDVixrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFdBQVc7QUFDYiIsImZpbGUiOiJzcmMvYXBwL2NvZGUtZWRpdG9yL2NvZGUtZWRpdG9yLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZm9ybS1jb250cm9sIHtcclxuICB3aWR0aDogaW5pdGlhbDtcclxufVxyXG5cclxuLnNvbHV0aW9uLWNvZGUtZWRpdG9yIHtcclxuICBoZWlnaHQ6IDc1dmg7XHJcbn1cclxuXHJcbiNzcGlubmVyLWNvbnRhaW5lciB7XHJcbiAgbWFyZ2luLWxlZnQ6IDUwcHg7XHJcbn1cclxuXHJcbkBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xyXG4gIC5mb3JtLXJvdyB7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICB9XHJcblxyXG4gIC5idG4tY29udGFpbmVyIHtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIH1cclxuXHJcbiAgI2xvYWRpbmctaW1nIHtcclxuICAgICAgZGlzcGxheTogbm9uZTtcclxuICB9XHJcblxyXG4gICNzcGlubmVyLWNvbnRhaW5lciB7XHJcbiAgICAgIG1hcmdpbi1sZWZ0OiAwcHg7XHJcbiAgfVxyXG5cclxuICAuYWxlcnQge1xyXG4gICAgICBmb250LXNpemU6IDEzcHg7XHJcbiAgfVxyXG59XHJcblxyXG4uc3Bpbm5lci1ncm93IHtcclxuICB3aWR0aDogNHJlbTtcclxuICBoZWlnaHQ6IDRyZW07XHJcbn1cclxuXHJcbiNtYWluQ29udGFpbmVyIHtcclxuICB6LWluZGV4OiAwO1xyXG59XHJcblxyXG4jYXV4LWVkaXRvciB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuI2xvYWRpbmctaW1nIHtcclxuICB6LWluZGV4OiAyO1xyXG4gIGhlaWdodDogOTAlO1xyXG59XHJcblxyXG4jd2FpdGluZy1zY3JlZW4ge1xyXG4gIHotaW5kZXg6IDE7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogOTAlO1xyXG59XHJcblxyXG5cclxuXHJcbiJdfQ== */\"","import { Component, OnInit, Input, NgZone } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { EditorService } from '../services/editor.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { PeerService } from '../services/peer.service';\r\nimport { Location } from '@angular/common';\r\nimport { Languages } from '../shared/Languages';\r\nimport { AnnounceType } from '../shared/AnnounceType';\r\nimport { CursorService } from '../services/cursor.service';\r\nimport { PeerUtils, Utils } from '../shared/Utils';\r\nimport { AlertType } from '../shared/AlertType';\r\nimport { CursorChangeInfo } from '../shared/CursorChangeInfo';\r\nimport { SelectionChangeInfo } from '../shared/SelectionChangeInfo';\r\n\r\n@Component({\r\n  selector: 'app-code-editor',\r\n  templateUrl: './code-editor.component.html',\r\n  styleUrls: ['./code-editor.component.css'],\r\n})\r\nexport class CodeEditorComponent implements OnInit {\r\n  showNameTags: boolean = true;\r\n  showErrorBanner: boolean = false;\r\n  ready = false;\r\n  roomName: string;\r\n  editor: any;\r\n  auxEditor: any;\r\n  editorTextModel: any;\r\n  mainEditorReady = false;\r\n  auxEditorReady = false;\r\n  peerServiceHasConnectedToPeerServer = false;\r\n  auxEditorTextModel: any;\r\n  @Input() languages = Languages;\r\n  themes = [\r\n    { name: 'Visual Studio Dark', value: 'vs-dark' },\r\n    { name: 'Visual Studio Light', value: 'vs' },\r\n    { name: 'High Contrast Dark', value: 'hc-black' },\r\n  ];\r\n  selectedLang: string;\r\n  selectedTheme: string;\r\n  editorForm = new FormGroup({\r\n    language: new FormControl(\r\n      EditorService.currentLanguage,\r\n      Validators.compose([Validators.required])\r\n    ),\r\n    theme: new FormControl(\r\n      'vs-dark',\r\n      Validators.compose([Validators.required])\r\n    ),\r\n  });\r\n\r\n  constructor(\r\n    private peerService: PeerService,\r\n    private cursorService: CursorService,\r\n    public editorService: EditorService,\r\n    private ngZone: NgZone,\r\n    private actRoute: ActivatedRoute,\r\n    private location: Location\r\n  ) {\r\n    this.subscribeToPeerServiceEvents();\r\n    this.getRoomName();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.selectedLang = EditorService.currentLanguage;\r\n    this.selectedTheme = 'vs-dark';\r\n  }\r\n\r\n  editorOptions = {\r\n    theme: 'vs-dark',\r\n    language: EditorService.currentLanguage,\r\n    wordWrap: 'on',\r\n    trimAutoWhitespace: false,\r\n  };\r\n\r\n  onLanguageChange(res: string) {\r\n    this.selectedLang = res.slice(res.indexOf(':') + 2);\r\n    monaco.editor.setModelLanguage(this.editorTextModel, this.selectedLang);\r\n    EditorService.currentLanguage = this.selectedLang;\r\n    this.peerService.broadcastChangeLanguage();\r\n    Utils.alert(\r\n      'Language has been changed to ' +\r\n        Utils.getLanguageName(EditorService.currentLanguage),\r\n      AlertType.Message\r\n    );\r\n  }\r\n\r\n  onThemeChange(res: string) {\r\n    this.selectedTheme = res.slice(res.indexOf(':') + 2);\r\n    monaco.editor.setTheme(this.selectedTheme);\r\n  }\r\n\r\n  toggleNameTag() {\r\n    if (this.showNameTags) this.cursorService.showAllNameTags();\r\n    else this.cursorService.hideAllNameTags();\r\n  }\r\n\r\n  onInitEditorHandler(event: any) {\r\n    this.editor = event;\r\n    this.editorTextModel = this.editor.getModel();\r\n    this.editorTextModel.setEOL(0); // Set EOL from '\\r\\n' -> '\\n'\r\n\r\n    // Disable Ctrl-D (tricky to sync cursor + select)\r\n    this.editor.addCommand(\r\n      monaco.KeyMod.CtrlCmd | monaco.KeyCode.KEY_D,\r\n      function () {}\r\n    );\r\n\r\n    // Add \"padding\" to the top\r\n    let viewZoneId;\r\n    this.editor.changeViewZones((changeAccessor) => {\r\n      var domNode = document.createElement('div');\r\n      viewZoneId = changeAccessor.addZone({\r\n        afterLineNumber: 0,\r\n        heightInLines: 1.5,\r\n        domNode: domNode,\r\n      });\r\n    });\r\n\r\n    // Listen to any content changes (such as insert, remove, undo,...)\r\n    this.editor.onDidChangeModelContent((e: any) =>\r\n      this.onDidChangeModelContentHandler(e)\r\n    );\r\n\r\n    // Listen to cursor position change\r\n    this.editor.onDidChangeCursorPosition((e: any) =>\r\n      this.onDidChangeCursorPositionHandler(e)\r\n    );\r\n\r\n    // Listen to cursor selection change\r\n    this.editor.onDidChangeCursorSelection((e: any) =>\r\n      this.onDidChangeCursorSelectionHandler(e)\r\n    );\r\n\r\n    // Only connect to PeerServer when both Monaco Editors is ready\r\n    this.mainEditorReady = true;\r\n    if (this.auxEditorReady && !this.peerServiceHasConnectedToPeerServer) {\r\n      this.peerService.connectToPeerServerAndInit();\r\n      this.peerServiceHasConnectedToPeerServer = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Aux editor will always be '1 step behind' main editor. This is useful because\r\n   * to correctly sync undo / redo request and cursor / select change request,\r\n   * we need 'currentState' and 'previousState' of our editor\r\n   */\r\n  onInitAuxEditorHandler(event: any) {\r\n    this.auxEditor = event;\r\n    this.auxEditorTextModel = this.auxEditor.getModel();\r\n    this.auxEditorTextModel.setEOL(0); // Set EOL from '\\r\\n' -> '\\n'\r\n\r\n    // Only connect to PeerServer when both Monaco Editors is ready\r\n    this.auxEditorReady = true;\r\n    if (this.mainEditorReady && !this.peerServiceHasConnectedToPeerServer) {\r\n      this.peerService.connectToPeerServerAndInit();\r\n      this.peerServiceHasConnectedToPeerServer = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Listen to any content changes (such as insert, remove, undo,...)\r\n   */\r\n  onDidChangeModelContentHandler(event: any): void {\r\n    // remoteOpLeft is used because remoteInsert / remoteRemove will also trigger this event\r\n    if (EditorService.remoteOpLeft > 0) {\r\n      EditorService.remoteOpLeft--;\r\n      return;\r\n    }\r\n    const changes = event.changes;\r\n\r\n    for (let i = 0; i < changes.length; i++) {\r\n      const range = changes[i].range;\r\n\r\n      // Calculate new pos for nameTag when local remove. Notice we use auxEditor\r\n      let index = this.editorService.posToIndex(\r\n        this.auxEditorTextModel,\r\n        range.startLineNumber,\r\n        range.startColumn\r\n      );\r\n      this.cursorService.recalculateAllNameTagAndCursorIndicesAfterRemove(\r\n        index,\r\n        changes[i].rangeLength\r\n      );\r\n\r\n      // Handle local remove (if any)\r\n      this.editorService.handleLocalRemove(\r\n        this.auxEditor,\r\n        range.startLineNumber,\r\n        range.startColumn,\r\n        range.endLineNumber,\r\n        range.endColumn,\r\n        changes[i].rangeLength\r\n      );\r\n\r\n      // Calculate new pos for nameTag when local insert. Notice we use auxEditor\r\n      index = this.editorService.posToIndex(\r\n        this.auxEditorTextModel,\r\n        range.startLineNumber,\r\n        range.startColumn\r\n      );\r\n      this.cursorService.recalculateAllNameTagAndCursorIndicesAfterInsert(\r\n        index,\r\n        changes[i].text.length,\r\n        this.peerService.getMyPeerId()\r\n      );\r\n\r\n      // Handle local insert (if any)\r\n      this.editorService.handleLocalInsert(\r\n        this.auxEditor,\r\n        changes[i].text,\r\n        range.startLineNumber,\r\n        range.startColumn\r\n      );\r\n    }\r\n\r\n    // Redraw name tag\r\n    this.cursorService.redrawPeersNameTagsAndCursors(this.editor);\r\n  }\r\n\r\n  /**\r\n   * Listen to cursor position change event\r\n   */\r\n  onDidChangeCursorPositionHandler(event: any): void {\r\n    this.cursorService.setMyLastCursorEvent(event);\r\n\r\n    // Draw our name tag wherever our cursor goes\r\n    this.cursorService.drawNameTag(\r\n      this.editor,\r\n      this.peerService.getMyPeerId(),\r\n      event.position.lineNumber,\r\n      event.position.column,\r\n      true\r\n    );\r\n\r\n    this.peerService.broadcastChangeCursorPos(event);\r\n  }\r\n\r\n  /**\r\n   * Listen to cursor selection change event\r\n   */\r\n  onDidChangeCursorSelectionHandler(event: any): void {\r\n    this.cursorService.setMyLastSelectEvent(event);\r\n    this.peerService.broadcastChangeSelectionPos(event);\r\n  }\r\n\r\n  subscribeToPeerServiceEvents(): void {\r\n    PeerUtils.announce.subscribe((message: any) => {\r\n      this.ngZone.run(() => {\r\n        switch (message) {\r\n          case AnnounceType.RemoteInsert:\r\n          case AnnounceType.RemoteAllMessages:\r\n            this.editorService.handleRemoteInsert(\r\n              this.editor,\r\n              this.auxEditor,\r\n              this.peerService.getReceivedRemoteCrdts(),\r\n              this.peerService.getPeerIdWhoSentCrdts()\r\n            );\r\n            break;\r\n          case AnnounceType.RemoteRemove:\r\n            this.editorService.handleRemoteRemove(\r\n              this.editor,\r\n              this.auxEditor,\r\n              this.peerService.getReceivedRemoteCrdts()\r\n            );\r\n            break;\r\n          case AnnounceType.RoomName:\r\n            this.roomName = this.peerService.getRoomName();\r\n            this.location.replaceState('/editor/' + this.roomName);\r\n            break;\r\n          case AnnounceType.ChangeLanguage:\r\n            this.selectedLang = EditorService.currentLanguage;\r\n            monaco.editor.setModelLanguage(\r\n              this.editorTextModel,\r\n              this.selectedLang\r\n            );\r\n            this.editorForm.patchValue({ language: this.selectedLang });\r\n            break;\r\n          case AnnounceType.ReadyToDisplayMonaco:\r\n            this.ready = true;\r\n            break;\r\n\r\n          /**\r\n           * Sync cursor, name tag and selection.\r\n           *\r\n           * To sync the 3 things above, we have 3 options. The first 2 don't work, the last one works quite well:\r\n           *\r\n           * 1/ Send all change events and update when receive those events: NOT GOOD because if 2 peers are far apart,\r\n           * there will be a noticeable delay\r\n           * 2/ Update based on our own calculation after each insertion, deletion and with the help of Monaco decoration: NOT GOOD\r\n           * because if the other peer click somewhere, how can we calculate that?\r\n           * => Maybe we can combine the best of both worlds? YES we can, with some 'tricks'.\r\n           * - We CANNOT send all change events, execute them all and also update based on our calculation. The cursor will go crazy\r\n           * - Adding some logic such as only send 'important' events such as mouse click is NOT enough (There are edge cases)\r\n           *\r\n           * Here's what we CAN do (and this is what we're doing right now):\r\n           * 3/ - Send ALL events to make sure the cursor, nametag and selection will EVENTUALLY be correct (after 2-3 seconds idle)\r\n           * - Then during those 2-3 seconds when cursors,... are possibly not in sync, use our calculation + monaco to make it\r\n           * correct AS MUCH AS POSSIBLE\r\n           * - Also we will NOT use MOST change events received. We only use the 'most recent' one if\r\n           * it has been 500 milliseconds and the cursor doesn't move\r\n           * - Finally, for important events such as mouse click, user explicitly move cursor by keyboard arrow and\r\n           * tricky-to-calculate events such as undo, redo, some Monaco shortcuts, we execute as soon as we receive them\r\n           */\r\n          case AnnounceType.CursorChange:\r\n            const cursorChangeInfo = this.peerService.getCursorChangeInfo();\r\n            this.cursorService.setPeerMostRecentCursorChange(\r\n              cursorChangeInfo.peerId,\r\n              cursorChangeInfo\r\n            );\r\n\r\n            if (\r\n              EditorService.isCursorOrSelectEventImportant(cursorChangeInfo)\r\n            ) {\r\n              // Apply change right now\r\n              this.updateCursorAndNameTag(cursorChangeInfo);\r\n            } else {\r\n              // Decide after ... milliseconds\r\n              this.useEventToUpdateCursorAndNameTagIfNoMoreChangesAfter(\r\n                500,\r\n                cursorChangeInfo,\r\n                cursorChangeInfo.peerId\r\n              );\r\n            }\r\n            break;\r\n          case AnnounceType.SelectionChange:\r\n            const selectionChangeInfo = this.peerService.getSelectionChangeInfo();\r\n            this.cursorService.setPeerMostRecentSelectEvent(\r\n              selectionChangeInfo.peerId,\r\n              selectionChangeInfo\r\n            );\r\n\r\n            if (\r\n              EditorService.isCursorOrSelectEventImportant(selectionChangeInfo)\r\n            ) {\r\n              // Apply change right now\r\n              this.updateSelection(selectionChangeInfo);\r\n            } else {\r\n              // Decide after ... milliseconds\r\n              this.useEventToUpdateSelectIfNoMoreChangesAfter(\r\n                500,\r\n                selectionChangeInfo,\r\n                selectionChangeInfo.peerId\r\n              );\r\n            }\r\n            break;\r\n\r\n          case AnnounceType.PeerLeft:\r\n            const peerIdLeft = this.peerService.getPeerIdJustLeft();\r\n            this.cursorService.removePeer(this.editor, peerIdLeft);\r\n            break;\r\n          case AnnounceType.ChangePeerName:\r\n            this.cursorService.redrawPeersNameTagsAndCursors(this.editor);\r\n            break;\r\n          case AnnounceType.ChangeMyName:\r\n            this.cursorService.redrawMyNameTag(\r\n              this.editor,\r\n              this.peerService.getMyPeerId()\r\n            );\r\n            break;\r\n          case AnnounceType.UnhandledError:\r\n            this.showErrorBanner = true;\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private useEventToUpdateCursorAndNameTagIfNoMoreChangesAfter(\r\n    milliseconds: number,\r\n    cursorChangeEvent: CursorChangeInfo,\r\n    peerId: string\r\n  ) {\r\n    const that = this;\r\n    setTimeout(() => {\r\n      const isEventMostRecent =\r\n        that.cursorService.getPeerMostRecentCursorEvent(peerId) ===\r\n        cursorChangeEvent;\r\n\r\n      if (isEventMostRecent) {\r\n        that.updateCursorAndNameTag(cursorChangeEvent);\r\n      }\r\n    }, milliseconds);\r\n  }\r\n\r\n  private useEventToUpdateSelectIfNoMoreChangesAfter(\r\n    milliseconds: number,\r\n    selectChangeEvent: SelectionChangeInfo,\r\n    peerId: string\r\n  ) {\r\n    const that = this;\r\n    setTimeout(() => {\r\n      const isEventMostRecent =\r\n        that.cursorService.getPeerMostRecentSelectEvent(peerId) ===\r\n        selectChangeEvent;\r\n\r\n      if (isEventMostRecent) {\r\n        that.updateSelection(selectChangeEvent);\r\n      }\r\n    }, milliseconds);\r\n  }\r\n\r\n  private updateCursorAndNameTag(cursorChangeEvent: CursorChangeInfo) {\r\n    this.cursorService.drawCursor(\r\n      this.editor,\r\n      cursorChangeEvent.peerId,\r\n      cursorChangeEvent.line,\r\n      cursorChangeEvent.col\r\n    );\r\n\r\n    this.cursorService.drawNameTag(\r\n      this.editor,\r\n      cursorChangeEvent.peerId,\r\n      cursorChangeEvent.line,\r\n      cursorChangeEvent.col,\r\n      false\r\n    );\r\n  }\r\n\r\n  private updateSelection(selectionChangeEvent: SelectionChangeInfo) {\r\n    this.cursorService.drawSelection(\r\n      this.editor,\r\n      selectionChangeEvent.startLine,\r\n      selectionChangeEvent.startColumn,\r\n      selectionChangeEvent.endLine,\r\n      selectionChangeEvent.endColumn,\r\n      selectionChangeEvent.peerId\r\n    );\r\n  }\r\n\r\n  getRoomName(): void {\r\n    this.peerService.connectionEstablished.subscribe((successful: boolean) => {\r\n      if (successful) {\r\n        this.roomName = this.actRoute.snapshot.params['roomName'];\r\n        if (this.roomName === 'new') this.peerService.createNewRoom();\r\n        else this.peerService.joinExistingRoom(this.roomName);\r\n      }\r\n    });\r\n  }\r\n\r\n  copyLink(): void {\r\n    const selBox = document.createElement('textarea');\r\n    selBox.style.position = 'fixed';\r\n    selBox.style.left = '0';\r\n    selBox.style.top = '0';\r\n    selBox.style.opacity = '0';\r\n    selBox.value =\r\n      window.location.protocol +\r\n      '//' +\r\n      window.location.hostname +\r\n      ':4200/editor/' +\r\n      this.roomName;\r\n    document.body.appendChild(selBox);\r\n    selBox.focus();\r\n    selBox.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(selBox);\r\n    Utils.alert('Link copied to clipboard!', AlertType.Success);\r\n  }\r\n\r\n  downloadFile(): void {\r\n    const text = this.editorService.getEditorContent(this.editor);\r\n    const elem = document.createElement('a');\r\n    const fileName = 'codeSpot' + Utils.getLanguageExt(EditorService.currentLanguage);\r\n    elem.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\r\n    elem.setAttribute('download', fileName);\r\n    elem.style.display = 'none';\r\n    document.body.appendChild(elem);\r\n    elem.click();\r\n    document.body.removeChild(elem);\r\n  }\r\n\r\n  printBST() {\r\n    console.log(this.editorService.bst.inorderToString());\r\n  }\r\n}\r\n","export default \".container {\\r\\n  min-height: 84vh;\\r\\n}\\r\\n\\r\\n.img-circle {\\r\\n  width: 15rem;\\r\\n  margin: 0 auto;\\r\\n  margin-top: 1.5rem;\\r\\n  border-radius: 50%;\\r\\n}\\r\\n\\r\\n.icon {\\r\\n  color: #777777;\\r\\n}\\r\\n\\r\\n.socials {\\r\\n  margin-top: auto;\\r\\n}\\r\\n\\r\\n.card-deck {\\r\\n  flex: initial;\\r\\n}\\r\\n\\r\\n.card {\\r\\n  border-radius: 20px;\\r\\n}\\r\\n\\r\\n.contact-card {\\r\\n  margin: 11px 10px;\\r\\n  width: 20rem;\\r\\n  flex: initial;\\r\\n}\\r\\n\\r\\n@media only screen and (max-width: 600px) {\\r\\n  .card-deck {\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n  }\\r\\n\\r\\n  .contact-card {\\r\\n    margin: 30px auto;\\r\\n    width: 20rem;\\r\\n  }\\r\\n\\r\\n  .feedback-card {\\r\\n    margin: 30px auto;\\r\\n  }\\r\\n\\r\\n  form {\\r\\n    width: 18rem;\\r\\n  }\\r\\n\\r\\n  card {\\r\\n    width: 20rem;\\r\\n  }\\r\\n}\\r\\n\\r\\n.feedback-card {\\r\\n  margin: 11px 10px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29udGFjdC9jb250YWN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osY0FBYztFQUNkLGtCQUFrQjtFQUNsQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLFlBQVk7RUFDWixhQUFhO0FBQ2Y7O0FBRUE7RUFDRTtJQUNFLHNCQUFzQjtJQUN0QixtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxpQkFBaUI7SUFDakIsWUFBWTtFQUNkOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsWUFBWTtFQUNkOztFQUVBO0lBQ0UsWUFBWTtFQUNkO0FBQ0Y7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkIiLCJmaWxlIjoic3JjL2FwcC9jb250YWN0L2NvbnRhY3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXIge1xyXG4gIG1pbi1oZWlnaHQ6IDg0dmg7XHJcbn1cclxuXHJcbi5pbWctY2lyY2xlIHtcclxuICB3aWR0aDogMTVyZW07XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbiAgbWFyZ2luLXRvcDogMS41cmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxufVxyXG5cclxuLmljb24ge1xyXG4gIGNvbG9yOiAjNzc3Nzc3O1xyXG59XHJcblxyXG4uc29jaWFscyB7XHJcbiAgbWFyZ2luLXRvcDogYXV0bztcclxufVxyXG5cclxuLmNhcmQtZGVjayB7XHJcbiAgZmxleDogaW5pdGlhbDtcclxufVxyXG5cclxuLmNhcmQge1xyXG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XHJcbn1cclxuXHJcbi5jb250YWN0LWNhcmQge1xyXG4gIG1hcmdpbjogMTFweCAxMHB4O1xyXG4gIHdpZHRoOiAyMHJlbTtcclxuICBmbGV4OiBpbml0aWFsO1xyXG59XHJcblxyXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XHJcbiAgLmNhcmQtZGVjayB7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICB9XHJcblxyXG4gIC5jb250YWN0LWNhcmQge1xyXG4gICAgbWFyZ2luOiAzMHB4IGF1dG87XHJcbiAgICB3aWR0aDogMjByZW07XHJcbiAgfVxyXG5cclxuICAuZmVlZGJhY2stY2FyZCB7XHJcbiAgICBtYXJnaW46IDMwcHggYXV0bztcclxuICB9XHJcblxyXG4gIGZvcm0ge1xyXG4gICAgd2lkdGg6IDE4cmVtO1xyXG4gIH1cclxuXHJcbiAgY2FyZCB7XHJcbiAgICB3aWR0aDogMjByZW07XHJcbiAgfVxyXG59XHJcblxyXG4uZmVlZGJhY2stY2FyZCB7XHJcbiAgbWFyZ2luOiAxMXB4IDEwcHg7XHJcbn1cclxuIl19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { UtilsService } from '../services/utils.service';\r\n\r\n@Component({\r\n  selector: 'app-contact',\r\n  templateUrl: './contact.component.html',\r\n  styleUrls: ['./contact.component.css'],\r\n})\r\nexport class ContactComponent implements OnInit {\r\n  contactForm: FormGroup;\r\n  headerMessage: string;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private utilsService: UtilsService\r\n  ) {\r\n    this.contactForm = this.formBuilder.group({\r\n      name: '',\r\n      email: '',\r\n      subject: '',\r\n      message: '',\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.headerMessage = 'Talk to us!';\r\n  }\r\n\r\n  onSubmit(form) {\r\n    this.contactForm.reset();\r\n\r\n    if (form['message'] != '') {\r\n      this.utilsService.sendEmail(form);\r\n    }\r\n  }\r\n}\r\n","export default \".col-form-label {\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n@media (max-width: 768px) {\\r\\n  .form-group {\\r\\n    margin-bottom: 0px;\\r\\n  }\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZmVlZGJhY2svZmVlZGJhY2suY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFO0lBQ0Usa0JBQWtCO0VBQ3BCO0FBQ0YiLCJmaWxlIjoic3JjL2FwcC9mZWVkYmFjay9mZWVkYmFjay5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbC1mb3JtLWxhYmVsIHtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgLmZvcm0tZ3JvdXAge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMHB4O1xyXG4gIH1cclxufVxyXG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { UtilsService } from '../services/utils.service';\r\n\r\n@Component({\r\n  selector: 'app-feedback',\r\n  templateUrl: './feedback.component.html',\r\n  styleUrls: ['./feedback.component.css'],\r\n})\r\nexport class FeedbackComponent implements OnInit {\r\n  feedbackForm: FormGroup;\r\n\r\n  didWellMap = { 0: 'Look and feel', 1: 'Functionality', 2: 'Convenience' };\r\n\r\n  issuesMap = {\r\n    0: 'Nothing',\r\n    1: 'The app was confusing to use',\r\n    2: 'The app was missing features I needed',\r\n    3: 'I experienced bugs',\r\n    4: 'The app suddenly crashed',\r\n    5: 'Other',\r\n  };\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private utilService: UtilsService\r\n  ) {\r\n    this.feedbackForm = this.formBuilder.group({\r\n      satisfactionLevel: '100%',\r\n      collabLevel: '100%',\r\n      didWell: '0',\r\n      issue: 0,\r\n      issueDetails: '',\r\n      improvement: '',\r\n    });\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  onSubmit(form) {\r\n    this.feedbackForm.value['didWell'] = this.didWellMap[\r\n      this.feedbackForm.value['didWell']\r\n    ];\r\n    this.feedbackForm.value['issue'] = this.issuesMap[\r\n      this.feedbackForm.value['issue']\r\n    ];\r\n\r\n    this.utilService.sendFeedbackForm(form);\r\n  }\r\n}\r\n","export default \".footer {\\r\\n  color: white;\\r\\n  background-color: #222b37;\\r\\n}\\r\\n\\r\\na {\\r\\n  color: white;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZm9vdGVyL2Zvb3Rlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLFlBQVk7QUFDZCIsImZpbGUiOiJzcmMvYXBwL2Zvb3Rlci9mb290ZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mb290ZXIge1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjIyYjM3O1xyXG59XHJcblxyXG5hIHtcclxuICBjb2xvcjogd2hpdGU7XHJcbn1cclxuIl19 */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.css']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","export default \"html {\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n@media (min-width: 768px) {\\r\\n  html {\\r\\n    font-size: 16px;\\r\\n  }\\r\\n}\\r\\n\\r\\n.nav-link {\\r\\n  font-size: 18px;\\r\\n}\\r\\n\\r\\n.nav-item {\\r\\n  padding: 2px;\\r\\n  margin-left: 7px;\\r\\n}\\r\\n\\r\\n.clickable {\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.btn-primary {\\r\\n  margin-left: 5px;\\r\\n  font-size: 18px;\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n@media (max-width: 768px) {\\r\\n  .container-fluid {\\r\\n    margin-left: 0px !important;\\r\\n    margin-right: 0px !important;\\r\\n  }\\r\\n}\\r\\n\\r\\n#brandLogo {\\r\\n    width: 30px;\\r\\n}\\r\\n\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaGVhZGVyL2hlYWRlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFO0lBQ0UsZUFBZTtFQUNqQjtBQUNGOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRTtJQUNFLDJCQUEyQjtJQUMzQiw0QkFBNEI7RUFDOUI7QUFDRjs7QUFFQTtJQUNJLFdBQVc7QUFDZiIsImZpbGUiOiJzcmMvYXBwL2hlYWRlci9oZWFkZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbImh0bWwge1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxufVxyXG5cclxuQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XHJcbiAgaHRtbCB7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgfVxyXG59XHJcblxyXG4ubmF2LWxpbmsge1xyXG4gIGZvbnQtc2l6ZTogMThweDtcclxufVxyXG5cclxuLm5hdi1pdGVtIHtcclxuICBwYWRkaW5nOiAycHg7XHJcbiAgbWFyZ2luLWxlZnQ6IDdweDtcclxufVxyXG5cclxuLmNsaWNrYWJsZSB7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uYnRuLXByaW1hcnkge1xyXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgZm9udC1zaXplOiAxOHB4O1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAuY29udGFpbmVyLWZsdWlkIHtcclxuICAgIG1hcmdpbi1sZWZ0OiAwcHggIWltcG9ydGFudDtcclxuICAgIG1hcmdpbi1yaWdodDogMHB4ICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG59XHJcblxyXG4jYnJhbmRMb2dvIHtcclxuICAgIHdpZHRoOiAzMHB4O1xyXG59XHJcblxyXG4iXX0= */\"","import { Component, OnInit, NgZone } from '@angular/core';\r\nimport { Utils } from '../shared/Utils';\r\nimport { AnnounceType } from '../shared/AnnounceType';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.css'],\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n  isExpanded = false;\r\n  showCreateNewRoomBtn = true;\r\n\r\n  constructor(private ngZone: NgZone, private router: Router) {\r\n    this.subscribeToUtilsEvents();\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  collapse() {\r\n    this.isExpanded = false;\r\n  }\r\n\r\n  goHome() {\r\n    this.isExpanded = false;\r\n    window.location.replace('/');\r\n    this.showCreateNewRoomBtn = true;\r\n  }\r\n\r\n  onBtnFeedbackClick() {\r\n    this.isExpanded = false;\r\n  }\r\n\r\n  onBtnContactClick() {\r\n    this.isExpanded = false;\r\n    window.location.replace('/Contact');\r\n    this.showCreateNewRoomBtn = true;\r\n  }\r\n\r\n  onBtnCreateNewRoomClick() {\r\n    this.isExpanded = false;\r\n    this.router.navigate(['editor']);\r\n    this.showCreateNewRoomBtn = false;\r\n  }\r\n\r\n  subscribeToUtilsEvents() {\r\n    Utils.broadcast.subscribe((message: AnnounceType) => {\r\n      this.ngZone.run(() => {\r\n        switch (message) {\r\n          case AnnounceType.LeftHomePage:\r\n            this.showCreateNewRoomBtn = false;\r\n            break;\r\n          default:\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n","export default \".cover {\\r\\n  height: 95vh;\\r\\n  align-items: center;\\r\\n  margin-bottom: 120px;\\r\\n  background-color: #e9ecef;\\r\\n}\\r\\n\\r\\n.home-img {\\r\\n  margin-right: 50px;\\r\\n  width: 50%;\\r\\n}\\r\\n\\r\\n.container {\\r\\n  top: 260px;\\r\\n  margin: 0 50px;\\r\\n}\\r\\n\\r\\n.cover .btn-lg {\\r\\n  padding: 0.75rem 1.25rem;\\r\\n  font-weight: 700;\\r\\n}\\r\\n\\r\\n.features {\\r\\n  margin: 0 100px;\\r\\n}\\r\\n\\r\\n.feature {\\r\\n  margin-bottom: 130px;\\r\\n}\\r\\n\\r\\nh1 {\\r\\n  color: #151b26;\\r\\n}\\r\\n\\r\\n.feature-img {\\r\\n  width: 600px;\\r\\n}\\r\\n\\r\\nh3,\\r\\n.feature-text {\\r\\n  color: #646f79;\\r\\n}\\r\\n\\r\\n.feature-text-left {\\r\\n  margin-left: 100px;\\r\\n}\\r\\n\\r\\n.feature-text-right {\\r\\n  padding-right: 100px;\\r\\n}\\r\\n\\r\\np {\\r\\n    font-size: 21px;\\r\\n}\\r\\n\\r\\n@media (max-width: 768px) {\\r\\n  .cover {\\r\\n    flex-direction: column;\\r\\n    margin-bottom: 100px;\\r\\n  }\\r\\n\\r\\n  .container {\\r\\n    position: initial;\\r\\n  }\\r\\n\\r\\n  .home-img {\\r\\n    height: auto;\\r\\n    width: 100%;\\r\\n    margin-left: 50px;\\r\\n    margin-bottom: 40px;\\r\\n  }\\r\\n\\r\\n  .features {\\r\\n    margin: 0px 0px;\\r\\n  }\\r\\n\\r\\n  .feature {\\r\\n    margin-bottom: 20px;\\r\\n  }\\r\\n\\r\\n  .feature-img {\\r\\n    order: 0;\\r\\n    height: auto;\\r\\n    width: 80%;\\r\\n    margin: 0 auto;\\r\\n  }\\r\\n\\r\\n  .feature-name {\\r\\n    font-size: 2rem;\\r\\n  }\\r\\n\\r\\n  .feature-text {\\r\\n    font-size: 1rem;\\r\\n  }\\r\\n\\r\\n  .feature-text-left,\\r\\n  .feature-text-right {\\r\\n    order: 1;\\r\\n    margin: 40px 0px;\\r\\n    padding: 0 40px;\\r\\n  }\\r\\n\\r\\n  p {\\r\\n      font-size: 10px;\\r\\n  }\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFZO0VBQ1osbUJBQW1CO0VBQ25CLG9CQUFvQjtFQUNwQix5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtFQUNWLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSx3QkFBd0I7RUFDeEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7O0VBRUUsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtJQUNJLGVBQWU7QUFDbkI7O0FBRUE7RUFDRTtJQUNFLHNCQUFzQjtJQUN0QixvQkFBb0I7RUFDdEI7O0VBRUE7SUFDRSxpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxZQUFZO0lBQ1osV0FBVztJQUNYLGlCQUFpQjtJQUNqQixtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsUUFBUTtJQUNSLFlBQVk7SUFDWixVQUFVO0lBQ1YsY0FBYztFQUNoQjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxlQUFlO0VBQ2pCOztFQUVBOztJQUVFLFFBQVE7SUFDUixnQkFBZ0I7SUFDaEIsZUFBZTtFQUNqQjs7RUFFQTtNQUNJLGVBQWU7RUFDbkI7QUFDRiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvdmVyIHtcclxuICBoZWlnaHQ6IDk1dmg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBtYXJnaW4tYm90dG9tOiAxMjBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTllY2VmO1xyXG59XHJcblxyXG4uaG9tZS1pbWcge1xyXG4gIG1hcmdpbi1yaWdodDogNTBweDtcclxuICB3aWR0aDogNTAlO1xyXG59XHJcblxyXG4uY29udGFpbmVyIHtcclxuICB0b3A6IDI2MHB4O1xyXG4gIG1hcmdpbjogMCA1MHB4O1xyXG59XHJcblxyXG4uY292ZXIgLmJ0bi1sZyB7XHJcbiAgcGFkZGluZzogMC43NXJlbSAxLjI1cmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbn1cclxuXHJcbi5mZWF0dXJlcyB7XHJcbiAgbWFyZ2luOiAwIDEwMHB4O1xyXG59XHJcblxyXG4uZmVhdHVyZSB7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTMwcHg7XHJcbn1cclxuXHJcbmgxIHtcclxuICBjb2xvcjogIzE1MWIyNjtcclxufVxyXG5cclxuLmZlYXR1cmUtaW1nIHtcclxuICB3aWR0aDogNjAwcHg7XHJcbn1cclxuXHJcbmgzLFxyXG4uZmVhdHVyZS10ZXh0IHtcclxuICBjb2xvcjogIzY0NmY3OTtcclxufVxyXG5cclxuLmZlYXR1cmUtdGV4dC1sZWZ0IHtcclxuICBtYXJnaW4tbGVmdDogMTAwcHg7XHJcbn1cclxuXHJcbi5mZWF0dXJlLXRleHQtcmlnaHQge1xyXG4gIHBhZGRpbmctcmlnaHQ6IDEwMHB4O1xyXG59XHJcblxyXG5wIHtcclxuICAgIGZvbnQtc2l6ZTogMjFweDtcclxufVxyXG5cclxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgLmNvdmVyIHtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMDBweDtcclxuICB9XHJcblxyXG4gIC5jb250YWluZXIge1xyXG4gICAgcG9zaXRpb246IGluaXRpYWw7XHJcbiAgfVxyXG5cclxuICAuaG9tZS1pbWcge1xyXG4gICAgaGVpZ2h0OiBhdXRvO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtYXJnaW4tbGVmdDogNTBweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDQwcHg7XHJcbiAgfVxyXG5cclxuICAuZmVhdHVyZXMge1xyXG4gICAgbWFyZ2luOiAwcHggMHB4O1xyXG4gIH1cclxuXHJcbiAgLmZlYXR1cmUge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICB9XHJcblxyXG4gIC5mZWF0dXJlLWltZyB7XHJcbiAgICBvcmRlcjogMDtcclxuICAgIGhlaWdodDogYXV0bztcclxuICAgIHdpZHRoOiA4MCU7XHJcbiAgICBtYXJnaW46IDAgYXV0bztcclxuICB9XHJcblxyXG4gIC5mZWF0dXJlLW5hbWUge1xyXG4gICAgZm9udC1zaXplOiAycmVtO1xyXG4gIH1cclxuXHJcbiAgLmZlYXR1cmUtdGV4dCB7XHJcbiAgICBmb250LXNpemU6IDFyZW07XHJcbiAgfVxyXG5cclxuICAuZmVhdHVyZS10ZXh0LWxlZnQsXHJcbiAgLmZlYXR1cmUtdGV4dC1yaWdodCB7XHJcbiAgICBvcmRlcjogMTtcclxuICAgIG1hcmdpbjogNDBweCAwcHg7XHJcbiAgICBwYWRkaW5nOiAwIDQwcHg7XHJcbiAgfVxyXG5cclxuICBwIHtcclxuICAgICAgZm9udC1zaXplOiAxMHB4O1xyXG4gIH1cclxufVxyXG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Utils } from '../shared/Utils';\r\nimport { AnnounceType } from '../shared/AnnounceType';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.css'],\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  constructor(private router: Router) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  goToEditor() {\r\n    Utils.broadcastInfo(AnnounceType.LeftHomePage);\r\n    this.router.navigate(['editor']);\r\n  }\r\n}\r\n","export default \".otherPplMessage {\\r\\n  background-color: #efefef;\\r\\n}\\r\\n\\r\\n.myMessage {\\r\\n  background-color: #fedbbd;\\r\\n}\\r\\n\\r\\n.card {\\r\\n  border-radius: 10px;\\r\\n}\\r\\n\\r\\n.card-body {\\r\\n  padding: 8px;\\r\\n}\\r\\n\\r\\n.card-text {\\r\\n  margin: 0px;\\r\\n}\\r\\n\\r\\nhtml {\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n@media (min-width: 768px) {\\r\\n  html {\\r\\n    font-size: 16px;\\r\\n  }\\r\\n}\\r\\n\\r\\n.name {\\r\\n  margin-bottom: 1px;\\r\\n  font-weight: bold;\\r\\n  color: #565656;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVzc2FnZS1idWJibGUvbWVzc2FnZS1idWJibGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRTtJQUNFLGVBQWU7RUFDakI7QUFDRjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixpQkFBaUI7RUFDakIsY0FBYztBQUNoQiIsImZpbGUiOiJzcmMvYXBwL21lc3NhZ2UtYnViYmxlL21lc3NhZ2UtYnViYmxlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIub3RoZXJQcGxNZXNzYWdlIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWZlZmVmO1xyXG59XHJcblxyXG4ubXlNZXNzYWdlIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmVkYmJkO1xyXG59XHJcblxyXG4uY2FyZCB7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxufVxyXG5cclxuLmNhcmQtYm9keSB7XHJcbiAgcGFkZGluZzogOHB4O1xyXG59XHJcblxyXG4uY2FyZC10ZXh0IHtcclxuICBtYXJnaW46IDBweDtcclxufVxyXG5cclxuaHRtbCB7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcblxyXG5AbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHtcclxuICBodG1sIHtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICB9XHJcbn1cclxuXHJcbi5uYW1lIHtcclxuICBtYXJnaW4tYm90dG9tOiAxcHg7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgY29sb3I6ICM1NjU2NTY7XHJcbn1cclxuIl19 */\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { PeerService } from '../services/peer.service';\r\nimport { NameService } from '../services/name.service';\r\n\r\n@Component({\r\n  selector: 'app-message-bubble',\r\n  templateUrl: './message-bubble.component.html',\r\n  styleUrls: ['./message-bubble.component.css']\r\n})\r\nexport class MessageBubbleComponent implements OnInit {\r\n  @Input() senderName: string;\r\n  @Input() content: string;\r\n\r\n  myPeerId: string;\r\n  displayName: string;\r\n\r\n  constructor(private peerService: PeerService, public nameService: NameService) { }\r\n\r\n  ngOnInit() {\r\n    this.myPeerId = this.peerService.getMyPeerId();\r\n    this.displayName = this.nameService.getPeerName(this.senderName);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Message, MessageType } from '../shared/Message';\r\nimport { EditorService } from './editor.service';\r\nimport { CRDT } from '../shared/CRDT';\r\nimport { CrdtUtils } from '../shared/Utils';\r\nimport { CursorService } from './cursor.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class BroadcastService {\r\n  private peer: any;\r\n  private chatMessageTime = 0;\r\n  static readonly CRDTDelimiter = '#$'; // Has to be at least 2 unique chars\r\n\r\n  constructor(private cursorService: CursorService) {}\r\n\r\n  /**\r\n   * Use when first join room to ask a peer to send us oldCRDTs, old chat messages\r\n   */\r\n  requestOldMessages(conn: any, messageType: MessageType) {\r\n    const message = new Message(null, messageType, this.peer.id);\r\n    conn.send(message);\r\n  }\r\n\r\n  sendOldCRDTs(conn: any, previousCRDTs: CRDT[]) {\r\n    previousCRDTs = previousCRDTs.slice(1, previousCRDTs.length - 1); // Don't send \"beg\" and \"end\" CRDT\r\n    if (previousCRDTs.length === 0) {\r\n      conn.send(new Message('', MessageType.OldCRDTsLastBatch, this.peer.id));\r\n      return;\r\n    }\r\n\r\n    // WebRTC has max message size (different for each browser), ranging from 16Kb to 256Kb.\r\n    // Our CRDTs can be large. Therefore we need to break them in small batches\r\n    const crdtStrings = CrdtUtils.breakCrdtsIntoCrdtStringBatches(\r\n      previousCRDTs,\r\n      BroadcastService.CRDTDelimiter\r\n    );\r\n\r\n    for (let i = 0; i < crdtStrings.length; i++) {\r\n      const messageType =\r\n        i === crdtStrings.length - 1\r\n          ? MessageType.OldCRDTsLastBatch\r\n          : MessageType.OldCRDTs;\r\n      const message = new Message(crdtStrings[i], messageType, this.peer.id);\r\n      conn.send(message); // Send each batch\r\n    }\r\n\r\n    // Without setTimeout, cursor isn't update. Why?!\r\n    const that = this;\r\n    setTimeout(() => that.sendCursorInfo(conn), 10);\r\n  }\r\n\r\n  sendOldMessages(conn: any, previousChatMessages: Message[]) {\r\n    const message = new Message(\r\n      JSON.stringify(previousChatMessages),\r\n      MessageType.OldChatMessages,\r\n      this.peer.id\r\n    );\r\n    conn.send(message);\r\n  }\r\n\r\n  /**\r\n   * Send old chat messages, old crdts and most recent change language\r\n   */\r\n  sendOldData(conn: any, oldChatMessages: Message[], oldCRDTs: CRDT[]) {\r\n    this.sendOldCRDTs(conn, oldCRDTs);\r\n    this.sendOldMessages(conn, oldChatMessages);\r\n    this.sendChangeLanguage(conn);\r\n  }\r\n\r\n  sendMyCursorColor(conn: any, myColor: number) {\r\n    conn.send(new Message(myColor + '', MessageType.CursorColor, this.peer.id));\r\n  }\r\n\r\n  /**\r\n   * Is called when our user insert / remove something. These changes will be\r\n   * converted to corresponding CRDT objects and broadcasted to the rest in room\r\n   * See editor.service.ts - handle local insert / remove for more details.\r\n   */\r\n  broadcastInsertOrRemove(\r\n    crdts: CRDT[],\r\n    isInsert: boolean,\r\n    connectionList: any[]\r\n  ) {\r\n    const messageType = isInsert\r\n      ? MessageType.RemoteInsert\r\n      : MessageType.RemoteRemove;\r\n\r\n    const crdtStrings = CrdtUtils.breakCrdtsIntoCrdtStringBatches(\r\n      crdts,\r\n      BroadcastService.CRDTDelimiter\r\n    );\r\n\r\n    for (let i = 0; i < crdtStrings.length; i++) {\r\n      connectionList.forEach((conn) => {\r\n        const messageToSend = new Message(\r\n          crdtStrings[i],\r\n          messageType,\r\n          this.peer.id\r\n        );\r\n        conn.send(messageToSend);\r\n      });\r\n    }\r\n  }\r\n\r\n  broadcastMessageToNewPeers(message: Message, conns: any[]) {\r\n    conns.forEach((connection) => {\r\n      connection.send(message);\r\n    });\r\n  }\r\n\r\n  broadcastChatMessage(\r\n    content: string,\r\n    connectionList: any[],\r\n    previousChatMessages: Message[]\r\n  ) {\r\n    if (content.length === 0) {\r\n      return;\r\n    }\r\n\r\n    previousChatMessages.push(\r\n      new Message(\r\n        content,\r\n        MessageType.ChatMessage,\r\n        this.peer.id,\r\n        this.chatMessageTime\r\n      )\r\n    );\r\n\r\n    connectionList.forEach((conn) => {\r\n      const messageToSend = new Message(\r\n        content,\r\n        MessageType.ChatMessage,\r\n        this.peer.id,\r\n        this.chatMessageTime\r\n      );\r\n\r\n      conn.send(messageToSend);\r\n    });\r\n\r\n    // A chat message is uniquely identified by fromPeerId and chatMessageTime.\r\n    // We use this to avoid duplicate chat messages\r\n    this.chatMessageTime++;\r\n  }\r\n\r\n  broadcastChangeLanguage(connectionList: any[]) {\r\n    connectionList.forEach((conn) => {\r\n      this.sendChangeLanguage(conn);\r\n    });\r\n  }\r\n\r\n  sendChangeLanguage(conn: any) {\r\n    const messageToSend = new Message(\r\n      EditorService.currentLanguage,\r\n      MessageType.ChangeLanguage,\r\n      this.peer.id\r\n    );\r\n    conn.send(messageToSend);\r\n  }\r\n\r\n  broadcastChangeName(connectionList: any[], newName: string) {\r\n    connectionList.forEach((conn) => {\r\n      this.sendChangeName(conn, newName);\r\n    });\r\n  }\r\n\r\n  sendChangeName(conn: any, newName: string) {\r\n    const messageToSend = new Message(\r\n      newName,\r\n      MessageType.ChangeName,\r\n      this.peer.id\r\n    );\r\n    conn.send(messageToSend);\r\n  }\r\n\r\n  broadcastChangeSelectionPos(event: any, connectionList: any[]) {\r\n    connectionList.forEach((conn) => {\r\n      this.sendChangeSelectionPos(conn, event);\r\n    });\r\n  }\r\n\r\n  sendChangeSelectionPos(conn: any, event: any): void {\r\n    const message = new Message(\r\n      JSON.stringify(event),\r\n      MessageType.ChangeSelect,\r\n      this.peer.id\r\n    );\r\n    conn.send(message);\r\n  }\r\n\r\n  broadcastChangeCursorPos(event: any, connectionList: any[]): void {\r\n    connectionList.forEach((conn) => {\r\n      this.sendChangeCursorPos(conn, event);\r\n    });\r\n  }\r\n\r\n  sendChangeCursorPos(conn: any, event: any): void {\r\n    const message = new Message(\r\n      JSON.stringify(event),\r\n      MessageType.ChangeCursor,\r\n      this.peer.id\r\n    );\r\n    conn.send(message);\r\n  }\r\n\r\n  sendNameAndCursorInfo(conn: any, name: string): void {\r\n    // Order is important! Name first and then cursor info!\r\n    this.sendMyName(conn, name);\r\n    this.sendCursorInfo(conn);\r\n  }\r\n\r\n  /**\r\n   * Send our cursor color, cursor pos and selection pos\r\n   */\r\n  sendCursorInfo(conn: any): void {\r\n    this.sendMyCursorColor(conn, this.cursorService.getMyCursorColor());\r\n\r\n    const lastCursorEvent = this.cursorService.getMyLastCursorEvent();\r\n    if (lastCursorEvent !== null) {\r\n      this.sendChangeCursorPos(conn, lastCursorEvent);\r\n    }\r\n\r\n    const lastSelectEvent = this.cursorService.getMyLastSelectEvent();\r\n    if (lastSelectEvent !== null) {\r\n      this.sendChangeSelectionPos(conn, lastSelectEvent);\r\n    }\r\n  }\r\n\r\n  sendMyName(conn: any, myName: string): void {\r\n    const message = new Message(myName, MessageType.Name, this.peer.id);\r\n    conn.send(message);\r\n  }\r\n\r\n  tellPeerCannotSendOldData(conn: any) {\r\n    conn.send(\r\n      new Message(\r\n        null,\r\n        MessageType.CannotSendOldCRDTsOrOldChatMessages,\r\n        this.peer.id\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get our peer object from peerService\r\n   */\r\n  setPeer(peer: any) {\r\n    this.peer = peer;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { NameService } from './name.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CursorService {\r\n  private selectionDecorations: Decoration[] = [];\r\n  // Color: 1 to 25. peerColors include myColor\r\n  private peerColors: Map<string, number> = new Map<string, number>();\r\n  private oldNameTags: Map<string, any> = new Map<string, any>();\r\n  private oldCursors: Map<string, any> = new Map<string, any>();\r\n  private otherPeerNameTagAndCursorIndices = new Map<string, number>();\r\n  private myNameTagIndex: number;\r\n  private myPeerId: string;\r\n  private myLastCursorEvent: any = null;\r\n  private myLastSelectEvent: any = null;\r\n  private peerMostRecentCursorEvents = new Map<string, any>();\r\n  private peerMostRecentSelectEvents = new Map<string, any>();\r\n  private contentWidgetId = 0;\r\n  private showNameTag = true;\r\n  justJoinRoom = true;\r\n\r\n  constructor(private nameService: NameService) {}\r\n\r\n  drawSelection(\r\n    editor: any,\r\n    startLine: number,\r\n    startCol: number,\r\n    endLine: number,\r\n    endCol: number,\r\n    ofPeerId: string\r\n  ) {\r\n    const color = this.peerColors.get(ofPeerId);\r\n    const deco = this.selectionDecorations.filter((d) => d.peerId === ofPeerId);\r\n    const oldDecoration = deco.map((d) => d.decoration);\r\n    const decoration = editor.deltaDecorations(oldDecoration, [\r\n      {\r\n        range: new monaco.Range(startLine, startCol, endLine, endCol),\r\n        options: {\r\n          className: 'monaco-select-' + color,\r\n          stickiness: monaco.editor.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore,\r\n        },\r\n      },\r\n    ]);\r\n    this.selectionDecorations = this.selectionDecorations.filter(\r\n      (d) => d.peerId !== ofPeerId\r\n    );\r\n    this.selectionDecorations.push(new Decoration(decoration, ofPeerId));\r\n  }\r\n\r\n  drawCursor(\r\n    editor: any,\r\n    ofPeerId: string,\r\n    newLineNumber: number,\r\n    newColumn: number\r\n  ) {\r\n    const oldCursor = this.oldCursors.get(ofPeerId);\r\n\r\n    if (oldCursor) {\r\n      editor.removeContentWidget(oldCursor);\r\n    }\r\n    const cursorColor = this.peerColors.get(ofPeerId);\r\n\r\n    const contentWidgetId = this.contentWidgetId++ + '';\r\n    const newCursorWidget = {\r\n      domNode: null,\r\n      getId: function () {\r\n        return contentWidgetId;\r\n      },\r\n      getDomNode: function () {\r\n        if (!this.domNode) {\r\n          this.domNode = document.createElement('div');\r\n          this.domNode.classList.add('monaco-cursor-' + cursorColor);\r\n        }\r\n        return this.domNode;\r\n      },\r\n      getPosition: function () {\r\n        return {\r\n          position: {\r\n            lineNumber: newLineNumber,\r\n            column: newColumn,\r\n          },\r\n          preference: [monaco.editor.ContentWidgetPositionPreference.EXACT],\r\n        };\r\n      },\r\n    };\r\n    editor.addContentWidget(newCursorWidget);\r\n    this.oldCursors.set(ofPeerId, newCursorWidget);\r\n\r\n    const index = editor\r\n      .getModel()\r\n      .getOffsetAt(new monaco.Position(newLineNumber, newColumn));\r\n    this.otherPeerNameTagAndCursorIndices.set(ofPeerId, index);\r\n  }\r\n\r\n  drawNameTag(\r\n    editor: any,\r\n    ofPeerId: string,\r\n    newLineNumber: number,\r\n    newColumn: number,\r\n    isMyNameTag: boolean\r\n  ) {\r\n    const oldNameTag = this.oldNameTags.get(ofPeerId);\r\n\r\n    if (oldNameTag) {\r\n      editor.removeContentWidget(oldNameTag);\r\n    }\r\n    const nameTagOwner = this.nameService.getPeerName(ofPeerId);\r\n    const nameTagColor = this.peerColors.get(ofPeerId);\r\n\r\n    const contentWidgetId = this.contentWidgetId++ + '';\r\n    const showTag = this.showNameTag;\r\n    const newNameTagWidget = {\r\n      domNode: null,\r\n      getId: function () {\r\n        return contentWidgetId;\r\n      },\r\n      getDomNode: function () {\r\n        if (!this.domNode) {\r\n          this.domNode = document.createElement('div');\r\n          this.domNode.textContent = nameTagOwner;\r\n          this.domNode.style.whiteSpace = 'nowrap';\r\n          this.domNode.style.background =\r\n            'var(--monaco-color-' + nameTagColor + ')';\r\n          this.domNode.classList.add('nameTagText');\r\n          if (!showTag) {\r\n            this.domNode.classList.add('hide');\r\n          }\r\n        }\r\n        return this.domNode;\r\n      },\r\n      getPosition: function () {\r\n        return {\r\n          position: {\r\n            lineNumber: newLineNumber,\r\n            column: newColumn,\r\n          },\r\n          preference: [monaco.editor.ContentWidgetPositionPreference.ABOVE],\r\n        };\r\n      },\r\n    };\r\n    editor.addContentWidget(newNameTagWidget);\r\n    this.oldNameTags.set(ofPeerId, newNameTagWidget);\r\n\r\n    const index = editor\r\n      .getModel()\r\n      .getOffsetAt(new monaco.Position(newLineNumber, newColumn));\r\n    if (!isMyNameTag) {\r\n      this.otherPeerNameTagAndCursorIndices.set(ofPeerId, index);\r\n    } else {\r\n      this.myNameTagIndex = index;\r\n    }\r\n  }\r\n\r\n  hideAllNameTags() {\r\n    const nameTags = Array.from(this.oldNameTags.values());\r\n    for (let i = 0; i < nameTags.length; i++) {\r\n      const nameTag = nameTags[i];\r\n      nameTag.domNode.classList.add('hide');\r\n    }\r\n    this.showNameTag = false;\r\n  }\r\n\r\n  showAllNameTags() {\r\n    const nameTags = Array.from(this.oldNameTags.values());\r\n    for (let i = 0; i < nameTags.length; i++) {\r\n      const nameTag = nameTags[i];\r\n      nameTag.domNode.classList.remove('hide');\r\n    }\r\n    this.showNameTag = true;\r\n  }\r\n\r\n  /**\r\n   * Manually calculate where nameTag and cursor should be after an insertion\r\n   */\r\n  nameTagAndCursorIndexAfterInsert(\r\n    originalIndex: number,\r\n    insertStartIndex: number,\r\n    insertLength: number,\r\n    moveNameTagOrCursorWhenInsertAtRightEdge: boolean\r\n  ) {\r\n    if (originalIndex < insertStartIndex) {\r\n      return originalIndex;\r\n    } else if (originalIndex === insertStartIndex) {\r\n      if (moveNameTagOrCursorWhenInsertAtRightEdge) {\r\n        return originalIndex + insertLength;\r\n      } else {\r\n        return originalIndex;\r\n      }\r\n    } else {\r\n      return originalIndex + insertLength;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Manually calculate where nameTag and cursor should be after a removal\r\n   */\r\n  nameTagAndCursorIndexAfterRemove(\r\n    originalIndex: number,\r\n    removeStartIndex: number,\r\n    removeLength: number\r\n  ) {\r\n    if (removeStartIndex >= originalIndex) {\r\n      return originalIndex;\r\n    } else {\r\n      return Math.max(removeStartIndex, originalIndex - removeLength);\r\n    }\r\n  }\r\n\r\n  recalculateAllNameTagAndCursorIndicesAfterInsert(\r\n    insertStartIndex: number,\r\n    insertLength: number,\r\n    peerIdWhoMadeThisInsertion: string\r\n  ): void {\r\n    // Recalculate peers' nameTag and cursor indices\r\n    const peerIds = Array.from(this.otherPeerNameTagAndCursorIndices.keys());\r\n    for (let i = 0; i < peerIds.length; i++) {\r\n      const peerId = peerIds[i];\r\n      const isThisPeerMadeThisInsertion = peerId === peerIdWhoMadeThisInsertion;\r\n      const newIndex = this.nameTagAndCursorIndexAfterInsert(\r\n        this.otherPeerNameTagAndCursorIndices.get(peerId),\r\n        insertStartIndex,\r\n        insertLength,\r\n        isThisPeerMadeThisInsertion\r\n      );\r\n      this.otherPeerNameTagAndCursorIndices.set(peerId, newIndex);\r\n    }\r\n\r\n    // Recalculate my nameTag and cursor index\r\n    const iMadeThisInsert = peerIdWhoMadeThisInsertion === this.myPeerId;\r\n    const myNewIndex = this.nameTagAndCursorIndexAfterInsert(\r\n      this.myNameTagIndex,\r\n      insertStartIndex,\r\n      insertLength,\r\n      iMadeThisInsert\r\n    );\r\n    this.myNameTagIndex = myNewIndex;\r\n  }\r\n\r\n  recalculateAllNameTagAndCursorIndicesAfterRemove(\r\n    removeStartIndex: number,\r\n    removeLength: number\r\n  ): void {\r\n    // Recalculate peers' nameTag and cursor indices\r\n    const peerIds = Array.from(this.otherPeerNameTagAndCursorIndices.keys());\r\n    for (let i = 0; i < peerIds.length; i++) {\r\n      const peerId = peerIds[i];\r\n      const newIndex = this.nameTagAndCursorIndexAfterRemove(\r\n        this.otherPeerNameTagAndCursorIndices.get(peerId),\r\n        removeStartIndex,\r\n        removeLength\r\n      );\r\n      this.otherPeerNameTagAndCursorIndices.set(peerId, newIndex);\r\n    }\r\n\r\n    // Recalculate my nameTag index\r\n    const myNewIndex = this.nameTagAndCursorIndexAfterRemove(\r\n      this.myNameTagIndex,\r\n      removeStartIndex,\r\n      removeLength\r\n    );\r\n    this.myNameTagIndex = myNewIndex;\r\n  }\r\n\r\n  redrawPeersNameTagsAndCursors(editor: any): void {\r\n    this.otherPeerNameTagAndCursorIndices.forEach(\r\n      (index: number, peerId: string) => {\r\n        const pos = editor.getModel().getPositionAt(index);\r\n        this.drawNameTag(editor, peerId, pos.lineNumber, pos.column, false);\r\n        this.drawCursor(editor, peerId, pos.lineNumber, pos.column);\r\n      }\r\n    );\r\n  }\r\n\r\n  redrawMyNameTag(editor: any, myPeerId: string): void {\r\n    const pos = editor.getModel().getPositionAt(this.myNameTagIndex);\r\n    this.drawNameTag(editor, myPeerId, pos.lineNumber, pos.column, true);\r\n  }\r\n\r\n  setPeerColor(peerId: string, color: number): void {\r\n    this.peerColors.set(peerId, color);\r\n  }\r\n\r\n  removePeer(editor: any, peerId: string): void {\r\n    this.peerColors.delete(peerId);\r\n\r\n    // Clean select decoration\r\n    const selectDecoration = this.selectionDecorations\r\n      .filter((d) => d.peerId === peerId)\r\n      .map((d) => d.decoration);\r\n    editor.deltaDecorations(selectDecoration, []);\r\n\r\n    // Clean name tag\r\n    const oldNameTag = this.oldNameTags.get(peerId);\r\n    if (oldNameTag) {\r\n      editor.removeContentWidget(oldNameTag);\r\n      this.oldNameTags.delete(peerId);\r\n      this.otherPeerNameTagAndCursorIndices.delete(peerId);\r\n    }\r\n\r\n    // Clean cursor\r\n    const oldCursor = this.oldCursors.get(peerId);\r\n    if (oldCursor) {\r\n      editor.removeContentWidget(oldCursor);\r\n      this.oldCursors.delete(peerId);\r\n      this.otherPeerNameTagAndCursorIndices.delete(peerId);\r\n    }\r\n  }\r\n\r\n  getPeerColor(peerId: string): number {\r\n    return this.peerColors.get(peerId);\r\n  }\r\n\r\n  getMyCursorColor(): number {\r\n    return this.peerColors.get(this.myPeerId);\r\n  }\r\n\r\n  setMyCursorColorAndPeerId(myPeerId: string, color: number): void {\r\n    this.setPeerColor(myPeerId, color);\r\n    this.myPeerId = myPeerId;\r\n  }\r\n\r\n  getMyLastCursorEvent(): any {\r\n    return this.myLastCursorEvent;\r\n  }\r\n\r\n  setMyLastCursorEvent(event: any): void {\r\n    this.myLastCursorEvent = event;\r\n  }\r\n\r\n  getMyLastSelectEvent(): any {\r\n    return this.myLastSelectEvent;\r\n  }\r\n\r\n  setMyLastSelectEvent(event: any): void {\r\n    this.myLastSelectEvent = event;\r\n  }\r\n\r\n  getPeerMostRecentCursorEvent(peerId: string): any {\r\n    return this.peerMostRecentCursorEvents.get(peerId);\r\n  }\r\n\r\n  setPeerMostRecentCursorChange(peerId: string, event: any) {\r\n    this.peerMostRecentCursorEvents.set(peerId, event);\r\n  }\r\n\r\n  getPeerMostRecentSelectEvent(peerId: string): any {\r\n    return this.peerMostRecentSelectEvents.get(peerId);\r\n  }\r\n\r\n  setPeerMostRecentSelectEvent(peerId: string, event: any) {\r\n    this.peerMostRecentSelectEvents.set(peerId, event);\r\n  }\r\n}\r\n\r\n/**\r\n * Wrap Monaco's decoration (add peerId)\r\n */\r\nclass Decoration {\r\n  decoration: any;\r\n  peerId: string;\r\n  constructor(decoration: any, peerId: string) {\r\n    this.decoration = decoration;\r\n    this.peerId = peerId;\r\n  }\r\n}\r\n","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { CRDT, CRDTId, Identifier } from '../shared/CRDT';\r\nimport { CustomNumber } from '../shared/CustomNumber';\r\nimport { BalancedBST } from '../shared/BalancedBST';\r\nimport { CursorService } from './cursor.service';\r\nimport { CursorChangeReason } from '../shared/CursorChangeReason';\r\nimport { CursorChangeSource } from '../shared/CursorChangeSource';\r\nimport { SelectionChangeInfo } from '../shared/SelectionChangeInfo';\r\nimport { CursorChangeInfo } from '../shared/CursorChangeInfo';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class EditorService {\r\n  static defaultLanguage: string = 'javascript';\r\n  static currentLanguage: string = EditorService.defaultLanguage;\r\n  static siteId: number = -1;\r\n  static remoteOpLeft: number = 0;\r\n  curClock: number = 0;\r\n  bst: BalancedBST<CRDT>;\r\n  crdtEvent = new EventEmitter<boolean>();\r\n  crdtsToTransfer: CRDT[];\r\n\r\n  static setSiteId(id: number): void {\r\n    EditorService.siteId = id;\r\n  }\r\n\r\n  constructor(private cursorService: CursorService) {\r\n    // Init BST and add 'begin' and 'end' CRDTs.\r\n    // All CRDTs from now on will be in between these 2 limits\r\n    this.bst = new BalancedBST<CRDT>();\r\n    this.bst.insert(\r\n      new CRDT('_beg', new CRDTId([new Identifier(1, 0)], this.curClock++))\r\n    );\r\n    this.bst.insert(\r\n      new CRDT(\r\n        '_end',\r\n        new CRDTId([new Identifier(CustomNumber.BASE - 1, 0)], this.curClock++)\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Is called when our user inserts some text. This function will generate CRDT objects\r\n   * correspond to each new char, add them to BST and then broadcast these new CRDT objects\r\n   */\r\n  handleLocalInsert(\r\n    auxEditor: any,\r\n    textToInsert: string,\r\n    startLineNumber: number,\r\n    startColumn: number\r\n  ): void {\r\n    if (EditorService.siteId === -1)\r\n      throw new Error('Error: call handleLocalInsert before setting siteId');\r\n\r\n    if (textToInsert === '') return;\r\n\r\n    const auxEditorTextModel = auxEditor.getModel();\r\n\r\n    // IMPORTANT: Update auxiliary editor ONLY AFTER getting the CORRECT insertAtIndex\r\n    const insertAtIndex =\r\n      this.posToIndex(auxEditorTextModel, startLineNumber, startColumn) + 1; // Because we have _beg limit\r\n    // Update aux editor\r\n    this.writeTextToMonacoAtPos(\r\n      auxEditor,\r\n      auxEditorTextModel,\r\n      textToInsert,\r\n      startLineNumber,\r\n      startColumn\r\n    );\r\n\r\n    const chArr = textToInsert.split('');\r\n\r\n    // Generate N CrdtIds correspond to N chars in textToInsert\r\n    const crdtIdBefore = this.bst.getDataAt(insertAtIndex - 1).id;\r\n    const crdtIdAfter = this.bst.getDataAt(insertAtIndex).id;\r\n    const listCrdtIdsBetween = CRDTId.generateNPositionsBetween(\r\n      crdtIdBefore,\r\n      crdtIdAfter,\r\n      chArr.length,\r\n      EditorService.siteId,\r\n      this.curClock\r\n    );\r\n\r\n    this.curClock += chArr.length; // Generate N new CRDTIds therefore increment curClock by N\r\n\r\n    // Combine CrdtId and char to make CRDT object\r\n    let chArrIndex = 0;\r\n    const listCRDTBetween = listCrdtIdsBetween.map(\r\n      (crdtId) => new CRDT(chArr[chArrIndex++], crdtId)\r\n    );\r\n\r\n    // Insert to our BST\r\n    for (let i = 0; i < listCRDTBetween.length; i++) {\r\n      this.bst.insert(listCRDTBetween[i]);\r\n    }\r\n\r\n    // Tell peerService to broadcast these new CRDTs\r\n    // PeerService listens to this event at subscribeToEditorServiceEvents()\r\n    this.crdtsToTransfer = listCRDTBetween;\r\n    this.crdtEvent.emit(true);\r\n  }\r\n\r\n  /**\r\n   * Is called when a peer sends us a remote insert request. This function will take\r\n   * these new CRDT objects, insert them to BST to compute their indices and then write them\r\n   * to their correct positions on Monaco Editor\r\n   */\r\n  handleRemoteInsert(\r\n    editor: any,\r\n    auxEditor: any,\r\n    newCRDTs: CRDT[],\r\n    fromPeerId: string\r\n  ) {\r\n    const editorTextModel = editor.getModel();\r\n    const auxEditorTextModel = auxEditor.getModel();\r\n\r\n    const insertingIndices = new Array<number>(newCRDTs.length);\r\n\r\n    // Note: Indices from BST and from Monaco Editor are in sync. Getting the correct indices\r\n    // from BST means that we have computed the correct indices to write to Monaco\r\n    for (let i = 0; i < newCRDTs.length; i++) {\r\n      const insertingIndex = this.bst.insert(newCRDTs[i]);\r\n      if (insertingIndex === -1) insertingIndices[i] = -1;\r\n      else insertingIndices[i] = insertingIndex - 1; // '-1' because __beg limit in BST increase index by 1\r\n    }\r\n\r\n    // Rule out -1 indices (-1 indices mean we have inserted these CRDTs before)\r\n    const actuallyInsertingChars: string[] = [];\r\n    for (let i = 0; i < newCRDTs.length; i++) {\r\n      if (insertingIndices[i] !== -1) {\r\n        actuallyInsertingChars.push(newCRDTs[i].ch);\r\n      }\r\n    }\r\n    const actuallyInsertingIndices = insertingIndices.filter(\r\n      (index) => index !== -1\r\n    );\r\n\r\n    // Write continuous ranges of text to screen\r\n    let i = 0;\r\n    let startIndexMonaco = -1;\r\n    let endIndexMonaco = -1;\r\n    while (i < actuallyInsertingIndices.length) {\r\n      // Find continuous ranges of text\r\n      startIndexMonaco = actuallyInsertingIndices[i];\r\n      let j = i + 1;\r\n      while (\r\n        j < actuallyInsertingIndices.length &&\r\n        actuallyInsertingIndices[j] === actuallyInsertingIndices[j - 1] + 1\r\n      ) {\r\n        j++;\r\n      }\r\n      endIndexMonaco = actuallyInsertingIndices[j - 1];\r\n      i = j;\r\n\r\n      // Get text to be inserted\r\n      const numElements = endIndexMonaco - startIndexMonaco + 1;\r\n      const endIndexArrInclusive = i - 1;\r\n      const startIndexArr = endIndexArrInclusive - numElements + 1;\r\n      const textToInsert = actuallyInsertingChars\r\n        .slice(startIndexArr, endIndexArrInclusive + 1)\r\n        .join('');\r\n\r\n      if (\r\n        actuallyInsertingChars[startIndexArr] === ' ' ||\r\n        actuallyInsertingChars[startIndexArr] === '\\n' ||\r\n        actuallyInsertingChars.length > 10\r\n      ) {\r\n        editorTextModel.pushStackElement();\r\n      }\r\n\r\n      EditorService.remoteOpLeft++; // Avoid triggering monaco change event\r\n\r\n      // Write text to aux Editor\r\n      this.writeTextToMonacoAtIndex(\r\n        auxEditor,\r\n        auxEditorTextModel,\r\n        textToInsert,\r\n        startIndexMonaco\r\n      );\r\n\r\n      // Write text to main Monaco Editor\r\n      this.writeTextToMonacoAtIndex(\r\n        editor,\r\n        editorTextModel,\r\n        textToInsert,\r\n        startIndexMonaco\r\n      );\r\n\r\n      // Calculate new pos for nameTag after remote insert\r\n      this.cursorService.recalculateAllNameTagAndCursorIndicesAfterInsert(\r\n        startIndexMonaco,\r\n        textToInsert.length,\r\n        fromPeerId\r\n      );\r\n    }\r\n\r\n    // Redraw nameTags\r\n    this.cursorService.redrawPeersNameTagsAndCursors(editor);\r\n  }\r\n\r\n  /**\r\n   * Is called when our user removes some text. This function will remove corresponding\r\n   * CRDT objects from BST and broadcast these removed CRDTs to the rest in room\r\n   */\r\n  handleLocalRemove(\r\n    auxEditor: any,\r\n    startLineNumber: number,\r\n    startColumn: number,\r\n    endLineNumber: number,\r\n    endColumn: number,\r\n    length: number\r\n  ): void {\r\n    if (EditorService.siteId === -1)\r\n      throw new Error('Error: call handleLocalRemove before setting siteId');\r\n\r\n    if (length === 0) return;\r\n\r\n    const auxEditorTextModel = auxEditor.getModel();\r\n\r\n    // IMPORTANT: Update auxiliary editor ONLY AFTER getting the CORRECT startIndex\r\n    const startIndex =\r\n      this.posToIndex(auxEditorTextModel, startLineNumber, startColumn) + 1; // // '+1' because __beg limit in BST increase index by 1\r\n    this.deleteTextFromMonacoByPos(\r\n      auxEditorTextModel,\r\n      startLineNumber,\r\n      startColumn,\r\n      endLineNumber,\r\n      endColumn\r\n    );\r\n\r\n    // Note: Indices from BST and from Monaco Editor are in sync.\r\n    // Ex: CRDT at index 5 from BST will correspond to char at index 5 from Monaco\r\n    const removedCRDTs: CRDT[] = [];\r\n    for (let i = 0; i < length; i++) {\r\n      const crdtToBeRemoved = this.bst.getDataAt(startIndex);\r\n      removedCRDTs.push(crdtToBeRemoved);\r\n      this.bst.remove(crdtToBeRemoved);\r\n    }\r\n\r\n    // Tell peerService to broadcast these removed CRDTs\r\n    // PeerService listens to this event at subscribeToEditorServiceEvents()\r\n    this.crdtsToTransfer = removedCRDTs;\r\n    this.crdtEvent.emit(false);\r\n  }\r\n\r\n  /**\r\n   * Is called when a peer sends us a remote remove request. This function will take\r\n   * these to-be-removed CRDT objects, remove them from BST and get their indices,\r\n   * then delete chars with the same indices in Monaco\r\n   */\r\n  handleRemoteRemove(\r\n    editor: any,\r\n    auxEditor: any,\r\n    toBeRemovedCRDTs: CRDT[]\r\n  ): void {\r\n    const editorTextModel = editor.getModel();\r\n    const auxEditorTextModel = auxEditor.getModel();\r\n\r\n    const deletingIndices = new Array<number>(toBeRemovedCRDTs.length);\r\n    let offSet = 0; // offSet to add back to index because deleting 1 element will decrease the indices of all elements after it\r\n    for (let i = 0; i < toBeRemovedCRDTs.length; i++) {\r\n      const deletingIndex = this.bst.remove(toBeRemovedCRDTs[i]);\r\n      if (deletingIndex === -1) deletingIndices[i] = -1;\r\n      else {\r\n        deletingIndices[i] = deletingIndex - 1 + offSet; // '-1' because __beg limit in BST increase index by 1\r\n        offSet++;\r\n      }\r\n    }\r\n\r\n    // Rule out -1 indices (-1 means our BST doesn't have that CRDT. Probably either us or other peer has deleted it\r\n    // before this request comes)\r\n    const actuallyDeletingIndices = deletingIndices.filter(\r\n      (index) => index !== -1\r\n    );\r\n\r\n    // Delete continuous ranges of text from the screen\r\n    let i = actuallyDeletingIndices.length - 1; // Delete backwards to avoid messing up indices\r\n    let startIndexMonaco = -1;\r\n    let endIndexMonaco = -1;\r\n    while (i >= 0) {\r\n      endIndexMonaco = actuallyDeletingIndices[i];\r\n      let j = i - 1;\r\n      while (\r\n        j >= 0 &&\r\n        actuallyDeletingIndices[j] + 1 === actuallyDeletingIndices[j + 1]\r\n      ) {\r\n        j--;\r\n      }\r\n      startIndexMonaco = actuallyDeletingIndices[j + 1];\r\n      i = j;\r\n\r\n      // Delete from the screen\r\n      EditorService.remoteOpLeft++; // Avoid triggering monaco change event\r\n\r\n      // main Editor\r\n      this.deleteTextFromMonacoByIndices(\r\n        editorTextModel,\r\n        startIndexMonaco,\r\n        endIndexMonaco + 1\r\n      );\r\n\r\n      // Calculate new pos for nameTag after remote remove\r\n      const deleteLength = endIndexMonaco - startIndexMonaco + 1;\r\n      this.cursorService.recalculateAllNameTagAndCursorIndicesAfterRemove(\r\n        startIndexMonaco,\r\n        deleteLength\r\n      );\r\n\r\n      // aux Editor\r\n      this.deleteTextFromMonacoByIndices(\r\n        auxEditorTextModel,\r\n        startIndexMonaco,\r\n        endIndexMonaco + 1\r\n      );\r\n    }\r\n\r\n    // Actually redraw nameTag\r\n    this.cursorService.redrawPeersNameTagsAndCursors(editor);\r\n  }\r\n\r\n  getEditorContent(editor: any): string {\r\n    const editorTextModel = editor.getModel();\r\n    return editorTextModel.getValue();\r\n  }\r\n\r\n  private writeTextToMonacoAtIndex(\r\n    editor: any,\r\n    editorTextModel: any,\r\n    text: string,\r\n    startIndex: number\r\n  ): void {\r\n    const pos = this.indexToPos(editorTextModel, startIndex);\r\n    this.writeTextToMonacoAtPos(\r\n      editor,\r\n      editorTextModel,\r\n      text,\r\n      pos.lineNumber,\r\n      pos.column\r\n    );\r\n  }\r\n\r\n  private deleteTextFromMonacoByIndices(\r\n    editorTextModel: any,\r\n    startIndex: number,\r\n    endIndex: number\r\n  ): void {\r\n    const startPos = this.indexToPos(editorTextModel, startIndex);\r\n    const endPos = this.indexToPos(editorTextModel, endIndex);\r\n    this.deleteTextFromMonacoByPos(\r\n      editorTextModel,\r\n      startPos.lineNumber,\r\n      startPos.column,\r\n      endPos.lineNumber,\r\n      endPos.column\r\n    );\r\n  }\r\n\r\n  private deleteTextFromMonacoByPos(\r\n    editorTextModel: any,\r\n    startLineNumber: number,\r\n    startColumn: number,\r\n    endLineNumber: number,\r\n    endColumn: number\r\n  ): void {\r\n    const range = new monaco.Range(\r\n      startLineNumber,\r\n      startColumn,\r\n      endLineNumber,\r\n      endColumn\r\n    );\r\n    editorTextModel.pushEditOperations(\r\n      [],\r\n      [\r\n        {\r\n          range: range,\r\n          text: null,\r\n        },\r\n      ]\r\n    );\r\n  }\r\n\r\n  private writeTextToMonacoAtPos(\r\n    editor: any,\r\n    editorTextModel: any,\r\n    text: string,\r\n    startLineNumber: number,\r\n    startColumn: number\r\n  ) {\r\n    const selection = editor.getSelection();\r\n    const selectionEndIndex = this.posToIndex(\r\n      editorTextModel,\r\n      selection.endLineNumber,\r\n      selection.endColumn\r\n    );\r\n    const isTypingAtLeftEdge =\r\n      startLineNumber === selection.startLineNumber &&\r\n      startColumn === selection.startColumn;\r\n    const isTypingAtRightEdge =\r\n      startLineNumber === selection.endLineNumber &&\r\n      startColumn === selection.endColumn;\r\n\r\n    const range = new monaco.Range(\r\n      startLineNumber,\r\n      startColumn,\r\n      startLineNumber,\r\n      startColumn\r\n    );\r\n    editorTextModel.pushEditOperations(\r\n      [],\r\n      [\r\n        {\r\n          range: range,\r\n          text: text,\r\n          forceMoveMarkers: true,\r\n        },\r\n      ]\r\n    );\r\n\r\n    if (isTypingAtRightEdge) {\r\n      // Do not grow our selection when typing at the right edge of that selection\r\n      editor.setSelection(selection);\r\n    } else if (isTypingAtLeftEdge) {\r\n      // Grow our selection when typing at left edge\r\n      const endIndex = selectionEndIndex + text.length;\r\n      const endPos = this.indexToPos(editorTextModel, endIndex);\r\n      const newSelectionRange = new monaco.Range(\r\n        startLineNumber,\r\n        startColumn,\r\n        endPos.lineNumber,\r\n        endPos.column\r\n      );\r\n      editor.setSelection(newSelectionRange);\r\n    }\r\n  }\r\n\r\n  private indexToPos(editorTextModel: any, index: number): any {\r\n    return editorTextModel.getPositionAt(index);\r\n  }\r\n\r\n  posToIndex(editorTextModel: any, lineNumber: number, column: number): number {\r\n    return editorTextModel.getOffsetAt(new monaco.Position(lineNumber, column));\r\n  }\r\n\r\n  getOldCRDTsAsSortedArray(): CRDT[] {\r\n    return this.bst.toSortedArray();\r\n  }\r\n\r\n  getCrdtsToTransfer() {\r\n    return this.crdtsToTransfer;\r\n  }\r\n\r\n  /**\r\n   * Classify important change events that needed to be applied right away such as mouse click\r\n   */\r\n  static isCursorOrSelectEventImportant(\r\n    event: SelectionChangeInfo | CursorChangeInfo\r\n  ): boolean {\r\n    if (\r\n      event.reason === CursorChangeReason.Explicit ||\r\n      event.reason === CursorChangeReason.Redo ||\r\n      event.reason === CursorChangeReason.Undo ||\r\n      (event.source === CursorChangeSource.MOUSE_EVENT &&\r\n        event.reason === CursorChangeReason.NotSet) ||\r\n      event.source === CursorChangeSource.DRAG_AND_DROP_EVENT ||\r\n      event.source === CursorChangeSource.CTRL_SHIFT_K_EVENT ||\r\n      event.source === CursorChangeSource.CTRL_ENTER_EVENT ||\r\n      event.source === CursorChangeSource.CTRL_SHIFT_ENTER_EVENT\r\n    ) {\r\n      return true;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class NameService {\r\n  private peersNames = new Map<string, string>();\r\n  private animalNames = [\r\n    'Bird',\r\n    'Dog',\r\n    'Donkey',\r\n    'Drever',\r\n    'Earwig',\r\n    'Seal',\r\n    'Penguin',\r\n    'Flamingo',\r\n    'Fossa',\r\n    'Cat',\r\n    'Bear',\r\n    'Lion',\r\n    'Tiger',\r\n    'Snake',\r\n    'Python',\r\n    'Turtle',\r\n    'Frog',\r\n    'Deer',\r\n    'Bat',\r\n    'Horse',\r\n    'Wolf',\r\n    'Squirrel',\r\n    'Giraffe',\r\n    'Leopard',\r\n    'Panda',\r\n    'Gorilla',\r\n    'Raccoon',\r\n    'Owl',\r\n    'Otter',\r\n    'Goat',\r\n    'Shark',\r\n    'Crocodile',\r\n    'Chimpanzee',\r\n    'Koala',\r\n    'Cheetah',\r\n    'Chicken',\r\n    'Duck',\r\n    'Sheep',\r\n    'Sea Lion',\r\n    'Hare',\r\n    'Weasel',\r\n    'Goose',\r\n    'Ostrich',\r\n    'Kangaroo',\r\n    'Armadillo',\r\n    'Falcon',\r\n    'Lizard',\r\n    'Vulture',\r\n    'Bull',\r\n    'Akita',\r\n    'Albatross',\r\n    'Hornet',\r\n    'Avocet',\r\n    'Baboon',\r\n    'Badger',\r\n    'Balinese',\r\n    'Buffalo',\r\n    'Chinchilla',\r\n    'Cichlid',\r\n    'Parrot',\r\n    'Butterfly',\r\n    'Hedgehog',\r\n    'Ant',\r\n    'Spider',\r\n    'Antelope',\r\n    'Lemurs',\r\n    'Hyenas',\r\n    'Mice',\r\n    'Rat',\r\n    'Elephant',\r\n    'Fox',\r\n    'Snail',\r\n    'Fish',\r\n    'Salmon',\r\n    'Fly',\r\n    'Cow',\r\n    'Rabit',\r\n    'Possum',\r\n    'Camel',\r\n    'Chipmunk',\r\n    'Zebra',\r\n    'Mamba',\r\n    'Rhino',\r\n    'Octopus',\r\n    'Monkey',\r\n    'Owl',\r\n    'Aligator',\r\n    'Starfish',\r\n    'Crab',\r\n    'Jellyfish',\r\n    'Ox',\r\n    'Eagle',\r\n    'Woodpecker',\r\n    'Walrus',\r\n  ];\r\n\r\n  private adjectives = [\r\n    'Likeable',\r\n    'Amiable',\r\n    'Charming',\r\n    'Naughty',\r\n    'Saucy',\r\n    'Frank',\r\n    'Generous',\r\n    'Clever',\r\n    'Sincere',\r\n    'Helpful',\r\n    'Patient',\r\n    'Diligent',\r\n    'Smart',\r\n    'Joyous',\r\n    'Reliable',\r\n    'Cute',\r\n    'Loyal',\r\n    'Energetic',\r\n    'Jolly',\r\n    'Awesome',\r\n    'Cheerful',\r\n    'Chatty',\r\n    'Hilarious',\r\n    'Witty',\r\n    'Humorous',\r\n    'Amusing',\r\n    'Ambitious',\r\n    'Flashy',\r\n    'Cool',\r\n    'Decisive',\r\n    'Fearless',\r\n  ];\r\n\r\n  giveMyselfRandomName(peerId: string): void {\r\n    const randAnimalIndex = Math.floor(Math.random() * this.animalNames.length);\r\n    const randAdjIndex = Math.floor(Math.random() * this.adjectives.length);\r\n    this.setPeerName(\r\n      peerId,\r\n      this.adjectives[randAdjIndex] + ' ' + this.animalNames[randAnimalIndex]\r\n    );\r\n  }\r\n\r\n  setPeerName(peerId: string, name: string): void {\r\n    this.peersNames.set(peerId, name);\r\n  }\r\n\r\n  getPeerName(peerId: string): string {\r\n    return this.peersNames.get(peerId);\r\n  }\r\n}\r\n","import { EventEmitter, Injectable } from '@angular/core';\r\nimport { Message, MessageType } from '../shared/Message';\r\nimport { RoomService } from './room.service';\r\nimport { CRDT } from '../shared/CRDT';\r\nimport { EditorService } from './editor.service';\r\nimport { EnterRoomInfo } from '../shared/EnterRoomInfo';\r\nimport { CrdtUtils, PeerUtils, Utils } from '../shared/Utils';\r\nimport { CursorChangeInfo } from '../shared/CursorChangeInfo';\r\nimport { SelectionChangeInfo } from '../shared/SelectionChangeInfo';\r\nimport { CursorService } from './cursor.service';\r\nimport { PeerServerConnection } from '../shared/PeerServerConnection';\r\nimport { PeersConnection } from '../shared/PeersConnection';\r\nimport { AnnounceType } from '../shared/AnnounceType';\r\nimport { AlertType } from '../shared/AlertType';\r\nimport { NameService } from './name.service';\r\nimport { NameColor } from '../shared/NameColor';\r\nimport { BroadcastService } from './broadcast.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { TurnServerService } from './turnServerService';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\ndeclare const Peer: any;\r\nconst STOP_BROADCAST_AFTER_MILLI_SECONDS = 5000;\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class PeerService {\r\n  private peer: any;\r\n  private roomName: string;\r\n  private connToGetOldMessages: any;\r\n  private peerIdsToSendOldCrdtsAndOldChatMessages: string[] = [];\r\n  private peerIdsInRoomWhenFirstEnter: any[] = [];\r\n  private connectionsIAmHolding: any[] = [];\r\n  private hasReceivedAllOldCRDTs = false;\r\n  private hasReceivedOldChatMessages = false;\r\n  private newlyJoinedConnsNeededBroadcasting: any[] = [];\r\n  private receivedRemoteCrdts: CRDT[];\r\n  private peerIdWhoSentCrdts: string;\r\n  private cursorChangeInfo: CursorChangeInfo;\r\n  private selectionChangeInfo: SelectionChangeInfo;\r\n  private previousChatMessages: Message[] = [];\r\n  private peerIdJustLeft: string;\r\n  private nameColorList: NameColor[] = [];\r\n  private hasNotShowInternetDisconnect = true;\r\n  connectionEstablished = new EventEmitter<boolean>();\r\n\r\n  constructor(\r\n    private roomService: RoomService,\r\n    private cursorService: CursorService,\r\n    private editorService: EditorService,\r\n    private nameService: NameService,\r\n    private broadcastService: BroadcastService,\r\n    private turnServerService: TurnServerService\r\n  ) {}\r\n\r\n  /**\r\n   * Is called when both main and aux monaco editor are ready\r\n   */\r\n  connectToPeerServerAndInit() {\r\n    let iceServers = [\r\n        { url: 'stun:relay.backups.cz' },\r\n        {\r\n          url: 'turn:relay.backups.cz?transport=tcp',\r\n          username: 'webrtc',\r\n          credential: 'webrtc',\r\n        },\r\n      ];\r\n    this.turnServerService.getTurnStunToken()\r\n      .pipe(\r\n        finalize(() => {\r\n          // Finally block\r\n          this.peer = new Peer({\r\n            host: environment.peerServerHost,\r\n            port: '/..',\r\n            secure: true,\r\n            config: {\r\n              iceServers: iceServers\r\n            },\r\n            pingInterval: 3000,\r\n            debug: 2, // Print only errors and warnings\r\n          });\r\n      \r\n          this.broadcastService.setPeer(this.peer);\r\n          this.listenToPeerServerEvent();\r\n          this.registerConnectToMeEvent();\r\n          this.subscribeToEditorServiceEvents();\r\n          this.listenToBrowserOffline();\r\n        })\r\n      )\r\n      .subscribe(token => {\r\n        iceServers = token.ice_servers;\r\n      }, error => {\r\n        console.error('Cannot get Turn server token from Twilio. Check your credential', error);\r\n      })\r\n  }\r\n\r\n  private listenToPeerServerEvent() {\r\n    this.peer.on(PeerServerConnection.Open, (myId: string) => {\r\n      console.log('I have connected to peerServer. My id: ' + myId);\r\n      this.connectionEstablished.emit(true);\r\n      this.KeepSendDummyRequestToKeepServerAlive();\r\n    });\r\n\r\n    this.peer.on(PeerServerConnection.Disconnected, () => {\r\n      // Disconnect => destroy permanently this peer\r\n      this.peer.destroy();\r\n\r\n      PeerUtils.handlePeerError(\r\n        'You/PeerServer disconnects. Going back to Home page?'\r\n      );\r\n    });\r\n\r\n    this.peer.on(PeerServerConnection.Error, (error) => {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * What to do when a peer send me a connect request\r\n   */\r\n  private registerConnectToMeEvent() {\r\n    this.peer.on(PeerServerConnection.Connection, (conn: any) => {\r\n      this.setupListenerForConnection(conn);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * A better way to determine online / offline status is to try sending a HTTP request to some servers\r\n   * and wait for a response. For simplicity, however, we use the method below\r\n   */\r\n  private listenToBrowserOffline() {\r\n    window.addEventListener('offline', (e) => {\r\n      if (this.hasNotShowInternetDisconnect) {\r\n        this.hasNotShowInternetDisconnect = false;\r\n        this.peer.destroy();\r\n        PeerUtils.handlePeerError(\r\n          'Please check your Internet connection. Going back to Home page?'\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  private KeepSendDummyRequestToKeepServerAlive() {\r\n    const tenMinutesInMilliSeconds = 10 * 60 * 1000;\r\n    setInterval(\r\n      () => this.roomService.sendDummyRequestToKeepPeerServerAlive(),\r\n      tenMinutesInMilliSeconds\r\n    );\r\n  }\r\n\r\n  private connectToPeer(otherPeerId: any, getOldMessages: boolean) {\r\n    const conn = this.peer.connect(otherPeerId, {\r\n      reliable: true,\r\n      serialization: 'json',\r\n    });\r\n\r\n    if (getOldMessages === true) {\r\n      this.connToGetOldMessages = conn;\r\n    }\r\n\r\n    this.setupListenerForConnection(conn);\r\n  }\r\n\r\n  private connectToTheRestInRoom(exceptPeerId: any) {\r\n    this.peerIdsInRoomWhenFirstEnter.forEach((peerId) => {\r\n      if (peerId !== exceptPeerId) {\r\n        this.connectToPeer(peerId, false);\r\n      }\r\n    });\r\n  }\r\n\r\n  private setupListenerForConnection(conn: any) {\r\n    /**\r\n     * Event is raised when the connection between us and the other peer is opened.\r\n     * Note: We can send message to that peer now and they'll receive it. BUT\r\n     * if their connection to us hasn't opened, they cannot send message to us\r\n     */\r\n    conn.on(PeersConnection.Open, () => {\r\n      this.handleConnectionOpened(conn);\r\n    });\r\n\r\n    /**\r\n     * Subscribe to receive messages from other peers\r\n     */\r\n    conn.on(PeersConnection.Data, (message: Message) =>\r\n      this.handleMessageFromPeer(message, conn)\r\n    );\r\n\r\n    /**\r\n     * Event is raised when either us or other peers close the connection\r\n     */\r\n    conn.on(PeersConnection.Close, () => this.handleConnectionClose(conn));\r\n\r\n    /**\r\n     * Event is raised when there is an error\r\n     */\r\n    conn.on(PeersConnection.Error, (error: any) => {\r\n      console.error(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * This function is called when the connection between us and a peer is opened\r\n   */\r\n  private handleConnectionOpened(conn: any): void {\r\n    console.log('Connection to peer ' + conn.peer + ' opened :)');\r\n\r\n    const myName = this.nameService.getPeerName(this.peer.id);\r\n    this.broadcastService.sendNameAndCursorInfo(conn, myName);\r\n\r\n    // Only add this connection to our list when it has been opened!\r\n    Utils.addUniqueConnections([conn], this.connectionsIAmHolding);\r\n\r\n    const needToSendOldData = Utils.inArray(\r\n      conn.peer,\r\n      this.peerIdsToSendOldCrdtsAndOldChatMessages\r\n    );\r\n    if (needToSendOldData) {\r\n      // Broadcast new CRDTs, new chat messages and other changes to this new peer until we are sure he\r\n      // has received all oldCRDTs and has connected to the rest in room\r\n      this.newlyJoinedConnsNeededBroadcasting.push(conn);\r\n\r\n      this.broadcastService.sendOldData(\r\n        conn,\r\n        this.previousChatMessages,\r\n        this.editorService.getOldCRDTsAsSortedArray()\r\n      );\r\n\r\n      this.peerIdsToSendOldCrdtsAndOldChatMessages = this.peerIdsToSendOldCrdtsAndOldChatMessages.filter(\r\n        (id) => id !== conn.peer\r\n      );\r\n    }\r\n\r\n    const askForOldData = this.connToGetOldMessages === conn;\r\n    if (askForOldData) {\r\n      this.broadcastService.requestOldMessages(\r\n        conn,\r\n        MessageType.RequestOldCRDTsAndChatMessages\r\n      );\r\n    }\r\n\r\n    // If we just join room (this peer is here before us) and are ready (have received all CRDTs and Chat Messages)\r\n    const justJoinRoomAndAreReady =\r\n      this.peerIdsInRoomWhenFirstEnter.find((id) => id === conn.peer) &&\r\n      this.hasReceivedAllOldCRDTs &&\r\n      this.hasReceivedOldChatMessages;\r\n\r\n    if (justJoinRoomAndAreReady) {\r\n      conn.send(\r\n        new Message(null, MessageType.CanDisplayMeJustJoinRoom, this.peer.id)\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Is called when a peer send us a message\r\n   * Note: PeerUtils.announceInfo() is to notify code-editor.component.ts\r\n   */\r\n  private handleMessageFromPeer(message: Message, fromConn: any) {\r\n    if (this.needToBroadcastThisMessageToNewPeers(message)) {\r\n      this.broadcastService.broadcastMessageToNewPeers(\r\n        message,\r\n        this.newlyJoinedConnsNeededBroadcasting\r\n      );\r\n    }\r\n\r\n    switch (message.messageType) {\r\n      /**\r\n       * CRDT related requests\r\n       */\r\n      case MessageType.RemoteInsert:\r\n      case MessageType.RemoteRemove:\r\n      case MessageType.OldCRDTs:\r\n      case MessageType.OldCRDTsLastBatch:\r\n        // message.content will be empty when the peer send oldCRDT and the screen is empty\r\n        if (message.content !== '') {\r\n          this.handleCRDTMessage(message);\r\n        }\r\n        if (message.messageType === MessageType.OldCRDTsLastBatch) {\r\n          this.handleCRDTLastBatch(fromConn);\r\n        }\r\n        break;\r\n\r\n      case MessageType.RequestOldCRDTsAndChatMessages:\r\n        this.handleOldDataRequest(fromConn);\r\n        break;\r\n\r\n      // The peer we asked to send us oldCRDTs don't have them (They're new in room too)\r\n      case MessageType.CannotSendOldCRDTsOrOldChatMessages:\r\n        this.displayPeerCannotSendOldDataAndReload();\r\n        break;\r\n\r\n      /**\r\n       * Handle Chat messages related requests\r\n       */\r\n      case MessageType.ChatMessage:\r\n        this.storeAndDisplayChatMessage(message);\r\n        break;\r\n\r\n      case MessageType.OldChatMessages:\r\n        this.hasReceivedOldChatMessages = true;\r\n        this.storeAndDisplayOldChatMessages(message);\r\n        break;\r\n\r\n      /**\r\n       * Change Cursor, Select, Name messages\r\n       */\r\n      case MessageType.ChangeCursor:\r\n        this.updatePeerCursorPos(fromConn, message);\r\n        break;\r\n      case MessageType.ChangeSelect:\r\n        this.updatePeerSelectionPos(fromConn, message);\r\n        break;\r\n      case MessageType.CursorColor:\r\n        this.updatePeerColor(fromConn, message);\r\n        break;\r\n      case MessageType.Name:\r\n        this.addNewPeerName(fromConn, message);\r\n        break;\r\n\r\n      /**\r\n       * Other messages\r\n       */\r\n\r\n      // That peer has received all CRDTs. We can display their name now\r\n      case MessageType.CanDisplayMeJustJoinRoom:\r\n        // We will soon no longer need to broadcast that peer messages from other peers.\r\n        // We give that peer a few seconds to connect to the rest in room\r\n        this.stopBroadcastingAfter(\r\n          fromConn,\r\n          STOP_BROADCAST_AFTER_MILLI_SECONDS\r\n        );\r\n        this.alertPeerJoinRoom(fromConn);\r\n        break;\r\n\r\n      case MessageType.ChangeLanguage:\r\n        const languageIsChanged =\r\n          EditorService.currentLanguage !== message.content;\r\n        const isDefaultLanguage =\r\n          EditorService.currentLanguage === EditorService.defaultLanguage;\r\n        if (languageIsChanged || isDefaultLanguage) {\r\n          this.changeLanguageAndAlertThisChange(message);\r\n        }\r\n        break;\r\n\r\n      case MessageType.ChangeName:\r\n        this.changePeerNameAndAlertThisChange(message);\r\n        break;\r\n\r\n      default:\r\n        console.log(message);\r\n        throw new Error('Unhandled messageType');\r\n    }\r\n  }\r\n\r\n  private handleConnectionClose(conn: any) {\r\n    console.log(\r\n      'Connection to ' +\r\n        conn.peer +\r\n        ' is closed. It will be deleted in the connectionsIAmHolding list!'\r\n    );\r\n\r\n    this.stopBroadcastingAfter(conn, 0);\r\n\r\n    // Delete conn from connectionsIAmHolding\r\n    const index = this.connectionsIAmHolding.findIndex(\r\n      (connection) => connection === conn\r\n    );\r\n    this.connectionsIAmHolding.splice(index, 1);\r\n\r\n    // Delete the peer's nameColor\r\n    this.nameColorList = this.nameColorList.filter(\r\n      (x) => x.ofPeerId !== conn.peer\r\n    );\r\n\r\n    // IMPORTANT: Must be after delete peer's nameColor\r\n    // Delete the peer's cursor, select,...\r\n    this.peerIdJustLeft = conn.peer;\r\n    PeerUtils.announceInfo(AnnounceType.PeerLeft);\r\n\r\n    // Tell user that the peer just left room\r\n    const name = this.nameService.getPeerName(conn.peer);\r\n    Utils.alert(name + ' just left', AlertType.Warning);\r\n  }\r\n\r\n  //***************** Handle when join room *******************\r\n  private handleFirstJoinRoom(\r\n    peerIds: any[],\r\n    receivedAllMessages: boolean[],\r\n    cursorColors: number[],\r\n    cursorColor: number\r\n  ) {\r\n    // Set peers-in-room's cursor colors\r\n    for (let i = 0; i < peerIds.length; i++) {\r\n      this.cursorService.setPeerColor(peerIds[i], cursorColors[i]);\r\n    }\r\n\r\n    this.cursorService.setMyCursorColorAndPeerId(this.peer.id, cursorColor);\r\n\r\n    this.nameService.giveMyselfRandomName(this.peer.id);\r\n\r\n    this.nameColorList.push(\r\n      new NameColor(\r\n        this.nameService.getPeerName(this.peer.id) + ' (You)',\r\n        this.cursorService.getPeerColor(this.peer.id),\r\n        this.peer.id\r\n      )\r\n    );\r\n\r\n    PeerUtils.announceInfo(AnnounceType.NewPeerJoining);\r\n\r\n    const iAmTheFirstInRoom = peerIds.length === 0;\r\n    if (iAmTheFirstInRoom) {\r\n      console.log('I am the first one in this room');\r\n      this.hasReceivedAllOldCRDTs = true;\r\n      this.hasReceivedOldChatMessages = true;\r\n    } else {\r\n      this.peerIdsInRoomWhenFirstEnter = peerIds;\r\n      // We join an existing room => Pick a random peer to give us oldCRDTs, old chat messages\r\n      const peerIdPicked = this.pickReadyPeerToGetAllMessages(\r\n        peerIds,\r\n        receivedAllMessages\r\n      );\r\n      if (peerIdPicked === null) {\r\n        PeerUtils.handlePeerError(\r\n          'All people have left the room. Going back to Home page?'\r\n        );\r\n      } else {\r\n        this.connectToPeer(peerIdPicked, true);\r\n        // Handle edge case: That peer leaves before finishing sending us oldCRDTs and old chat messages\r\n        this.waitTillGotAllMessagesOrRefreshIfThatPeerLeft(peerIdPicked);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Take info from C# server to determine which peer has received all CRDTs and chat messages\r\n   * and which peer hasn't. Then pick a random, 'ready' peer\r\n   */\r\n  private pickReadyPeerToGetAllMessages(\r\n    peerIds: string[],\r\n    receivedAllMessages: boolean[]\r\n  ): string {\r\n    const candidatePeerIds = [];\r\n    for (let i = 0; i < receivedAllMessages.length; i++) {\r\n      if (receivedAllMessages[i]) {\r\n        candidatePeerIds.push(peerIds[i]);\r\n      }\r\n    }\r\n    if (candidatePeerIds.length === 0) {\r\n      return null;\r\n    } else {\r\n      const randIndex = Math.floor(Math.random() * candidatePeerIds.length);\r\n      return candidatePeerIds[randIndex];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If the peer hasn's finished sending us oldCRDTs, asking C# server\r\n   * every 3 seconds to see if that peer has left. Refresh if he has left to rejoin room\r\n   */\r\n  private waitTillGotAllMessagesOrRefreshIfThatPeerLeft(\r\n    peerIdToGetAllMessages: string\r\n  ) {\r\n    if (!this.hasReceivedAllOldCRDTs) {\r\n      this.roomService.getPeerIdsInRoom(this.roomName).subscribe((peerIds) => {\r\n        if (peerIds.findIndex((id) => id === peerIdToGetAllMessages) === -1) {\r\n          console.log(\r\n            'The peer we intended to get old messages from just left the room. Refreshing...'\r\n          );\r\n          window.location.reload(true);\r\n        } else {\r\n          const that = this;\r\n          setTimeout(function () {\r\n            that.waitTillGotAllMessagesOrRefreshIfThatPeerLeft(\r\n              peerIdToGetAllMessages\r\n            );\r\n          }, 3000);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private updateNameColorList(peerId, newName) {\r\n    const nameColorIndex = this.nameColorList.findIndex(\r\n      (elem) => elem.ofPeerId === peerId\r\n    );\r\n    this.nameColorList[nameColorIndex].name = newName;\r\n  }\r\n\r\n  //*************************************************************\r\n\r\n  createNewRoom() {\r\n    this.roomService\r\n      .joinNewRoom(this.peer.id)\r\n      .subscribe((data: EnterRoomInfo) => {\r\n        this.roomName = data.roomName;\r\n        EditorService.setSiteId(data.siteId);\r\n        this.handleFirstJoinRoom([], [], [], data.cursorColor);\r\n        PeerUtils.announceInfo(AnnounceType.RoomName);\r\n        PeerUtils.announceInfo(AnnounceType.ReadyToDisplayMonaco);\r\n      });\r\n  }\r\n\r\n  joinExistingRoom(roomName: string) {\r\n    this.roomName = roomName;\r\n    this.roomService.joinExistingRoom(this.peer.id, this.roomName).subscribe(\r\n      (data: EnterRoomInfo) => {\r\n        if (data.siteId === -1) {\r\n          PeerUtils.handlePeerError(\r\n            'Room not exists! Going back to Home page?'\r\n          );\r\n        }\r\n        EditorService.setSiteId(data.siteId);\r\n        // SQL server doesn't have bool. We have to use 1 and 0. Mapping 1 and 0 back to bool\r\n        const boolArrHasReceivedAllMessages = data.hasReceivedAllMessages.map(\r\n          (num) => (num === 0 ? false : true)\r\n        );\r\n        this.handleFirstJoinRoom(\r\n          data.peerIds,\r\n          boolArrHasReceivedAllMessages,\r\n          data.cursorColors,\r\n          data.cursorColor\r\n        );\r\n      },\r\n      (error) => {\r\n        console.error(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  getPeerIdJustLeft(): string {\r\n    return this.peerIdJustLeft;\r\n  }\r\n\r\n  getAllMessages(): any[] {\r\n    return this.previousChatMessages;\r\n  }\r\n\r\n  getSelectionChangeInfo(): SelectionChangeInfo {\r\n    return this.selectionChangeInfo;\r\n  }\r\n\r\n  getCursorChangeInfo(): CursorChangeInfo {\r\n    return this.cursorChangeInfo;\r\n  }\r\n\r\n  getReceivedRemoteCrdts(): CRDT[] {\r\n    return this.receivedRemoteCrdts;\r\n  }\r\n\r\n  getPeerIdWhoSentCrdts(): string {\r\n    return this.peerIdWhoSentCrdts;\r\n  }\r\n\r\n  getMyPeerId(): string {\r\n    return this.peer.id;\r\n  }\r\n\r\n  getRoomName(): string {\r\n    return this.roomName;\r\n  }\r\n\r\n  getAllPeerIds(): string[] {\r\n    const peerIdsInRoom = this.connectionsIAmHolding.map((conn) => conn.peer);\r\n    if (this.peer) {\r\n      peerIdsInRoom.push(this.peer.id);\r\n    }\r\n    return peerIdsInRoom;\r\n  }\r\n\r\n  getNameColorList(): NameColor[] {\r\n    return this.nameColorList;\r\n  }\r\n\r\n  sendMessage(content: string) {\r\n    this.broadcastService.broadcastChatMessage(\r\n      content,\r\n      this.connectionsIAmHolding,\r\n      this.previousChatMessages\r\n    );\r\n  }\r\n\r\n  broadcastChangeCursorPos(event: any) {\r\n    this.broadcastService.broadcastChangeCursorPos(\r\n      event,\r\n      this.connectionsIAmHolding\r\n    );\r\n  }\r\n\r\n  broadcastChangeSelectionPos(event: any) {\r\n    this.broadcastService.broadcastChangeSelectionPos(\r\n      event,\r\n      this.connectionsIAmHolding\r\n    );\r\n  }\r\n\r\n  broadcastChangeLanguage() {\r\n    this.broadcastService.broadcastChangeLanguage(this.connectionsIAmHolding);\r\n  }\r\n\r\n  broadcastChangeName(newName: string) {\r\n    this.broadcastService.broadcastChangeName(\r\n      this.connectionsIAmHolding,\r\n      newName\r\n    );\r\n  }\r\n\r\n  /**\r\n   * When a peer just join room and ask us to send OldCRDTs, he is not yet connected to\r\n   * the rest in room. If any peer in room send a message, he will not receive it.\r\n   * To fix this problem, we broadcast any new messages to him.\r\n   *\r\n   * This function is called when that new peer is almost 'ready'. He has received oldCRDTs\r\n   * and are connecting to the rest in room. We allow him a few seconds before we stop broadcasting.\r\n   *\r\n   * Note: Of course we still broadcast message from us to him.\r\n   */\r\n  stopBroadcastingAfter(conn: any, milliSecondsLater: number) {\r\n    const that = this;\r\n    setTimeout(function () {\r\n      that.newlyJoinedConnsNeededBroadcasting = that.newlyJoinedConnsNeededBroadcasting.filter(\r\n        (connection) => connection.peer !== conn.peer\r\n      );\r\n    }, milliSecondsLater);\r\n  }\r\n\r\n  getMyName(): string {\r\n    return this.nameService.getPeerName(this.peer.id);\r\n  }\r\n\r\n  changeMyName(newName: string) {\r\n    this.nameService.setPeerName(this.peer.id, newName);\r\n    this.updateNameColorList(this.peer.id, newName + ' (You)');\r\n    PeerUtils.announceInfo(AnnounceType.ChangeMyName);\r\n  }\r\n\r\n  private handleCRDTMessage(message: Message) {\r\n    const crdts = CrdtUtils.stringToCRDTArr(\r\n      message.content,\r\n      BroadcastService.CRDTDelimiter\r\n    );\r\n    this.receivedRemoteCrdts = crdts;\r\n    this.peerIdWhoSentCrdts = message.fromPeerId;\r\n    if (message.messageType === MessageType.RemoteInsert) {\r\n      PeerUtils.announceInfo(AnnounceType.RemoteInsert);\r\n    } else if (message.messageType === MessageType.RemoteRemove) {\r\n      PeerUtils.announceInfo(AnnounceType.RemoteRemove);\r\n    } else {\r\n      PeerUtils.announceInfo(AnnounceType.RemoteAllMessages);\r\n    }\r\n  }\r\n\r\n  private handleCRDTLastBatch(fromConn: any) {\r\n    this.hasReceivedAllOldCRDTs = true;\r\n    PeerUtils.announceInfo(AnnounceType.ReadyToDisplayMonaco);\r\n    this.connectToTheRestInRoom(this.connToGetOldMessages.peer);\r\n    // Tell C# Server I have received all CRDTs\r\n    this.roomService.markPeerReceivedAllMessages(this.peer.id);\r\n    // Send cursor + selection change info\r\n    this.broadcastService.sendCursorInfo(fromConn);\r\n    // Tell that user they can display us just join room now\r\n    fromConn.send(\r\n      new Message(null, MessageType.CanDisplayMeJustJoinRoom, this.peer.id)\r\n    );\r\n  }\r\n\r\n  private handleOldDataRequest(fromConn: any) {\r\n    const canSend =\r\n      this.hasReceivedAllOldCRDTs && this.hasReceivedOldChatMessages;\r\n    if (!canSend) {\r\n      this.broadcastService.tellPeerCannotSendOldData(fromConn);\r\n    } else {\r\n      // Only send when connection has opened\r\n      if (\r\n        !PeerUtils.connectionHasOpened(fromConn, this.connectionsIAmHolding)\r\n      ) {\r\n        this.peerIdsToSendOldCrdtsAndOldChatMessages.push(fromConn.peer); // Send when opened\r\n      } else {\r\n        // Broadcast new CRDTs, new chat messages to this new peer until we are sure he\r\n        // has received all oldCRDTs and has connected to the rest in room\r\n        this.newlyJoinedConnsNeededBroadcasting.push(fromConn);\r\n\r\n        this.broadcastService.sendOldData(\r\n          fromConn,\r\n          this.previousChatMessages,\r\n          this.editorService.getOldCRDTsAsSortedArray()\r\n        ); // Send now\r\n      }\r\n    }\r\n  }\r\n\r\n  private displayPeerCannotSendOldDataAndReload() {\r\n    Utils.alert(\r\n      'The peer we picked to send us old messages cannot send. Reloading...',\r\n      AlertType.Error\r\n    );\r\n    window.location.reload(true);\r\n  }\r\n\r\n  private storeAndDisplayChatMessage(message: Message) {\r\n    PeerUtils.addUniqueMessages([message], this.previousChatMessages);\r\n    PeerUtils.announceInfo(AnnounceType.UpdateChatMessages);\r\n  }\r\n\r\n  private storeAndDisplayOldChatMessages(message: Message) {\r\n    const messages: Message[] = JSON.parse(message.content);\r\n    PeerUtils.addUniqueMessages(messages, this.previousChatMessages);\r\n    PeerUtils.announceInfo(AnnounceType.UpdateChatMessages);\r\n  }\r\n\r\n  private updatePeerCursorPos(fromConn: any, message: Message) {\r\n    const cursorEvent = JSON.parse(message.content);\r\n    this.cursorChangeInfo = new CursorChangeInfo(\r\n      cursorEvent.position.lineNumber,\r\n      cursorEvent.position.column,\r\n      fromConn.peer,\r\n      cursorEvent.source,\r\n      cursorEvent.reason\r\n    );\r\n    PeerUtils.announceInfo(AnnounceType.CursorChange);\r\n  }\r\n\r\n  private updatePeerSelectionPos(fromConn: any, message: Message) {\r\n    const selectEvent = JSON.parse(message.content);\r\n    this.selectionChangeInfo = new SelectionChangeInfo(\r\n      selectEvent.selection.startLineNumber,\r\n      selectEvent.selection.startColumn,\r\n      selectEvent.selection.endLineNumber,\r\n      selectEvent.selection.endColumn,\r\n      fromConn.peer,\r\n      selectEvent.source,\r\n      selectEvent.reason\r\n    );\r\n    PeerUtils.announceInfo(AnnounceType.SelectionChange);\r\n  }\r\n\r\n  private updatePeerColor(fromConn: any, message: Message) {\r\n    const color = Number.parseInt(message.content, 10);\r\n    this.cursorService.setPeerColor(fromConn.peer, color);\r\n    if (this.nameService.getPeerName(fromConn.peer)) {\r\n      // Have both name and color => Add to list\r\n      Utils.addUniqueNameColor(\r\n        new NameColor(\r\n          this.nameService.getPeerName(fromConn.peer),\r\n          this.cursorService.getPeerColor(fromConn.peer),\r\n          fromConn.peer\r\n        ),\r\n        this.nameColorList\r\n      );\r\n    }\r\n  }\r\n\r\n  private addNewPeerName(fromConn: any, message: Message) {\r\n    const peerName = message.content;\r\n    this.nameService.setPeerName(fromConn.peer, peerName);\r\n    if (this.cursorService.getPeerColor(fromConn.peer)) {\r\n      // Have both name and color => Add to list\r\n      Utils.addUniqueNameColor(\r\n        new NameColor(\r\n          this.nameService.getPeerName(fromConn.peer),\r\n          this.cursorService.getPeerColor(fromConn.peer),\r\n          fromConn.peer\r\n        ),\r\n        this.nameColorList\r\n      );\r\n    }\r\n  }\r\n\r\n  private alertPeerJoinRoom(fromConn: any) {\r\n    PeerUtils.announceInfo(AnnounceType.NewPeerJoining);\r\n    Utils.alert(\r\n      this.nameService.getPeerName(fromConn.peer) + ' just joined room',\r\n      AlertType.Success\r\n    );\r\n  }\r\n\r\n  private changeLanguageAndAlertThisChange(message: Message) {\r\n    EditorService.currentLanguage = message.content;\r\n    PeerUtils.announceInfo(AnnounceType.ChangeLanguage);\r\n    Utils.alert(\r\n      'Language has been changed to ' + Utils.getLanguageName(message.content),\r\n      AlertType.Message\r\n    );\r\n  }\r\n\r\n  private changePeerNameAndAlertThisChange(message: Message) {\r\n    const fromPeerId = message.fromPeerId;\r\n    const oldName = this.nameService.getPeerName(fromPeerId);\r\n    const newName = message.content;\r\n    if (oldName !== newName) {\r\n      this.nameService.setPeerName(fromPeerId, newName);\r\n      this.updateNameColorList(fromPeerId, newName);\r\n\r\n      PeerUtils.announceInfo(AnnounceType.ChangePeerName);\r\n      Utils.alert(\r\n        oldName + ' has changed their name to ' + newName,\r\n        AlertType.Message\r\n      );\r\n    }\r\n  }\r\n\r\n  private needToBroadcastThisMessageToNewPeers(message: Message): boolean {\r\n    return (\r\n      message.messageType === MessageType.RemoteInsert ||\r\n      message.messageType === MessageType.RemoteRemove ||\r\n      message.messageType === MessageType.ChatMessage ||\r\n      message.messageType === MessageType.ChangeLanguage ||\r\n      message.messageType === MessageType.ChangeName\r\n    );\r\n  }\r\n\r\n  /**\r\n   *   Broadcast CRDTs to all peers when local insert / remove\r\n   */\r\n  private subscribeToEditorServiceEvents() {\r\n    this.editorService.crdtEvent.subscribe((insert: boolean) => {\r\n      if (insert) {\r\n        this.broadcastService.broadcastInsertOrRemove(\r\n          this.editorService.getCrdtsToTransfer(),\r\n          true,\r\n          this.connectionsIAmHolding\r\n        );\r\n      } else {\r\n        this.broadcastService.broadcastInsertOrRemove(\r\n          this.editorService.getCrdtsToTransfer(),\r\n          false,\r\n          this.connectionsIAmHolding\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { retry, catchError } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport { EnterRoomInfo } from '../shared/EnterRoomInfo';\r\nimport { Utils } from '../shared/Utils';\r\nimport { AlertType } from '../shared/AlertType';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\n/**\r\n * This class communicate with our C# API\r\n */\r\nexport class RoomService {\r\n  apiURL = environment.apiUrl + 'Room/';\r\n  peerServerUrl = 'https://' + environment.peerServerHost;\r\n  private HTTP_OPTIONS = {\r\n    headers: new HttpHeaders({\r\n      'Content-Type': 'application/json',\r\n    }),\r\n  };\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  joinNewRoom(peerId: string): Observable<EnterRoomInfo> {\r\n    return this.http\r\n      .get<EnterRoomInfo>(this.apiURL + 'JoinNewRoom?peerId=' + peerId)\r\n      .pipe(retry(1), catchError(this.handleError));\r\n  }\r\n\r\n  joinExistingRoom(\r\n    peerId: string,\r\n    roomName: string\r\n  ): Observable<EnterRoomInfo> {\r\n    return this.http\r\n      .get<EnterRoomInfo>(\r\n        this.apiURL +\r\n          'JoinExistingRoom?peerId=' +\r\n          peerId +\r\n          '&roomName=' +\r\n          roomName\r\n      )\r\n      .pipe(retry(1), catchError(this.handleError));\r\n  }\r\n\r\n  getPeerIdsInRoom(roomName: string): Observable<string[]> {\r\n    return this.http\r\n      .get<string[]>(this.apiURL + 'GetPeerIdsInRoom?roomName=' + roomName)\r\n      .pipe(retry(1), catchError(this.handleError));\r\n  }\r\n\r\n  markPeerReceivedAllMessages(peerId: string) {\r\n    return this.http.post<any>(this.apiURL + 'MarkPeerReceivedAllMessages', { val: peerId }, this.HTTP_OPTIONS)\r\n      .subscribe(data => { }, error => {\r\n        Utils.alert(\r\n          'Something went wrong. Please join room again!',\r\n          AlertType.Error\r\n        );\r\n      });\r\n  }\r\n\r\n  sendDummyRequestToKeepPeerServerAlive(): void {\r\n    this.http.get(this.peerServerUrl).subscribe(() => {});\r\n  }\r\n\r\n  private handleError(error) {\r\n    let errorMessage = '';\r\n    if (error.error instanceof ErrorEvent) {\r\n      errorMessage = error.error.message;\r\n    } else {\r\n      errorMessage = 'Error from serve!';\r\n    }\r\n    window.alert(errorMessage);\r\n    return throwError(error);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable  } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\n/**\r\n * This class communicate with our C# API\r\n */\r\nexport class TurnServerService {\r\n  private apiURL = environment.apiUrl + 'turnServerToken/';\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getTurnStunToken(): Observable<any> {\r\n      return this.http.get<any>(this.apiURL)\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport { retry, catchError } from 'rxjs/operators';\r\nimport { throwError } from 'rxjs';\r\nimport { Utils } from '../shared/Utils';\r\nimport { AlertType } from '../shared/AlertType';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class UtilsService {\r\n  private apiURL = environment.apiUrl + 'Utilities/';\r\n  private HTTP_OPTIONS = {\r\n    headers: new HttpHeaders({\r\n      'Content-Type': 'application/json',\r\n    }),\r\n  };\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  sendEmail(email) {\r\n    console.log(email);\r\n    return this.http\r\n     .post<any>(this.apiURL + 'SendEmail', email, this.HTTP_OPTIONS)\r\n     .subscribe(\r\n       (data) => {\r\n         Utils.alert('Submit successfully', AlertType.Success);\r\n       },\r\n       (error) => {\r\n         Utils.alert(\r\n           'Something went wrong. Please try again',\r\n           AlertType.Error\r\n         );\r\n       }\r\n     );\r\n  }\r\n\r\n  sendFeedbackForm(form) {\r\n    return this.http\r\n      .post<any>(this.apiURL + 'SendFeedbackForm', form, this.HTTP_OPTIONS)\r\n      .subscribe((data) => {\r\n        console.log(data);\r\n      });\r\n  }\r\n}\r\n","export enum AlertType {\r\n  Success = 0,\r\n  Warning = 1,\r\n  Error = 2,\r\n  Message = 3\r\n}\r\n","export interface IsObject {\r\n  compareTo: (other: this) => number;\r\n  toString: () => string;\r\n}\r\n\r\n/**\r\n * Order-statistic, balanced BST. This BST allows NO DUPLICATE.\r\n * Return -1 if insert duplicate element!\r\n */\r\nexport class BalancedBST<T extends IsObject> {\r\n  private root: Node<T>;\r\n  private size: number;\r\n\r\n  constructor() {\r\n    this.root = null;\r\n    this.size = 0;\r\n  }\r\n\r\n  /**\r\n   * Return inserted index\r\n   */\r\n  insert(data: T): number {\r\n    if (this.isEmpty()) {\r\n      this.root = new Node<T>(data, null);\r\n      this.size++;\r\n      return 0;\r\n    }\r\n\r\n    this.size++;\r\n    let node = this.root;\r\n    while (true) {\r\n      if (data.compareTo(node.data) === 0) {\r\n        // No duplicate elements\r\n        return -1;\r\n      } else if (data.compareTo(node.data) < 0) {\r\n        // Go left\r\n        if (node.left === null) {\r\n          node.left = new Node<T>(data, node);\r\n          this.incrementAllAncestorsSize(node.left);\r\n          this.goUpRebalanceAndUpdateHeightBFAndSubtreeSize(node);\r\n          return this.getIndex(data);\r\n        } else {\r\n          node = node.left;\r\n        }\r\n      } else {\r\n        // Go right\r\n        if (node.right === null) {\r\n          node.right = new Node<T>(data, node);\r\n          this.incrementAllAncestorsSize(node.right);\r\n          this.goUpRebalanceAndUpdateHeightBFAndSubtreeSize(node);\r\n          return this.getIndex(data);\r\n        } else {\r\n          node = node.right;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return removed index\r\n   */\r\n  remove(data: T): number {\r\n    const nodeToRemove = this.find(data);\r\n    if (!nodeToRemove) {\r\n      return -1;\r\n    }\r\n    const returnIndex = this.getIndex(data);\r\n    this.size--;\r\n    this.removeHelper(nodeToRemove);\r\n    return returnIndex;\r\n  }\r\n\r\n  private removeHelper(nodeToRemove: Node<T>) {\r\n    // if nodeToRemove is a leaf\r\n    if (!nodeToRemove.left && !nodeToRemove.right) {\r\n      // and it is also the root\r\n      if (!nodeToRemove.parent) {\r\n        this.root = null;\r\n      } else {\r\n        this.decrementAllAncestorsSize(nodeToRemove);\r\n        const parent = nodeToRemove.parent;\r\n        if (parent.left === nodeToRemove) {\r\n          parent.left = null;\r\n        } else {\r\n          parent.right = null;\r\n        }\r\n        this.goUpRebalanceAndUpdateHeightBFAndSubtreeSize(parent);\r\n      }\r\n    } else if (nodeToRemove.left && nodeToRemove.right) {\r\n      // If has 2 children\r\n      // Find left most node in right subtree\r\n      let temp = nodeToRemove.right;\r\n      while (temp.left) {\r\n        temp = temp.left;\r\n      }\r\n      // temp is the left most node\r\n      nodeToRemove.data = temp.data;\r\n      this.removeHelper(temp);\r\n    } else {\r\n      // It has 1 children\r\n      const parent = nodeToRemove.parent;\r\n      // If that is left child\r\n      if (nodeToRemove.left) {\r\n        // If nodeToRemove is the root\r\n        if (!parent) {\r\n          nodeToRemove.left.parent = null;\r\n          this.root = nodeToRemove.left;\r\n        } else {\r\n          this.decrementAllAncestorsSize(nodeToRemove);\r\n          if (parent.left === nodeToRemove) {\r\n            parent.left = nodeToRemove.left;\r\n            nodeToRemove.left.parent = parent;\r\n          } else {\r\n            parent.right = nodeToRemove.left;\r\n            nodeToRemove.left.parent = parent;\r\n          }\r\n          this.goUpRebalanceAndUpdateHeightBFAndSubtreeSize(parent);\r\n        }\r\n      } else {\r\n        // It has right child\r\n        // If nodeToRemove is the root\r\n        if (!parent) {\r\n          nodeToRemove.right.parent = null;\r\n          this.root = nodeToRemove.right;\r\n        } else {\r\n          this.decrementAllAncestorsSize(nodeToRemove);\r\n          if (parent.left === nodeToRemove) {\r\n            parent.left = nodeToRemove.right;\r\n            nodeToRemove.right.parent = parent;\r\n          } else {\r\n            parent.right = nodeToRemove.right;\r\n            nodeToRemove.right.parent = parent;\r\n          }\r\n          this.goUpRebalanceAndUpdateHeightBFAndSubtreeSize(parent);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Find node with the specified data\r\n   */\r\n  private find(data: T): Node<T> {\r\n    if (this.isEmpty()) {\r\n      return null;\r\n    }\r\n    let node = this.root;\r\n    while (node) {\r\n      if (data.compareTo(node.data) === 0) {\r\n        return node;\r\n      } else if (data.compareTo(node.data) < 0) {\r\n        node = node.left;\r\n      } else {\r\n        node = node.right;\r\n      }\r\n    }\r\n    // Not found\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get index of the node with node.data === data\r\n   */\r\n  getIndex(data: T): number {\r\n    if (this.isEmpty()) {\r\n      return -1;\r\n    }\r\n    let node = this.root;\r\n    let index = 0;\r\n    while (node) {\r\n      if (data.compareTo(node.data) === 0) {\r\n        // subtree of a leaf has size 0. subtree of null has size -1\r\n        const leftSubtreeSize = node.left ? node.left.subtreeSize : -1;\r\n        index += leftSubtreeSize + 1;\r\n        return index;\r\n      } else if (data.compareTo(node.data) < 0) {\r\n        node = node.left;\r\n      } else {\r\n        const leftSubtreeSize = node.left ? node.left.subtreeSize : -1;\r\n        index += leftSubtreeSize + 2;\r\n        node = node.right;\r\n      }\r\n    }\r\n    // Not found\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Get data at index\r\n   */\r\n  getDataAt(index: number): T {\r\n    if (this.isEmpty() || index >= this.size) {\r\n      return null;\r\n    }\r\n\r\n    let node = this.root;\r\n    while (node) {\r\n      const leftSubtreeSize = node.left ? node.left.subtreeSize : -1;\r\n      if (index === leftSubtreeSize + 1) {\r\n        return node.data;\r\n      } else if (index <= leftSubtreeSize) {\r\n        node = node.left;\r\n      } else {\r\n        index -= leftSubtreeSize + 2;\r\n        node = node.right;\r\n      }\r\n    }\r\n    // Weird. Something went wrong\r\n    throw new Error('Something went wrong when getDataAt(index)');\r\n  }\r\n\r\n  toSortedArray(): T[] {\r\n    const resArr: T[] = [];\r\n    this.toSortedArrayInOrder(resArr, this.root);\r\n    return resArr;\r\n  }\r\n\r\n  private toSortedArrayInOrder(resArr: T[], curNode: Node<T>) {\r\n    if (!curNode) {\r\n      return;\r\n    }\r\n    this.toSortedArrayInOrder(resArr, curNode.left);\r\n    resArr.push(curNode.data);\r\n    this.toSortedArrayInOrder(resArr, curNode.right);\r\n  }\r\n\r\n  /**\r\n   * AVL Tree\r\n   */\r\n  goUpRebalanceAndUpdateHeightBFAndSubtreeSize(node: Node<T>): void {\r\n    this.updateHeightBFAndSubtreeSize(node);\r\n\r\n    const nodeIsRoot = node === this.root;\r\n\r\n    // Rotate if needed\r\n\r\n    // 1.Right heavy: Either RR or RL\r\n    if (node.balancedFactor === 2) {\r\n      // Must be RR\r\n      if (node.bfRight() >= 0) {\r\n        node = this.leftRotate(node);\r\n      } else {\r\n        // Must be RL\r\n        this.rightRotate(node.right);\r\n        node = this.leftRotate(node);\r\n      }\r\n    }\r\n    // 2.Left heavy: Either LL or LR\r\n    else if (node.balancedFactor === -2) {\r\n      // Must be LL\r\n      if (node.bfLeft() <= 0) {\r\n        node = this.rightRotate(node);\r\n      } else {\r\n        this.leftRotate(node.left);\r\n        node = this.rightRotate(node);\r\n      }\r\n    }\r\n\r\n    // If we've reached the root\r\n    if (nodeIsRoot) {\r\n      this.root = node;\r\n      this.updateHeightBFAndSubtreeSize(this.root);\r\n      return;\r\n    } else {\r\n      // Go up and fix parent node\r\n      this.goUpRebalanceAndUpdateHeightBFAndSubtreeSize(node.parent);\r\n    }\r\n  }\r\n\r\n  updateHeightBFAndSubtreeSize(node: Node<T>): void {\r\n    node.height = Math.max(node.heightLeft(), node.heightRight()) + 1;\r\n    node.balancedFactor = node.heightRight() - node.heightLeft();\r\n    node.subtreeSize = node.subtreeSizeLeft() + node.subtreeSizeRight() + 2;\r\n  }\r\n\r\n  leftRotate(node: Node<T>): Node<T> {\r\n    const nodeParent = node.parent;\r\n    const x = node;\r\n    const y = node.right;\r\n\r\n    x.right = y.left;\r\n    if (y.left) {\r\n      y.left.parent = x;\r\n    }\r\n\r\n    x.parent = y;\r\n    y.left = x;\r\n\r\n    y.parent = nodeParent;\r\n    if (nodeParent) {\r\n      if (nodeParent.left === x) {\r\n        nodeParent.left = y;\r\n      } else {\r\n        nodeParent.right = y;\r\n      }\r\n    }\r\n\r\n    this.updateHeightBFAndSubtreeSize(x);\r\n    this.updateHeightBFAndSubtreeSize(y);\r\n\r\n    return y;\r\n  }\r\n\r\n  rightRotate(node: Node<T>): Node<T> {\r\n    const nodeParent = node.parent;\r\n    const x = node;\r\n    const y = node.left;\r\n\r\n    x.left = y.right;\r\n    if (y.right) {\r\n      y.right.parent = x;\r\n    }\r\n\r\n    y.right = x;\r\n    x.parent = y;\r\n\r\n    y.parent = nodeParent;\r\n    if (nodeParent) {\r\n      if (nodeParent.left === x) {\r\n        nodeParent.left = y;\r\n      } else {\r\n        nodeParent.right = y;\r\n      }\r\n    }\r\n\r\n    this.updateHeightBFAndSubtreeSize(x);\r\n    this.updateHeightBFAndSubtreeSize(y);\r\n\r\n    return y;\r\n  }\r\n\r\n  isBalance(): boolean {\r\n    if (this.isEmpty()) {\r\n      return true;\r\n    }\r\n    const q = new Queue<Node<T>>();\r\n    q.enqueue(this.root);\r\n    while (!q.isEmpty()) {\r\n      const node = q.dequeue();\r\n      if (node.balancedFactor < -1 || node.balancedFactor > 1) {\r\n        return false;\r\n      }\r\n      if (node.left) {\r\n        q.enqueue(node.left);\r\n      }\r\n      if (node.right) {\r\n        q.enqueue(node.right);\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *   Note: Slow, for testing purposes only. If you need height, simply return this.root.height + 1\r\n   */\r\n  getHeight(): number {\r\n    if (this.isEmpty()) {\r\n      return 0;\r\n    }\r\n    return this.findMaximumDepth(this.root);\r\n  }\r\n\r\n  private findMaximumDepth(node: Node<T>): number {\r\n    if (!node) {\r\n      return -1;\r\n    }\r\n    return (\r\n      Math.max(\r\n        this.findMaximumDepth(node.left),\r\n        this.findMaximumDepth(node.right)\r\n      ) + 1\r\n    );\r\n  }\r\n\r\n  getSize(): number {\r\n    return this.size;\r\n  }\r\n\r\n  isEmpty(): boolean {\r\n    if ((this.size === 0) !== (this.root === null)) {\r\n      throw new Error('Tree size and root value are not on the same page!');\r\n    }\r\n    return this.size === 0;\r\n  }\r\n\r\n  /**\r\n   * For testing purposes only\r\n   */\r\n  inorderToString(): string {\r\n    const res: string[] = [];\r\n    this.inorderHelper(this.root, res);\r\n    let stringRes = '';\r\n    for (let i = 0; i < res.length; i++) {\r\n      stringRes = stringRes + res[i] + '\\n';\r\n    }\r\n    return stringRes;\r\n  }\r\n\r\n  private inorderHelper(node: Node<T>, res: string[]): void {\r\n    if (!node) {\r\n      return;\r\n    }\r\n    this.inorderHelper(node.left, res);\r\n    res.push(node.data.toString());\r\n    this.inorderHelper(node.right, res);\r\n  }\r\n\r\n  /**\r\n   * For testing purposes only\r\n   */\r\n  printLevel(): void {\r\n    if (this.isEmpty()) {\r\n      return;\r\n    }\r\n    let res = '';\r\n    const q = new Queue<Node<T>>();\r\n    q.enqueue(this.root);\r\n    while (!q.isEmpty()) {\r\n      const node = q.dequeue();\r\n      res = res + node.data.toString() + '(Size:' + node.subtreeSize + ') ';\r\n      if (node.left !== null) {\r\n        q.enqueue(node.left);\r\n      }\r\n      if (node.right !== null) {\r\n        q.enqueue(node.right);\r\n      }\r\n    }\r\n    console.log('Print level by level: ' + res);\r\n  }\r\n\r\n  private incrementAllAncestorsSize(node: Node<T>): void {\r\n    if (node === null) {\r\n      throw new Error(\r\n        'Error: You should not call incrementAllAncestorsSize on a null node'\r\n      );\r\n    }\r\n    while (node.parent !== null) {\r\n      node = node.parent;\r\n      node.subtreeSize++;\r\n    }\r\n  }\r\n\r\n  private decrementAllAncestorsSize(node: Node<T>): void {\r\n    if (node === null) {\r\n      throw new Error(\r\n        'Error: You should not call incrementAllAncestorsSize on a null node'\r\n      );\r\n    }\r\n    while (node.parent !== null) {\r\n      node = node.parent;\r\n      node.subtreeSize--;\r\n    }\r\n  }\r\n}\r\n\r\nclass Node<T> {\r\n  data: T;\r\n  subtreeSize: number;\r\n  left: Node<T>;\r\n  right: Node<T>;\r\n  parent: Node<T>;\r\n  height: number;\r\n  balancedFactor: number;\r\n  constructor(data: T, parent: Node<T>) {\r\n    this.data = data;\r\n    this.left = null;\r\n    this.right = null;\r\n    this.parent = parent;\r\n    this.subtreeSize = 0;\r\n    this.height = 0;\r\n    this.balancedFactor = 0;\r\n  }\r\n\r\n  heightLeft(): number {\r\n    return this.left ? this.left.height : -1;\r\n  }\r\n\r\n  heightRight(): number {\r\n    return this.right ? this.right.height : -1;\r\n  }\r\n\r\n  bfLeft(): number {\r\n    return this.left ? this.left.balancedFactor : 0;\r\n  }\r\n\r\n  bfRight(): number {\r\n    return this.right ? this.right.balancedFactor : 0;\r\n  }\r\n\r\n  subtreeSizeLeft(): number {\r\n    return this.left ? this.left.subtreeSize : -1;\r\n  }\r\n\r\n  subtreeSizeRight(): number {\r\n    return this.right ? this.right.subtreeSize : -1;\r\n  }\r\n}\r\n\r\n/**\r\n * A naive implementation of Queue. For testing purposes only\r\n */\r\nclass Queue<T> {\r\n  private list: T[];\r\n  constructor() {\r\n    this.list = new Array<T>();\r\n  }\r\n  isEmpty(): boolean {\r\n    return this.list.length === 0;\r\n  }\r\n  enqueue(data: T): void {\r\n    this.list.push(data);\r\n  }\r\n  dequeue(): T {\r\n    if (this.isEmpty()) {\r\n      throw new Error('The queue is empty!');\r\n    }\r\n    return this.list.shift();\r\n  }\r\n}\r\n","// IMPORTANT: Start CRDT arr with <1, ServerID> and end with <INF, ServerID>. ServerID = 0\r\n//                                 ^ (not 0)\r\n// Start CRDT arr with <0, ServerID> will make the program crash in some edge cases\r\n\r\nimport { CustomNumber } from './CustomNumber';\r\nimport { IsObject } from './BalancedBST';\r\n\r\n/**\r\n * Each CRDT object will correspond to 1 character in the text editor\r\n * A sorted (increasing order) CRDT array will correspond to the whole text\r\n */\r\nexport class CRDT implements IsObject {\r\n  ch: string;\r\n  id: CRDTId;\r\n\r\n  constructor(character: string, id: CRDTId) {\r\n    this.ch = character;\r\n    this.id = id;\r\n  }\r\n\r\n  /**\r\n   * Return CRDT object from toString() version of CRDT\r\n   */\r\n  static parse(crdtStr: string): CRDT {\r\n    let tokens = crdtStr.split('');\r\n    tokens.shift();\r\n\r\n    // Get char\r\n    const ch = String(tokens.pop());\r\n\r\n    // Get clock value\r\n    const clockArr = [];\r\n    let i = tokens.length - 2;\r\n    while (i > 0) {\r\n      if (tokens[i] === '>') {\r\n        break;\r\n      }\r\n\r\n      clockArr.unshift(tokens[i]);\r\n      i--;\r\n    }\r\n\r\n    const clockValue = Number(clockArr.join(''));\r\n    tokens = tokens.slice(0, i + 1);\r\n\r\n    // Get identifiers\r\n    const identifiers = new Array<Identifier>();\r\n    let beg = 0;\r\n    let end = 0;\r\n    while (end < tokens.length) {\r\n      if (tokens[end] === '>') {\r\n        const tempArr = tokens.slice(beg + 1, end);\r\n        const identifierStr = tempArr.join('');\r\n        const identifierNums = identifierStr.split(',');\r\n\r\n        const identifier = new Identifier(\r\n          Number(identifierNums[0]),\r\n          Number(identifierNums[1])\r\n        );\r\n\r\n        identifiers.push(identifier);\r\n\r\n        end++;\r\n        beg = end;\r\n      }\r\n\r\n      end++;\r\n    }\r\n\r\n    const crdtId = new CRDTId(identifiers, clockValue);\r\n    const crdt = new CRDT(ch, crdtId);\r\n\r\n    return crdt;\r\n  }\r\n\r\n  toString(): string {\r\n    return this.id.toString() + this.ch;\r\n  }\r\n\r\n  // Compare CRDT by its id\r\n  compareTo(other: CRDT): number {\r\n    return this.id.compareTo(other.id);\r\n  }\r\n}\r\n\r\n/**\r\n * CRDTId is equivalent to position identifier in Logoot paper page 4 definition 1\r\n */\r\nexport class CRDTId {\r\n  arr: Identifier[]; // arr is equivalent to position in Logoot paper page 4 definition 1 line 3\r\n  clockValue: number;\r\n\r\n  constructor(identifierArr: Identifier[], clock: number) {\r\n    this.arr = identifierArr;\r\n    this.clockValue = clock;\r\n  }\r\n\r\n  static deepCopy(crdtId: CRDTId): CRDTId {\r\n    const deepCopiedArr: Identifier[] = [];\r\n    for (let i = 0; i < crdtId.arr.length; i++) {\r\n      deepCopiedArr.push(Identifier.deepCopy(crdtId.arr[i]));\r\n    }\r\n    return new CRDTId(deepCopiedArr, crdtId.clockValue);\r\n  }\r\n\r\n  /**\r\n   * Generate N globally unique CRDTs between id1 and id2\r\n   */\r\n  static generateNPositionsBetween(\r\n    id1: CRDTId,\r\n    id2: CRDTId,\r\n    N: number,\r\n    siteId: number,\r\n    clock: number\r\n  ): CRDTId[] {\r\n    /**\r\n     * A few things to keep in mind before you read this function:\r\n     * 0/ Reading this research paper helps: https://hal.inria.fr/inria-00432368/document (Especially page 4)\r\n     *\r\n     * 1/ A CRDT looks like <<3,4><5,6>9>a where <3,4><5,6> is CRDTId, 9 is clock number and 'a' is a character\r\n     *\r\n     * 2/ A CRDTId is an array of identifiers. Each identifier looks like <800,951> where (800) is digit and (951) is siteId\r\n     * To compare 2 identifiers, we first compare its digit (800). If digits are equal, compare its siteId (951)\r\n     * To compare 2 CRDTIds, we compare each corresponding identifiers, left to right:\r\n     * - The CRDTId contains the first bigger identifier is bigger\r\n     * - If the corresponding identifiers are all equal, the longer CRDTId is bigger\r\n     * - If the identifier arrays are exactly the same, compare the clock\r\n     * Ex: <3,4> is bigger than <1,4><99,9><9999,99> because <3,4> is bigger than <1,4>\r\n     * Ex: <3,4><9,9> is bigger than <3,4> because all corresponding identifiers are equal but the first CRDTId is longer\r\n     *\r\n     * 3/ You might find 'digit' (800) rather strange. Remember each 'digit' is a digit of a CustomNumber with base Math.pow(2, 25)\r\n     *\r\n     * 4/ To compare 2 CRDTs, we compare their CRDTIds\r\n     */\r\n\r\n    /**\r\n     * Rough idea of this function:\r\n     * GOAL: We need to generate N spots between id1 and id2\r\n     *\r\n     * - Step 1: + Take the first few digits of each identifiers of id1 and id2, map them into 2 CustomNumbers (prefix1 and prefix2).\r\n     * + 'The first few' has to be 'enough' so that delta = prefix1 - prefix2 has enough spots for N elements.\r\n     * + If we took all digits and delta is still not big enough, keep adding MAX_DIGIT (CustomNumber.BASE-1) to the back of\r\n     * prefix1 and prefix2 until delta is big enough\r\n     * + Note: If id2 > id1 because a siteId of an identifier of id2 is bigger,\r\n     * then we don't need to find delta this way. Why? Please read the code and comments below\r\n     *\r\n     * - Step 2: + Now, let's say N = 10 and delta (in base 10 - for illustration purposes) = 100 => we need to allocate 10 positions and\r\n     * we have 99 spots (#spots = delta - 1. Ex: 9-5 = 4, we have 3 spots: 6, 7, 8)\r\n     * + Let step = 99 / 10 = 9. Then 10 CRDTIds's digits can be 11, 20, 29,... 92\r\n     *\r\n     * - Step 3: Contruct CRDTIds from these digits using constructPosition(), we get 10 CRDTIds.\r\n     */\r\n\r\n    /**\r\n     * Step 1: Find prefix1, prefix2 and delta\r\n     */\r\n    let index = 0;\r\n    const shorterLength = Math.min(id1.arr.length, id2.arr.length);\r\n\r\n    // Find the first different identifier\r\n    while (index < shorterLength) {\r\n      if (id1.arr[index].compareTo(id2.arr[index]) !== 0) {\r\n        // First time not match\r\n        break;\r\n      }\r\n      index++;\r\n    }\r\n\r\n    let prefix1: CustomNumber;\r\n    let prefix2: CustomNumber;\r\n    let delta = new CustomNumber([0]);\r\n    const NPlus1InBaseBASE = CustomNumber.decimalToCustomNumber(N + 1);\r\n    const NInBaseBASE = CustomNumber.decimalToCustomNumber(N);\r\n\r\n    // If id2 > id1 because id2 is longer OR a digit is bigger\r\n    if (\r\n      index === shorterLength ||\r\n      id1.arr[index].digit !== id2.arr[index].digit\r\n    ) {\r\n      index--;\r\n\r\n      // loop until delta >= N + 1, so that we have at least N spots\r\n      while (delta.compareTo(NPlus1InBaseBASE) < 0) {\r\n        index++;\r\n        prefix1 = CRDTId.prefix(id1, index);\r\n        prefix2 = CRDTId.prefix(id2, index);\r\n        delta = CustomNumber.subtractGreaterThan(prefix2, prefix1);\r\n      }\r\n    }\r\n    // If id2 > id1 because a siteId is bigger\r\n    else {\r\n      // id1 = <1, 1>...\r\n      // id2 = <1, 3>...\r\n      // If newId = <1, 1>..., newId will always < id2 because siteId 1 is less than siteId 3\r\n      // With this guarantee, we now only need to find newId = <1, 1>... such that newId > id1. Below is how\r\n\r\n      prefix2 = CRDTId.prefix(id2, index);\r\n\r\n      // Keep adding MAX_DIGIT to the back of prefix2 until we have enough spots between prefix1 and prefix2\r\n      // Why adding MAX_DIGIT? Because keep adding MAX_DIGIT guarantees we'll eventually have something > prefix1 enough,\r\n      // and also, prefix2 will always < id2 because of the reason above\r\n      while (delta.compareTo(NPlus1InBaseBASE) < 0) {\r\n        index++;\r\n        prefix1 = CRDTId.prefix(id1, index);\r\n        prefix2.arr.push(CustomNumber.BASE - 1); // Add max digit (in base 10, that would be 9) to the end of prefix2\r\n        delta = CustomNumber.subtractGreaterThan(prefix2, prefix1);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Step 2: Generate N CRDTIds digits\r\n     * and Step 3: create N CRDTIds from these digits\r\n     */\r\n    const step = CustomNumber.naiveFloorDivide(\r\n      CustomNumber.subtractGreaterThan(delta, new CustomNumber([1])),\r\n      NInBaseBASE\r\n    );\r\n    let r = prefix1;\r\n    const CRDTIdList = new Array<CRDTId>();\r\n\r\n    /**\r\n     * Continue with the example above: when N = 10, delta = 100 and step = 10, we don't want to place CRDTIds too evenly\r\n     * because the majority of the time, we insert text to the right side of the last inserted character\r\n     * We want our 'CRDTIds' to look like 13, 16, 18, 20, 26,... so we still have 'spots' if we want to insert some more\r\n     * without having to grow our Identifier array\r\n     */\r\n    for (let i = 0; i < N; i++) {\r\n      const random1ToStepInclusive = CustomNumber.generateLessThan(\r\n        CustomNumber.add(step, new CustomNumber([1]))\r\n      );\r\n      const crdtIdBetween = CRDTId.constructPosition(\r\n        CustomNumber.add(r, random1ToStepInclusive),\r\n        id1,\r\n        id2,\r\n        siteId,\r\n        clock++\r\n      );\r\n      CRDTIdList.push(crdtIdBetween);\r\n      r = CustomNumber.add(r, random1ToStepInclusive);\r\n    }\r\n\r\n    return CRDTIdList;\r\n  }\r\n\r\n  /**\r\n   * Take the first 'index' + 1 digits, add 0 if not enough digits, and then convert to a CustomNumber\r\n   */\r\n  static prefix(id: CRDTId, index: number): CustomNumber {\r\n    const num = index + 1;\r\n    const numZerosToTheBack = num > id.arr.length ? num - id.arr.length : 0;\r\n    const digitOnly = id.arr.map((i) => i.digit);\r\n    let resultArr: number[];\r\n    if (id.arr.length < num) {\r\n      resultArr = digitOnly.concat(\r\n        new Array<number>(numZerosToTheBack).fill(0)\r\n      );\r\n    } else {\r\n      resultArr = digitOnly.slice(0, num);\r\n    }\r\n    return new CustomNumber(resultArr);\r\n  }\r\n\r\n  /**\r\n   * Implement exactly as Logoot paper, bottom of page 4\r\n   * Note: With this implementation, we can always get the siteId of the person\r\n   * who created this character (It is the siteId of the last identifier)\r\n   */\r\n  static constructPosition(\r\n    digits: CustomNumber,\r\n    id1: CRDTId,\r\n    id2: CRDTId,\r\n    siteId: number,\r\n    clock: number\r\n  ): CRDTId {\r\n    const identifiersArray = new Array<Identifier>(digits.arr.length);\r\n\r\n    for (let i = 0; i < identifiersArray.length; i++) {\r\n      if (i === identifiersArray.length - 1) {\r\n        identifiersArray[i] = new Identifier(digits.arr[i], siteId);\r\n      } else if (id1.arr[i] && digits.arr[i] === id1.arr[i].digit) {\r\n        // id1.arr[i] might not exist\r\n        identifiersArray[i] = new Identifier(digits.arr[i], id1.arr[i].siteId);\r\n      } else if (id2.arr[i] && digits.arr[i] === id2.arr[i].digit) {\r\n        // id2.arr[i] might not exist\r\n        identifiersArray[i] = new Identifier(digits.arr[i], id2.arr[i].siteId);\r\n      } else {\r\n        identifiersArray[i] = new Identifier(digits.arr[i], siteId);\r\n      }\r\n    }\r\n\r\n    return new CRDTId(identifiersArray, clock);\r\n  }\r\n\r\n  toString(): string {\r\n    let description = '<';\r\n    for (let i = 0; i < this.arr.length; i++) {\r\n      description = description + this.arr[i].toString();\r\n    }\r\n    description = description + this.clockValue + '>';\r\n    return description;\r\n  }\r\n\r\n  /**\r\n   * Compare 2 identifier arrays from left to right. Terminate if one identifier is bigger than the other\r\n   * If one array runs out of length, the longer is the bigger\r\n   */\r\n  compareTo(other: CRDTId): number {\r\n    const length1 = this.arr.length;\r\n    const length2 = other.arr.length;\r\n    const smallerLength = Math.min(length1, length2);\r\n\r\n    for (let i = 0; i < smallerLength; i++) {\r\n      if (this.arr[i].compareTo(other.arr[i]) === 0) {\r\n        continue;\r\n      } else {\r\n        return this.arr[i].compareTo(other.arr[i]);\r\n      }\r\n    }\r\n\r\n    if (length1 === length2) {\r\n      // This rarely, rarely happens\r\n      return this.clockValue - other.clockValue;\r\n    }\r\n    return length1 - length2;\r\n  }\r\n}\r\n\r\nexport class Identifier {\r\n  digit: number; /* digit is equivalent to pos in Logoot paper page 4 definition 1 line 1 */\r\n  siteId: number; // siteId is an integer for now, maybe we will use a Universal ID generator library later\r\n\r\n  constructor(digit: number, siteId: number) {\r\n    this.digit = digit;\r\n    this.siteId = siteId;\r\n  }\r\n\r\n  static deepCopy(id: Identifier): Identifier {\r\n    return new Identifier(id.digit, id.siteId);\r\n  }\r\n\r\n  /**\r\n   * Compare by digit. Use siteId to break tie\r\n   */\r\n  compareTo(other: Identifier): number {\r\n    if (this.digit === other.digit) {\r\n      return this.siteId - other.siteId;\r\n    }\r\n    return this.digit - other.digit;\r\n  }\r\n\r\n  toString(): string {\r\n    return '<' + this.digit + ',' + this.siteId + '>';\r\n  }\r\n}\r\n","export class CursorChangeInfo {\r\n  line: number;\r\n  col: number;\r\n  peerId: string;\r\n  source: any;\r\n  reason: any;\r\n  constructor(line: number, col: number, peerId: string, source: any, reason: any) {\r\n    this.line = line;\r\n    this.col = col;\r\n    this.peerId = peerId;\r\n    this.source = source;\r\n    this.reason = reason;\r\n  }\r\n}","import { Identifier } from './CRDT';\r\n\r\n/**\r\n * Number in base BASE with addition, subtraction and a few other functionalities\r\n */\r\nexport class CustomNumber {\r\n  // Don't use BASE too large (less than 2^50).\r\n  // Reason: Number.MAX_SAFE_INTEGER == 2^53 - 1. This class will have some adding. We don't want number to exceed MAX_SAFE_INTEGER\r\n  // Also: Don't use BASE too small (has to be bigger than 100)\r\n  // Reason: In function generateLessThan, we hard-coded the value 100\r\n  static readonly BASE = Math.pow(2, 25);\r\n  arr: number[];\r\n\r\n  constructor(list: number[]) {\r\n    this.arr = Object.assign([], CustomNumber.trimLeadingZeros(list)); // Deep copy\r\n  }\r\n\r\n  /**\r\n   * Normal subtract function in base BASE with the assumption that n1 >= n2\r\n   */\r\n  static subtractGreaterThan(n1: CustomNumber, n2: CustomNumber): CustomNumber {\r\n    if (n1.compareTo(n2) < 0) {\r\n      throw new Error('n1 < n2 in when substracting greater than');\r\n    }\r\n\r\n    let carry = 0;\r\n    let resArr = new Array<number>(n1.arr.length);\r\n\r\n    let index1 = n1.arr.length - 1;\r\n    let index2 = n2.arr.length - 1;\r\n\r\n    if (index2 > index1) {\r\n      throw new Error('n1 cannot not be smaller than n2');\r\n    }\r\n\r\n    while (index2 >= 0) {\r\n      let curDigit = n1.arr[index1] - n2.arr[index2] - carry;\r\n      carry = 0;\r\n      if (curDigit < 0) {\r\n        carry = 1;\r\n        curDigit += this.BASE;\r\n      }\r\n      resArr[index1] = curDigit;\r\n      index1--;\r\n      index2--;\r\n    }\r\n\r\n    while (index1 >= 0) {\r\n      let curDigit = n1.arr[index1] - carry;\r\n      carry = 0;\r\n      if (curDigit < 0) {\r\n        carry = 1;\r\n        curDigit += this.BASE;\r\n      }\r\n      resArr[index1] = curDigit;\r\n      index1--;\r\n    }\r\n\r\n    resArr = CustomNumber.trimLeadingZeros(resArr);\r\n\r\n    return new CustomNumber(resArr);\r\n  }\r\n\r\n  /**\r\n   * Normal add function in base BASE\r\n   */\r\n  static add(n1: CustomNumber, n2: CustomNumber): CustomNumber {\r\n    const length1 = n1.arr.length;\r\n    const length2 = n2.arr.length;\r\n    const biggerLength = Math.max(length1, length2);\r\n    let resArr = new Array<number>(biggerLength + 1);\r\n\r\n    let carry = 0;\r\n    let index1 = length1 - 1;\r\n    let index2 = length2 - 1;\r\n    let resIndex = resArr.length - 1;\r\n\r\n    while (index1 >= 0 && index2 >= 0) {\r\n      const sum = n1.arr[index1] + n2.arr[index2] + carry;\r\n      carry = Math.floor(sum / this.BASE);\r\n      const realDigit = sum % this.BASE;\r\n      resArr[resIndex] = realDigit;\r\n      index1--;\r\n      index2--;\r\n      resIndex--;\r\n    }\r\n\r\n    // At most 1 while loop will be executed\r\n    while (index1 >= 0) {\r\n      const sum = n1.arr[index1] + carry;\r\n      carry = Math.floor(sum / this.BASE);\r\n      const realDigit = sum % this.BASE;\r\n      resArr[resIndex] = realDigit;\r\n      index1--;\r\n      resIndex--;\r\n    }\r\n\r\n    while (index2 >= 0) {\r\n      const sum = n2.arr[index2] + carry;\r\n      carry = Math.floor(sum / this.BASE);\r\n      const realDigit = sum % this.BASE;\r\n      resArr[resIndex] = realDigit;\r\n      index2--;\r\n      resIndex--;\r\n    }\r\n\r\n    resArr[0] = carry;\r\n\r\n    resArr = CustomNumber.trimLeadingZeros(resArr);\r\n\r\n    return new CustomNumber(resArr);\r\n  }\r\n\r\n  /**\r\n   * Convert to base 10, do integer division and then convert back\r\n   */\r\n  static naiveFloorDivide(n1: CustomNumber, n2: CustomNumber): CustomNumber {\r\n    const decimal1 = CustomNumber.customNumberToDecimal(n1);\r\n    const decimal2 = CustomNumber.customNumberToDecimal(n2);\r\n    const quotientDecimal = Math.floor(decimal1 / decimal2);\r\n\r\n    return CustomNumber.decimalToCustomNumber(quotientDecimal);\r\n  }\r\n\r\n  static customNumberToDecimal(n: CustomNumber): number {\r\n    let num = 0;\r\n    let pos = 0;\r\n\r\n    for (let index = n.arr.length - 1; index >= 0; index--) {\r\n      num += n.arr[index] * Math.pow(CustomNumber.BASE, pos);\r\n      pos++;\r\n    }\r\n\r\n    if (!Number.isSafeInteger(num)) {\r\n      throw new Error(\r\n        'Error: Number is not safe. Potential precision lost. Check if CustomNumber.BASE is too large'\r\n      );\r\n    }\r\n\r\n    return num;\r\n  }\r\n\r\n  static decimalToCustomNumber(n: number): CustomNumber {\r\n    const arr = new Array<number>();\r\n\r\n    while (n > 0) {\r\n      arr.push(n % CustomNumber.BASE);\r\n      n = Math.floor(n / CustomNumber.BASE);\r\n    }\r\n\r\n    return new CustomNumber(arr.reverse());\r\n  }\r\n\r\n  /**\r\n   * Return a CustomNumber object from an IdentifierArray by taking digits only\r\n   */\r\n  static customNumberFromIdentifierArray(\r\n    identifiers: Identifier[]\r\n  ): CustomNumber {\r\n    const digitArr = identifiers.map((id) => id.digit);\r\n    return new CustomNumber(digitArr);\r\n  }\r\n\r\n  /**\r\n   * Decrease some digits to generate a number less than n\r\n   */\r\n  static generateLessThan(n: CustomNumber): CustomNumber {\r\n    // Optimization: If n is bigger than 100: just return something from 1 to 100 inclusive\r\n    if (n.compareTo(new CustomNumber([100])) > 0) {\r\n      const randomDigit = Math.floor(Math.random() * 100) + 1;\r\n      return new CustomNumber([randomDigit]);\r\n    }\r\n\r\n    // If only 1 digit\r\n    if (n.arr.length === 1) {\r\n      const newDigit = Math.floor(Math.random() * (n.arr[0] - 1)) + 1; // newDigit = 1->oldDigit-1. Never 0\r\n      return new CustomNumber([newDigit]);\r\n    }\r\n\r\n    // 2 digits or longer\r\n    let newArr = Object.assign([], n.arr);\r\n    const numDigitsNonZero = newArr.filter((x) => x !== 0).length;\r\n    if (numDigitsNonZero === 1) {\r\n      // Such an unusual case (Ex: 1000000)\r\n      // Decrease that number by 1 to get more nonZeroDigits\r\n      const newNumber = CustomNumber.subtractGreaterThan(\r\n        n,\r\n        new CustomNumber([1])\r\n      );\r\n      newArr = Object.assign([], newNumber.arr);\r\n    }\r\n\r\n    // Decrease 1->numDigitsNonZero-1 times, prioritize more significant digits\r\n    const toBeDecreased =\r\n      Math.floor(Math.random() * (numDigitsNonZero - 1)) + 1;\r\n    for (let i = 0; i < newArr.length; i++) {\r\n      if (newArr[i] !== 0) {\r\n        newArr[i] = Math.floor(Math.random() * newArr[i]);\r\n      }\r\n    }\r\n\r\n    // Always return something > 0\r\n    const result = new CustomNumber(CustomNumber.trimLeadingZeros(newArr));\r\n    if (result.compareTo(new CustomNumber([0])) === 0) {\r\n      // If result is 0\r\n      return new CustomNumber([1]); // fine! return 1\r\n    }\r\n    return result; // If result is not 0, return result\r\n  }\r\n\r\n  /**\r\n   * Trim leading zeros, but left 1 zero if the remaining array is [0]\r\n   */\r\n  static trimLeadingZeros(arr: number[]): number[] {\r\n    const firstNonZeroIndex = arr.findIndex((x) => x !== 0);\r\n    if (firstNonZeroIndex === -1) {\r\n      // If the whole array is 0\r\n      return [0];\r\n    }\r\n    return arr.slice(firstNonZeroIndex, arr.length);\r\n  }\r\n\r\n  /**\r\n   * Normal compare in base BASE\r\n   */\r\n  compareTo(other: CustomNumber): number {\r\n    if (this.arr.length !== other.arr.length) {\r\n      return this.arr.length - other.arr.length;\r\n    }\r\n\r\n    for (let i = 0; i < this.arr.length; i++) {\r\n      if (this.arr[i] !== other.arr[i]) {\r\n        return this.arr[i] - other.arr[i];\r\n      }\r\n    }\r\n    return 0; // Equal\r\n  }\r\n\r\n  toString(): string {\r\n    let description = '';\r\n    let currentBase = CustomNumber.BASE;\r\n    if (currentBase === 10) {\r\n      for (let i = 0; i < this.arr.length; i++) {\r\n        description = description + this.arr[i];\r\n      }\r\n    } else {\r\n      for (let i = 0; i < this.arr.length; i++) {\r\n        description = description + '(' + this.arr[i] + ')';\r\n      }\r\n    }\r\n    return description;\r\n  }\r\n}\r\n","export const Languages = [\r\n  { name: 'ABAP', value: 'abap', ext: '' },\r\n  { name: 'AES', value: 'aes', ext: '' },\r\n  { name: 'Apex', value: 'apex', ext: '' },\r\n  { name: 'Azure CLI', value: 'azcli', ext: '' },\r\n  { name: 'Bat', value: 'bat', ext: '.bat' },\r\n  { name: 'C', value: 'c', ext: '.c' },\r\n  { name: 'Clojure', value: 'clojure', ext: '.clj' },\r\n  { name: 'CoffeeScript', value: 'coffeescript', ext: '.litcoffee' },\r\n  { name: 'C++', value: 'cpp', ext: '.cpp' },\r\n  { name: 'C#', value: 'csharp', ext: '.cs' },\r\n  { name: 'CSP', value: 'csp', ext: '' },\r\n  { name: 'CSS', value: 'css', ext: '.css' },\r\n  { name: 'Docker', value: 'dockerfile', ext: '' },\r\n  { name: 'F#', value: 'fsharp', ext: '.fs' },\r\n  { name: 'Go', value: 'go', ext: '.go' },\r\n  { name: 'GraphQL', value: 'graphql', ext: '.graphql' },\r\n  { name: 'Handlebars', value: 'handlebars', ext: '' },\r\n  { name: 'HTML', value: 'html', ext: '.html' },\r\n  { name: 'ini', value: 'ini', ext: '.ini' },\r\n  { name: 'Java', value: 'java', ext: '.java' },\r\n  { name: 'JavaScript', value: 'javascript', ext: '.js' },\r\n  { name: 'JSON', value: 'json', ext: '.json' },\r\n  { name: 'Kotlin', value: 'kotlin', ext: '.kts' },\r\n  { name: 'LESS', value: 'less', ext: '.less' },\r\n  { name: 'Lua', value: 'lua', ext: '.lua' },\r\n  { name: 'Markdown', value: 'markdown', ext: '.md' },\r\n  { name: 'MIPS', value: 'mips', ext: '' },\r\n  { name: 'Microsoft DAX', value: 'msdax', ext: '' },\r\n  { name: 'MySQL', value: 'mysql', ext: '.sql' },\r\n  { name: 'Objective-C', value: 'objective-c', ext: '.mm' },\r\n  { name: 'Pascal', value: 'pascal', ext: '.pas' },\r\n  { name: 'Perl', value: 'perl', ext: '.pl' },\r\n  { name: 'PostgreSQL', value: 'pgsql', ext: '.sql' },\r\n  { name: 'PHP', value: 'php', ext: '.php' },\r\n  { name: 'Plain Text', value: 'plaintext', ext: '.txt' },\r\n  { name: 'Power Query', value: 'powerquery', ext: '' },\r\n  { name: 'Power Shell', value: 'powershell', ext: '.ps1' },\r\n  { name: 'Pug', value: 'pug', ext: '' },\r\n  { name: 'Python', value: 'python', ext: '.py' },\r\n  { name: 'R', value: 'r', ext: '.R' },\r\n  { name: 'Razor', value: 'razor', ext: '' },\r\n  { name: 'Redis', value: 'redis', ext: '' },\r\n  { name: 'Redshift', value: 'redshift', ext: '' },\r\n  { name: 'reStructuredText', value: 'restructuredtext', ext: '' },\r\n  { name: 'Ruby', value: 'ruby', ext: '.rb' },\r\n  { name: 'Rust', value: 'rust', ext: '.rs' },\r\n  { name: 'Small Basic', value: 'sb', ext: '' },\r\n  { name: 'Scheme', value: 'scheme', ext: '.scm' },\r\n  { name: 'SCSS', value: 'scss', ext: '' },\r\n  { name: 'Shell', value: 'shell', ext: '' },\r\n  { name: 'SOL', value: 'sol', ext: '' },\r\n  { name: 'SQL', value: 'sql', ext: '.sql' },\r\n  { name: 'Structured Text', value: 'st', ext: '' },\r\n  { name: 'Swift', value: 'swift', ext: '.swift' },\r\n  { name: 'Tcl', value: 'tcl', ext: '.tcl' },\r\n  { name: 'Twig', value: 'twig', ext: '.twig' },\r\n  { name: 'Typescript', value: 'typescript', ext: '.ts' },\r\n  { name: 'Visual Basic', value: 'vb', ext: '.vb' },\r\n  { name: 'XML', value: 'xml', ext: '.xml' },\r\n  { name: 'YAML', value: 'yaml', ext: '.yml' },\r\n];\r\n","export class Message {\r\n  content: any;\r\n  messageType: MessageType;\r\n  fromPeerId: string;\r\n  chatMessageTime: number;\r\n  crdtBatchNumber: number;\r\n  totalCrdtBatches: number;\r\n  constructor(\r\n    content: any,\r\n    messageType: MessageType,\r\n    fromPeerId: string,\r\n    chatMessageTime?: number\r\n  ) {\r\n    this.content = content;\r\n    this.messageType = messageType;\r\n    this.fromPeerId = fromPeerId;\r\n    this.chatMessageTime = chatMessageTime;\r\n  }\r\n}\r\n\r\nexport const enum MessageType {\r\n  RemoteInsert,\r\n  RemoteRemove,\r\n  OldCRDTs,\r\n  OldCRDTsLastBatch,\r\n  RequestOldCRDTsAndChatMessages,\r\n  Acknowledge,\r\n  ChangeLanguage,\r\n  CannotSendOldCRDTsOrOldChatMessages,\r\n  ChatMessage,\r\n  OldChatMessages,\r\n  RequestOldChatMessages,\r\n  CannotSendOldChatMessages,\r\n  ChangeCursor,\r\n  ChangeSelect,\r\n  CursorColor,\r\n  Name,\r\n  CanDisplayMeJustJoinRoom,\r\n  ChangeName,\r\n}\r\n","export class NameColor {\r\n  name: string;\r\n  color: number;\r\n  ofPeerId: string;\r\n\r\n  constructor(name: string, color: number, ofPeerId: string) {\r\n    this.name = name;\r\n    this.color = color;\r\n    this.ofPeerId = ofPeerId;\r\n  }\r\n}\r\n","export class SelectionChangeInfo {\r\n  startLine: number;\r\n  startColumn: number;\r\n  endLine: number;\r\n  endColumn: number;\r\n  peerId: string;\r\n  source: any;\r\n  reason: any;\r\n  constructor(\r\n    startLine: number,\r\n    startCol: number,\r\n    endLine: number,\r\n    endCol: number,\r\n    peerId: string,\r\n    source: any,\r\n    reason: any\r\n  ) {\r\n    this.startLine = startLine;\r\n    this.startColumn = startCol;\r\n    this.endLine = endLine;\r\n    this.endColumn = endCol;\r\n    this.peerId = peerId;\r\n    this.source = source;\r\n    this.reason = reason;\r\n  }\r\n}\r\n","import { CRDT } from './CRDT';\r\nimport { Message } from './Message';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { AnnounceType } from './AnnounceType';\r\nimport { NameColor } from './NameColor';\r\nimport * as alertify from 'alertifyjs';\r\nimport { AlertType } from './AlertType';\r\nimport { Languages } from './Languages';\r\n\r\nexport class CrdtUtils {\r\n\r\n  static crdtArrToString(crdts: CRDT[], seperator: string): string {\r\n    const crdtStrings = crdts.map((crdt) => crdt.toString());\r\n    return crdtStrings.join(seperator);\r\n  }\r\n\r\n  static stringToCRDTArr(str: string, delimiter: string): CRDT[] {\r\n    const crdtStrings = str.split(delimiter);\r\n    const crdts = crdtStrings.map((crdtStr) => CRDT.parse(crdtStr));\r\n    return crdts;\r\n  }\r\n\r\n\r\n  static MAX_STRING_LENGTH_PER_SEND = 64000; // 64Kb => 65536 bytes => 65536 chars. Leave some chars for JSON\r\n  /**\r\n   * Break huge crdts array into smaller arrays to avoid connection crash when sending\r\n   */\r\n  static breakCrdtsIntoCrdtStringBatches(\r\n    crdts: CRDT[],\r\n    delimiter: string\r\n  ): string[] {\r\n    const crdtStrings = crdts.map((crdt) => crdt.toString());\r\n    const crdtStringsBatches: string[] = [];\r\n    let startIndex = 0;\r\n    let i: number;\r\n    let curLength = 0;\r\n    for (i = 0; i < crdtStrings.length; i++) {\r\n      if (\r\n        curLength + crdtStrings[i].length >=\r\n        this.MAX_STRING_LENGTH_PER_SEND\r\n      ) {\r\n        crdtStringsBatches.push(\r\n          crdtStrings.slice(startIndex, i).join(delimiter)\r\n        );\r\n        startIndex = i;\r\n        curLength = 0;\r\n        i--;\r\n      } else {\r\n        curLength += crdtStrings[i].length + 2; // +2 for delimiter\r\n      }\r\n    }\r\n    crdtStringsBatches.push(crdtStrings.slice(startIndex, i).join(delimiter));\r\n    return crdtStringsBatches;\r\n  }\r\n}\r\n\r\nexport class PeerUtils {\r\n  static announce = new EventEmitter<AnnounceType>();\r\n\r\n  static connectionHasOpened(con: any, connections: any[]): boolean {\r\n    return connections.findIndex((x) => x.peer === con.peer) !== -1;\r\n  }\r\n\r\n  static announceInfo(announceType: AnnounceType): void {\r\n    PeerUtils.announce.emit(announceType);\r\n  }\r\n\r\n  static addUniqueMessages(list: Message[], listToBeAddedTo: Message[]) {\r\n    list.forEach((message) => {\r\n      let weHadThatMessage = false;\r\n      for (let i = 0; i < listToBeAddedTo.length; i++) {\r\n        if (\r\n          listToBeAddedTo[i].fromPeerId === message.fromPeerId &&\r\n          listToBeAddedTo[i].chatMessageTime === message.chatMessageTime\r\n        ) {\r\n          weHadThatMessage = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!weHadThatMessage) {\r\n        listToBeAddedTo.push(message);\r\n      }\r\n    });\r\n  }\r\n\r\n  static handlePeerError(message: string) {\r\n    let ans = confirm(message);\r\n    if (ans === true) window.location.replace('/');\r\n    else PeerUtils.announceInfo(AnnounceType.UnhandledError);\r\n\r\n    // TODO: WARN USER THAT THIS HAS STOP SYNC\r\n  }\r\n}\r\n\r\nexport class Utils {\r\n  static broadcast = new EventEmitter<AnnounceType>();\r\n\r\n  static addUniqueConnections(list: any[], listToBeAddedTo: any[]) {\r\n    list.forEach((obj) => {\r\n      let hasExist = false;\r\n      for (let i = 0; i < listToBeAddedTo.length; i++) {\r\n        if (obj.peer === listToBeAddedTo[i].peer) {\r\n          hasExist = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!hasExist) {\r\n        listToBeAddedTo.push(obj);\r\n      }\r\n    });\r\n  }\r\n\r\n  static addUniqueNameColor(\r\n    nameColor: NameColor,\r\n    listToBeAddedTo: NameColor[]\r\n  ) {\r\n    if (\r\n      !listToBeAddedTo.find(\r\n        (x) => x.name === nameColor.name && x.color === nameColor.color\r\n      )\r\n    ) {\r\n      listToBeAddedTo.push(nameColor);\r\n    }\r\n  }\r\n\r\n  static broadcastInfo(announceType: AnnounceType): void {\r\n    Utils.broadcast.emit(announceType);\r\n  }\r\n\r\n  static alert(message: string, alertType: AlertType) {\r\n    if (alertType === AlertType.Success) alertify.success(message);\r\n    else if (alertType === AlertType.Warning) alertify.warning(message);\r\n    else if (alertType === AlertType.Error) alertify.error(message);\r\n    else if (alertType === AlertType.Message) alertify.message(message);\r\n  }\r\n\r\n  static inArray(item: any, array: any[]) {\r\n    return array.findIndex(elem => elem === item) !== -1;\r\n  }\r\n\r\n  confirm(message: string, okCallback: () => any) {\r\n    alertify.confirm(message, (e: any) => {\r\n      if (e) okCallback();\r\n    });\r\n  }\r\n\r\n  static getLanguageName(lang: string) {\r\n    return Languages.find(elem => elem.value === lang).name;\r\n  }\r\n\r\n  static getLanguageExt(lang: string) {\r\n    return Languages.find(elem => elem.value === lang).ext;\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  // apiUrl: 'http://localhost:5000/api/',\r\n  apiUrl: 'https://code-spot-p2p.vercel.app/api/',\r\n  peerServerHost: 'codespotpeerserver.herokuapp.com/'\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"sourceRoot":"webpack:///"}